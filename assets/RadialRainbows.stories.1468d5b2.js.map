{"version":3,"file":"RadialRainbows.stories.1468d5b2.js","sources":["../../src/components/RadialRainbows/RadialRainbows.jsx"],"sourcesContent":["/**\n * @file RadialRainbows.js\n */\nimport { useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport Paper from 'paper'\nimport { usePaperJS, useLayoutEffect } from '@fomolol/tacklebox'\n\nimport s from './RadialRainbows.module.css'\n\nconst RadialRainbows = ({\n  tagName: Tag = 'canvas',\n  className = 'absolute top-0 left-0 w-screen h-screen',\n  variant = 'default',\n  children = '',\n}) => {\n  const ref = useRef()\n  const project = usePaperJS({ ref })\n\n  useLayoutEffect(() => {\n    if (project) {\n      const { view } = project\n      const { Point, Path } = Paper\n\n      var point = view.center\n\n      var colors = []\n      var cycles = 4\n\n      // Generate some rainbow colors\n      for (var i = 0, l = 60; i < l; i++) {\n        var brightness = 1 - (i / l) * 1.5\n        var hue = (i / l) * cycles * 360\n        var color = {\n          hue: hue,\n          saturation: 1,\n          brightness: brightness,\n        }\n        colors.push(color)\n      }\n\n      var radius = Math.max(view.size.width, view.size.height) * 0.75\n\n      var path = new Path.Rectangle({\n        rectangle: view.bounds,\n        fillColor: {\n          origin: point,\n          destination: new Point(point.x + radius, 0),\n          gradient: {\n            stops: [\n              ['white', 0],\n              ['white', 0.05],\n              ['white', 0.07],\n              ...colors.splice(0, 5),\n              ['black', 0.95],\n              ['black', 0.2],\n              ['black', 1],\n            ],\n            radial: true,\n          },\n        },\n      })\n\n      var color = path.fillColor\n      var gradient = color.gradient\n      var mouseDown = false\n      var mousePoint = view.center\n\n      var grow = false\n      var vector = new Point(150, 0)\n\n      view.onMouseDown = (event) => {\n        mouseDown = true\n        mousePoint = event.point\n      }\n\n      view.onMouseDrag = (event) => {\n        mousePoint = event.point\n      }\n\n      view.onMouseUp = (event) => {\n        vector.length = 10\n        mouseDown = false\n      }\n\n      view.onFrame = ({ delta, time, count }) => {\n        for (var i = 0, l = gradient.stops.length; i < l; i++) {\n          gradient.stops[i].color.hue -= 20\n        }\n\n        if (grow && vector.length > 300) {\n          grow = false\n        } else if (!grow && vector.length < 75) {\n          grow = true\n        }\n\n        if (mouseDown) {\n          point.x = point.x + (mousePoint.x - point.x) / 10\n          point.y = point.y + (mousePoint.y - point.y) / 10\n        } else {\n          vector.length += grow ? 1 : -1\n          vector.angle += 5\n        }\n        color.highlight = mouseDown\n          ? point\n          : new Point({ x: point.x + vector.x, y: point.y + vector.y })\n      }\n\n      view.onResize = (event) => {\n        point = view.center\n        path.bounds = view.bounds\n        var color = path.fillColor\n        color.origin = point\n        var radius = Math.max(view.size.width, view.size.height) * 0.75\n        color.destination = new Point(point.x + radius, 0)\n\n        // paper.project._needsUpdate = true;\n        // paper.project.view.update();\n      }\n    }\n  }, [project])\n\n  return (\n    <Tag\n      className={`${s.radial_rainbows} ${\n        s[`radial_rainbows__${variant}`]\n      } ${className}`}\n      ref={ref}\n      data-paper-resize=\"true\"\n    >\n      {children}\n    </Tag>\n  )\n}\n\nRadialRainbows.propTypes = {\n  tagName: PropTypes.string,\n  className: PropTypes.string,\n  variant: PropTypes.oneOf(['default']),\n  children: PropTypes.node,\n}\n\nexport default RadialRainbows\n"],"names":["RadialRainbows","__name","tagName","Tag","className","variant","children","ref","useRef","project","usePaperJS","useLayoutEffect","view","Point","Path","Paper","point","center","colors","cycles","i","l","brightness","hue","color","saturation","push","radius","Math","max","size","width","height","path","Rectangle","rectangle","bounds","fillColor","origin","destination","x","gradient","stops","splice","radial","mouseDown","mousePoint","grow","vector","onMouseDown","event","onMouseDrag","onMouseUp","length","onFrame","delta","time","count","y","angle","highlight","onResize","s","radial_rainbows","propTypes","PropTypes","string","oneOf","node","RadialRainbows$1"],"mappings":"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"}