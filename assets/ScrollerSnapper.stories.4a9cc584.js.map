{"version":3,"file":"ScrollerSnapper.stories.4a9cc584.js","sources":["../../src/components/ScrollerSnapper/Debugger.jsx","../../src/components/ScrollerSnapper/ScrollerSnapper.jsx"],"sourcesContent":["/**\n * @file Debugger.jsx\n */\nimport { useWindowSize } from '@fomolol/tacklebox'\n\nconst Debugger = ({ calcHeight, scrollY, scrollYProgress }) => {\n  const { width, height } = useWindowSize()\n\n  return (\n    <section className=\"fixed flex items-center justify-center w-full text-center top-4 z-infinity \">\n      <div className=\"flex w-auto px-6 py-2 mx-auto space-x-4 font-mono text-sm font-normal rounded-2xl bg-white/50\">\n        <p className=\"after:content-['_|']\">\n          <span className=\"font-bold\">height:</span>\n          <span>{calcHeight.get()}</span>\n        </p>\n\n        <p className=\"after:content-['_|']\">\n          <span className=\"font-bold\">y:</span>\n          <span>{scrollY}</span>\n        </p>\n\n        <p className=\"after:content-['_|']\">\n          <span className=\"font-bold\">percentage:</span>\n          <span>{(scrollYProgress * 100).toFixed(0)}%</span>\n        </p>\n\n        <p>\n          <span className=\"font-bold\">window </span>\n          <span className=\"after:content-['_|_']\">h:{height}</span>\n          <span className=\"\">w:{width}</span>\n        </p>\n      </div>\n    </section>\n  )\n}\n\nexport default Debugger\n","/**\n * @file ScrollerSnapper.js\n * This component has a bug related to scroll. Whenever smooth\n * scroll is active, I'm pretty sure this doesn't work.\n *\n * WARNING: Beta version, use with caution\n */\n/**\n * @file Scroller.js\n */\nimport { useState, createRef, forwardRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { useScroll, useTransform, motion } from 'framer-motion'\nimport { useWindowSize } from '@fomolol/tacklebox'\n\nimport ScrollProgressLine from '../ScrollProgressLine'\n\n// local\nimport Debugger from './Debugger'\n\nimport s from './ScrollerSnapper.module.css'\n\n/**\n * SnapParent\n */\nconst SnapParent = forwardRef(({ ...props }, ref) => (\n  <div\n    ref={ref}\n    {...props}\n    className={`overflow-touch absolute h-screen w-full snap-y snap-mandatory overflow-scroll`}\n  >\n    {props.children}\n    <style jsx>{`\n      .overflow-touch {\n        -webkit-overflow-scrolling: touch;\n      }\n    `}</style>\n  </div>\n))\n\nconst ScrollerSnapper = ({\n  tagName: Tag = motion.div,\n  className = 'relative z-0 h-screen min-w-full pointer-events-auto',\n  variant = 'default',\n  children = '',\n  damping = 15,\n  mass = 0.15,\n  stiffness = 25,\n  disable = false,\n  debug = true,\n  scrollRef = createRef(),\n  ...rest\n}) => {\n  const { height } = useWindowSize()\n  const [scrollYValue, setScrollYValue] = useState(0)\n  const [scrollYProgressValue, setScrollYProgressValue] = useState(0)\n\n  // TODO: Need to look into fixing when proper values .current is passed.\n  const { scrollY, scrollYProgress } = useScroll({\n    container: scrollRef,\n  }) // measures how many pixels user has scrolled vertically\n\n  const pageRange = [0.1, 0.25, 0.5, 1]\n  const lengthRange = ['15vh', '25vh', '50vh', '100vh']\n  const calcHeight = useTransform(scrollYProgress, pageRange, lengthRange)\n\n  useEffect(() => {\n    scrollY.onChange((v) => setScrollYValue(v))\n    scrollYProgress.onChange((v) => setScrollYProgressValue(v))\n  }, [scrollY, scrollYProgress])\n\n  return (\n    <>\n      {debug && (\n        <Debugger\n          calcHeight={calcHeight}\n          scrollY={scrollYValue}\n          scrollYProgress={scrollYProgressValue}\n        />\n      )}\n      <Tag\n        className={`${s.scroller_snapper} ${\n          s[`scroller_snapper__${variant}`]\n        } ${className}`}\n        id=\"scroll-container\"\n        {...rest}\n      >\n        <ScrollProgressLine\n          width={scrollYProgress.getVelocity()}\n          forwardRef={scrollRef}\n        />\n        <SnapParent ref={scrollRef}>{children}</SnapParent>\n      </Tag>\n      {/* blank div that has a dynamic height based on the content's inherent height */}\n      {/* this is neccessary to allow the scroll container to scroll... */}\n      {/* ... using the browser's native scroll bar */}\n      {scrollRef.current && height ? (\n        <div\n          className=\"pointer-events-none\"\n          style={disable ? { height: '0px' } : { height: `${height}px` }}\n        />\n      ) : null}\n    </>\n  )\n}\n\nScrollerSnapper.propTypes = {\n  tagName: PropTypes.string,\n  className: PropTypes.string,\n  variant: PropTypes.oneOf(['default']),\n  children: PropTypes.node,\n}\n\nexport default ScrollerSnapper\n"],"names":["Debugger","__name","calcHeight","scrollY","scrollYProgress","width","height","useWindowSize","_jsxs","_jsx","get","toFixed","SnapParent","forwardRef","props","ref","children","ScrollerSnapper","tagName","Tag","motion","div","className","variant","damping","mass","stiffness","disable","debug","scrollRef","createRef","rest","scrollYValue","setScrollYValue","useState","scrollYProgressValue","setScrollYProgressValue","useScroll","container","useTransform","useEffect","onChange","v","_Fragment","s","scroller_snapper","ScrollProgressLine","getVelocity","current","propTypes","PropTypes","string","oneOf","node","ScrollerSnapper$1"],"mappings":"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"}