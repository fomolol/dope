var Ds=Object.defineProperty;var T=(R,p)=>Ds(R,"name",{value:p,configurable:!0});import{r as De}from"./index.6015db55.js";import{_ as Fn,r as Fs,a as yi,b as Ca,s as Hs}from"./script.3a7fbfff.js";import{a as Us}from"./client.94e99853.js";import{r as Vs}from"./index.9cd4b3d6.js";import{j as Ta,F as js}from"./jsx-runtime.547177f5.js";import{c as di,T as $s,U as ta}from"./iframe.1f35fd3c.js";import{r as Ws}from"./acorn.18367aad.js";import{u as wn,a as qs}from"./use-motion-template.e5260baa.js";import{a as Gs}from"./animate.aee8590b.js";var Xs={exports:{}},oi={exports:{}},jt={},fr={};(function(R){Object.defineProperty(R,"__esModule",{value:!0}),Object.defineProperty(R,"default",{enumerable:!0,get:function(){return m}});function p(D,v,r,c,g,h,O){try{var x=D[h](O),I=x.value}catch(S){r(S);return}x.done?v(I):Promise.resolve(I).then(c,g)}T(p,"asyncGeneratorStep");function m(D){return function(){var v=this,r=arguments;return new Promise(function(c,g){var h=D.apply(v,r);function O(I){p(h,c,g,O,x,"next",I)}T(O,"_next");function x(I){p(h,c,g,O,x,"throw",I)}T(x,"_throw"),O(void 0)})}}T(m,"_asyncToGenerator")})(fr);var Dn={exports:{}},gn={};Object.defineProperty(gn,"__esModule",{value:!0});gn.removeTrailingSlash=Zs;function Zs(R){return R.replace(/\/$/,"")||"/"}T(Zs,"removeTrailingSlash");var rn={};Object.defineProperty(rn,"__esModule",{value:!0});rn.parsePath=Ks;function Ks(R){const p=R.indexOf("#"),m=R.indexOf("?"),D=m>-1&&(p<0||m<p);return D||p>-1?{pathname:R.substring(0,D?m:p),query:D?R.substring(m,p>-1?p:void 0):"",hash:p>-1?R.slice(p):""}:{pathname:R,query:"",hash:""}}T(Ks,"parsePath");(function(R,p){Object.defineProperty(p,"__esModule",{value:!0}),p.normalizePathTrailingSlash=void 0;var m=gn,D=rn;const v=T(r=>{if(!r.startsWith("/")||process.env.__NEXT_MANUAL_TRAILING_SLASH)return r;const{pathname:c,query:g,hash:h}=D.parsePath(r);return process.env.__NEXT_TRAILING_SLASH?/\.[^/]+\/?$/.test(c)?`${m.removeTrailingSlash(c)}${g}${h}`:c.endsWith("/")?`${c}${g}${h}`:`${c}/${g}${h}`:`${m.removeTrailingSlash(c)}${g}${h}`},"normalizePathTrailingSlash");p.normalizePathTrailingSlash=v,(typeof p.default=="function"||typeof p.default=="object"&&p.default!==null)&&typeof p.default.__esModule>"u"&&(Object.defineProperty(p.default,"__esModule",{value:!0}),Object.assign(p.default,p),R.exports=p.default)})(Dn,Dn.exports);var Zi={exports:{}},hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.default=Js;function Js(R,p=""){return(R==="/"?"/index":/^\/index(\/|$)/.test(R)?`/index${R}`:`${R}`)+p}T(Js,"getAssetPathFromRoute");var Ki={exports:{}};(function(R,p){Object.defineProperty(p,"__esModule",{value:!0}),p.__unsafeCreateTrustedScriptURL=v;let m;function D(){if(typeof m>"u"&&typeof window<"u"){var r;m=((r=window.trustedTypes)==null?void 0:r.createPolicy("nextjs",{createHTML:c=>c,createScript:c=>c,createScriptURL:c=>c}))||null}return m}T(D,"getPolicy");function v(r){var c;return((c=D())==null?void 0:c.createScriptURL(r))||r}T(v,"__unsafeCreateTrustedScriptURL"),(typeof p.default=="function"||typeof p.default=="object"&&p.default!==null)&&typeof p.default.__esModule>"u"&&(Object.defineProperty(p.default,"__esModule",{value:!0}),Object.assign(p.default,p),R.exports=p.default)})(Ki,Ki.exports);(function(R,p){Object.defineProperty(p,"__esModule",{value:!0}),p.markAssetError=h,p.isAssetError=O,p.getClientBuildManifest=_,p.createRouteLoader=F;var m=Fn.default;m(hr);var D=Ki.exports,v=Fs.exports;const r=3800;function c(K,X,L){let W=X.get(K);if(W)return"future"in W?W.future:Promise.resolve(W);let $;const q=new Promise(ee=>{$=ee});return X.set(K,W={resolve:$,future:q}),L?L().then(ee=>($(ee),ee)).catch(ee=>{throw X.delete(K),ee}):q}T(c,"withFuture");const g=Symbol("ASSET_LOAD_ERROR");function h(K){return Object.defineProperty(K,g,{})}T(h,"markAssetError");function O(K){return K&&g in K}T(O,"isAssetError");function x(K){try{return K=document.createElement("link"),!!window.MSInputMethodContext&&!!document.documentMode||K.relList.supports("prefetch")}catch{return!1}}T(x,"hasPrefetch");const I=x();function S(K,X,L){return new Promise((W,$)=>{const q=`
      link[rel="prefetch"][href^="${K}"],
      link[rel="preload"][href^="${K}"],
      script[src^="${K}"]`;if(document.querySelector(q))return W();L=document.createElement("link"),X&&(L.as=X),L.rel="prefetch",L.crossOrigin=process.env.__NEXT_CROSS_ORIGIN,L.onload=W,L.onerror=()=>$(h(new Error(`Failed to prefetch: ${K}`))),L.href=K,document.head.appendChild(L)})}T(S,"prefetchViaDom");function s(K,X){return new Promise((L,W)=>{X=document.createElement("script"),X.onload=L,X.onerror=()=>W(h(new Error(`Failed to load script: ${K}`))),X.crossOrigin=process.env.__NEXT_CROSS_ORIGIN,X.src=K,document.body.appendChild(X)})}T(s,"appendScript");function w(K,X,L){return new Promise((W,$)=>{let q=!1;K.then(ee=>{q=!0,W(ee)}).catch($),v.requestIdleCallback(()=>setTimeout(()=>{q||$(L)},X))})}T(w,"resolvePromiseWithTimeout");function _(){if(self.__BUILD_MANIFEST)return Promise.resolve(self.__BUILD_MANIFEST);const K=new Promise(X=>{const L=self.__BUILD_MANIFEST_CB;self.__BUILD_MANIFEST_CB=()=>{X(self.__BUILD_MANIFEST),L&&L()}});return w(K,r,h(new Error("Failed to load client build manifest")))}T(_,"getClientBuildManifest");function N(K,X){return _().then(L=>{if(!(X in L))throw h(new Error(`Failed to lookup route: ${X}`));const W=L[X].map($=>K+"/_next/"+encodeURI($));return{scripts:W.filter($=>$.endsWith(".js")).map($=>D.__unsafeCreateTrustedScriptURL($)),css:W.filter($=>$.endsWith(".css"))}})}T(N,"getFilesForRoute");function F(K){const X=new Map,L=new Map,W=new Map,$=new Map;function q(J){{let ae=L.get(J.toString());return ae||(document.querySelector(`script[src^="${J}"]`)?Promise.resolve():(L.set(J.toString(),ae=s(J)),ae))}}T(q,"maybeExecuteScript");function ee(J){let ae=W.get(J);return ae||(W.set(J,ae=fetch(J).then(ne=>{if(!ne.ok)throw new Error(`Failed to load stylesheet: ${J}`);return ne.text().then(fe=>({href:J,content:fe}))}).catch(ne=>{throw h(ne)})),ae)}return T(ee,"fetchStyleSheet"),{whenEntrypoint(J){return c(J,X)},onEntrypoint(J,ae){(ae?Promise.resolve().then(()=>ae()).then(ne=>({component:ne&&ne.default||ne,exports:ne}),ne=>({error:ne})):Promise.resolve(void 0)).then(ne=>{const fe=X.get(J);fe&&"resolve"in fe?ne&&(X.set(J,ne),fe.resolve(ne)):(ne?X.set(J,ne):X.delete(J),$.delete(J))})},loadRoute(J,ae){return c(J,$,()=>w(N(K,J).then(({scripts:ne,css:fe})=>Promise.all([X.has(J)?[]:Promise.all(ne.map(q)),Promise.all(fe.map(ee))])).then(ne=>this.whenEntrypoint(J).then(fe=>({entrypoint:fe,styles:ne[1]}))),r,h(new Error(`Route did not complete loading: ${J}`))).then(({entrypoint:ne,styles:fe})=>{const pe=Object.assign({styles:fe},ne);return"error"in ne?ne:pe}).catch(ne=>{if(ae)throw ne;return{error:ne}}).finally(()=>{}))},prefetch(J){let ae;return(ae=navigator.connection)&&(ae.saveData||/2g/.test(ae.effectiveType))?Promise.resolve():N(K,J).then(ne=>Promise.all(I?ne.scripts.map(fe=>S(fe.toString(),"script")):[])).then(()=>{v.requestIdleCallback(()=>this.loadRoute(J,!0).catch(()=>{}))}).catch(()=>{})}}}T(F,"createRouteLoader"),(typeof p.default=="function"||typeof p.default=="object"&&p.default!==null)&&typeof p.default.__esModule>"u"&&(Object.defineProperty(p.default,"__esModule",{value:!0}),Object.assign(p.default,p),R.exports=p.default)})(Zi,Zi.exports);var Hn={},xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.getObjectClassLabel=Ia;xi.isPlainObject=Qs;function Ia(R){return Object.prototype.toString.call(R)}T(Ia,"getObjectClassLabel");function Qs(R){if(Ia(R)!=="[object Object]")return!1;const p=Object.getPrototypeOf(R);return p===null||p.hasOwnProperty("isPrototypeOf")}T(Qs,"isPlainObject");Object.defineProperty(Hn,"__esModule",{value:!0});Hn.default=Ea;Hn.getProperError=eo;var Ys=xi;function Ea(R){return typeof R=="object"&&R!==null&&"name"in R&&"message"in R}T(Ea,"isError");function eo(R){return Ea(R)?R:new Error(Ys.isPlainObject(R)?JSON.stringify(R):R+"")}T(eo,"getProperError");var cr={},Ma={},dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.getSortedRoutes=to;class wi{insert(p){this._insert(p.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(p="/"){const m=[...this.children.keys()].sort();this.slugName!==null&&m.splice(m.indexOf("[]"),1),this.restSlugName!==null&&m.splice(m.indexOf("[...]"),1),this.optionalRestSlugName!==null&&m.splice(m.indexOf("[[...]]"),1);const D=m.map(v=>this.children.get(v)._smoosh(`${p}${v}/`)).reduce((v,r)=>[...v,...r],[]);if(this.slugName!==null&&D.push(...this.children.get("[]")._smoosh(`${p}[${this.slugName}]/`)),!this.placeholder){const v=p==="/"?"/":p.slice(0,-1);if(this.optionalRestSlugName!=null)throw new Error(`You cannot define a route with the same specificity as a optional catch-all route ("${v}" and "${v}[[...${this.optionalRestSlugName}]]").`);D.unshift(v)}return this.restSlugName!==null&&D.push(...this.children.get("[...]")._smoosh(`${p}[...${this.restSlugName}]/`)),this.optionalRestSlugName!==null&&D.push(...this.children.get("[[...]]")._smoosh(`${p}[[...${this.optionalRestSlugName}]]/`)),D}_insert(p,m,D){if(p.length===0){this.placeholder=!1;return}if(D)throw new Error("Catch-all must be the last part of the URL.");let v=p[0];if(v.startsWith("[")&&v.endsWith("]")){let g=function(h,O){if(h!==null&&h!==O)throw new Error(`You cannot use different slug names for the same dynamic path ('${h}' !== '${O}').`);m.forEach(x=>{if(x===O)throw new Error(`You cannot have the same slug name "${O}" repeat within a single dynamic path`);if(x.replace(/\W/g,"")===v.replace(/\W/g,""))throw new Error(`You cannot have the slug names "${x}" and "${O}" differ only by non-word symbols within a single dynamic path`)}),m.push(O)};T(g,"handleSlug");let r=v.slice(1,-1),c=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),c=!0),r.startsWith("...")&&(r=r.substring(3),D=!0),r.startsWith("[")||r.endsWith("]"))throw new Error(`Segment names may not start or end with extra brackets ('${r}').`);if(r.startsWith("."))throw new Error(`Segment names may not start with erroneous periods ('${r}').`);if(D)if(c){if(this.restSlugName!=null)throw new Error(`You cannot use both an required and optional catch-all route at the same level ("[...${this.restSlugName}]" and "${p[0]}" ).`);g(this.optionalRestSlugName,r),this.optionalRestSlugName=r,v="[[...]]"}else{if(this.optionalRestSlugName!=null)throw new Error(`You cannot use both an optional and required catch-all route at the same level ("[[...${this.optionalRestSlugName}]]" and "${p[0]}").`);g(this.restSlugName,r),this.restSlugName=r,v="[...]"}else{if(c)throw new Error(`Optional route parameters are not yet supported ("${p[0]}").`);g(this.slugName,r),this.slugName=r,v="[]"}}this.children.has(v)||this.children.set(v,new wi),this.children.get(v)._insert(p.slice(1),m,D)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}T(wi,"UrlNode");function to(R){const p=new wi;return R.forEach(m=>p.insert(m)),p.smoosh()}T(to,"getSortedRoutes");var Si={};Object.defineProperty(Si,"__esModule",{value:!0});Si.isDynamicRoute=io;const no=/\/\[[^/]+?\](?=\/|$)/;function io(R){return no.test(R)}T(io,"isDynamicRoute");(function(R){Object.defineProperty(R,"__esModule",{value:!0}),Object.defineProperty(R,"getSortedRoutes",{enumerable:!0,get:function(){return p.getSortedRoutes}}),Object.defineProperty(R,"isDynamicRoute",{enumerable:!0,get:function(){return m.isDynamicRoute}});var p=dr,m=Si})(Ma);var gr={};Object.defineProperty(gr,"__esModule",{value:!0});gr.normalizePathSep=ro;function ro(R){return R.replace(/\\/g,"/")}T(ro,"normalizePathSep");Object.defineProperty(cr,"__esModule",{value:!0});cr.denormalizePagePath=oo;var ao=Ma,so=gr;function oo(R){let p=so.normalizePathSep(R);return p.startsWith("/index/")&&!ao.isDynamicRoute(p)?p.slice(6):p!=="/index"?p:"/"}T(oo,"denormalizePagePath");var Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.normalizeLocalePath=uo;function uo(R,p){let m;const D=R.split("/");return(p||[]).some(v=>D[1]&&D[1].toLowerCase()===v.toLowerCase()?(m=v,D.splice(1,1),R=D.join("/")||"/",!0):!1),{pathname:R,detectedLocale:m}}T(uo,"normalizeLocalePath");var vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.default=lo;function lo(){const R=Object.create(null);return{on(p,m){(R[p]||(R[p]=[])).push(m)},off(p,m){R[p]&&R[p].splice(R[p].indexOf(m)>>>0,1)},emit(p,...m){(R[p]||[]).slice().map(D=>{D(...m)})}}}T(lo,"mitt");var Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.execOnce=co;Ye.getLocationOrigin=Oa;Ye.getURL=po;Ye.getDisplayName=Aa;Ye.isResSent=Ra;Ye.normalizeRepeatedSlashes=_o;Ye.loadGetInitialProps=La;Ye.ST=Ye.SP=Ye.isAbsoluteUrl=Ye.WEB_VITALS=void 0;var fo=fr.default;const ho=["CLS","FCP","FID","INP","LCP","TTFB"];Ye.WEB_VITALS=ho;function co(R){let p=!1,m;return(...D)=>(p||(p=!0,m=R(...D)),m)}T(co,"execOnce");const go=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,vo=T(R=>go.test(R),"isAbsoluteUrl");Ye.isAbsoluteUrl=vo;function Oa(){const{protocol:R,hostname:p,port:m}=window.location;return`${R}//${p}${m?":"+m:""}`}T(Oa,"getLocationOrigin");function po(){const{href:R}=window.location,p=Oa();return R.substring(p.length)}T(po,"getURL");function Aa(R){return typeof R=="string"?R:R.displayName||R.name||"Unknown"}T(Aa,"getDisplayName");function Ra(R){return R.finished||R.headersSent}T(Ra,"isResSent");function _o(R){const p=R.split("?");return p[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(p[1]?`?${p.slice(1).join("?")}`:"")}T(_o,"normalizeRepeatedSlashes");function La(R,p){return Ji.apply(this,arguments)}T(La,"loadGetInitialProps");function Ji(){return Ji=fo(function*(R,p){const m=p.res||p.ctx&&p.ctx.res;if(!R.getInitialProps)return p.ctx&&p.Component?{pageProps:yield La(p.Component,p.ctx)}:{};const D=yield R.getInitialProps(p);if(m&&Ra(m))return D;if(!D){const v=`"${Aa(R)}.getInitialProps()" should resolve to an object. But found "${D}" instead.`;throw new Error(v)}return D}),Ji.apply(this,arguments)}T(Ji,"_loadGetInitialProps");const ka=typeof performance<"u";Ye.SP=ka;const mo=ka&&["mark","measure","getEntriesByName"].every(R=>typeof performance[R]=="function");Ye.ST=mo;class Na extends Error{}T(Na,"DecodeError");Ye.DecodeError=Na;class Ba extends Error{}T(Ba,"NormalizeError");Ye.NormalizeError=Ba;class za extends Error{constructor(p){super(),this.code="ENOENT",this.message=`Cannot find module for page: ${p}`}}T(za,"PageNotFoundError");Ye.PageNotFoundError=za;class Da extends Error{constructor(p,m){super(),this.message=`Failed to load static file for page: ${p} ${m}`}}T(Da,"MissingStaticPage");Ye.MissingStaticPage=Da;class Fa extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}T(Fa,"MiddlewareNotFoundError");Ye.MiddlewareNotFoundError=Fa;var Vn={},an={};Object.defineProperty(an,"__esModule",{value:!0});an.searchParamsToUrlQuery=yo;an.urlQueryToSearchParams=xo;an.assign=wo;function yo(R){const p={};return R.forEach((m,D)=>{typeof p[D]>"u"?p[D]=m:Array.isArray(p[D])?p[D].push(m):p[D]=[p[D],m]}),p}T(yo,"searchParamsToUrlQuery");function na(R){return typeof R=="string"||typeof R=="number"&&!isNaN(R)||typeof R=="boolean"?String(R):""}T(na,"stringifyUrlQueryParam");function xo(R){const p=new URLSearchParams;return Object.entries(R).forEach(([m,D])=>{Array.isArray(D)?D.forEach(v=>p.append(m,na(v))):p.set(m,na(D))}),p}T(xo,"urlQueryToSearchParams");function wo(R,...p){return p.forEach(m=>{Array.from(m.keys()).forEach(D=>R.delete(D)),m.forEach((D,v)=>R.append(v,D))}),R}T(wo,"assign");Object.defineProperty(Vn,"__esModule",{value:!0});Vn.parseRelativeUrl=Po;var So=Ye,bo=an;function Po(R,p){const m=new URL(typeof window>"u"?"http://n":So.getLocationOrigin()),D=p?new URL(p,m):R.startsWith(".")?new URL(typeof window>"u"?"http://n":window.location.href):m,{pathname:v,searchParams:r,search:c,hash:g,href:h,origin:O}=new URL(R,D);if(O!==m.origin)throw new Error(`invariant: invalid relative URL, router received ${R}`);return{pathname:v,query:bo.searchParamsToUrlQuery(r),search:c,hash:g,href:h.slice(m.origin.length)}}T(Po,"parseRelativeUrl");var pr={},_r={},Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});function Co(R){for(var p=[],m=0;m<R.length;){var D=R[m];if(D==="*"||D==="+"||D==="?"){p.push({type:"MODIFIER",index:m,value:R[m++]});continue}if(D==="\\"){p.push({type:"ESCAPED_CHAR",index:m++,value:R[m++]});continue}if(D==="{"){p.push({type:"OPEN",index:m,value:R[m++]});continue}if(D==="}"){p.push({type:"CLOSE",index:m,value:R[m++]});continue}if(D===":"){for(var v="",r=m+1;r<R.length;){var c=R.charCodeAt(r);if(c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||c===95){v+=R[r++];continue}break}if(!v)throw new TypeError("Missing parameter name at "+m);p.push({type:"NAME",index:m,value:v}),m=r;continue}if(D==="("){var g=1,h="",r=m+1;if(R[r]==="?")throw new TypeError('Pattern cannot start with "?" at '+r);for(;r<R.length;){if(R[r]==="\\"){h+=R[r++]+R[r++];continue}if(R[r]===")"){if(g--,g===0){r++;break}}else if(R[r]==="("&&(g++,R[r+1]!=="?"))throw new TypeError("Capturing groups are not allowed at "+r);h+=R[r++]}if(g)throw new TypeError("Unbalanced pattern at "+m);if(!h)throw new TypeError("Missing pattern at "+m);p.push({type:"PATTERN",index:m,value:h}),m=r;continue}p.push({type:"CHAR",index:m,value:R[m++]})}return p.push({type:"END",index:m,value:""}),p}T(Co,"lexer");function mr(R,p){p===void 0&&(p={});for(var m=Co(R),D=p.prefixes,v=D===void 0?"./":D,r="[^"+Pn(p.delimiter||"/#?")+"]+?",c=[],g=0,h=0,O="",x=T(function($){if(h<m.length&&m[h].type===$)return m[h++].value},"tryConsume"),I=T(function($){var q=x($);if(q!==void 0)return q;var ee=m[h],J=ee.type,ae=ee.index;throw new TypeError("Unexpected "+J+" at "+ae+", expected "+$)},"mustConsume"),S=T(function(){for(var $="",q;q=x("CHAR")||x("ESCAPED_CHAR");)$+=q;return $},"consumeText");h<m.length;){var s=x("CHAR"),w=x("NAME"),_=x("PATTERN");if(w||_){var N=s||"";v.indexOf(N)===-1&&(O+=N,N=""),O&&(c.push(O),O=""),c.push({name:w||g++,prefix:N,suffix:"",pattern:_||r,modifier:x("MODIFIER")||""});continue}var F=s||x("ESCAPED_CHAR");if(F){O+=F;continue}O&&(c.push(O),O="");var K=x("OPEN");if(K){var N=S(),X=x("NAME")||"",L=x("PATTERN")||"",W=S();I("CLOSE"),c.push({name:X||(L?g++:""),pattern:X&&!L?r:L,prefix:N,suffix:W,modifier:x("MODIFIER")||""});continue}I("END")}return c}T(mr,"parse");Dt.parse=mr;function To(R,p){return Ha(mr(R,p),p)}T(To,"compile");Dt.compile=To;function Ha(R,p){p===void 0&&(p={});var m=yr(p),D=p.encode,v=D===void 0?function(h){return h}:D,r=p.validate,c=r===void 0?!0:r,g=R.map(function(h){if(typeof h=="object")return new RegExp("^(?:"+h.pattern+")$",m)});return function(h){for(var O="",x=0;x<R.length;x++){var I=R[x];if(typeof I=="string"){O+=I;continue}var S=h?h[I.name]:void 0,s=I.modifier==="?"||I.modifier==="*",w=I.modifier==="*"||I.modifier==="+";if(Array.isArray(S)){if(!w)throw new TypeError('Expected "'+I.name+'" to not repeat, but got an array');if(S.length===0){if(s)continue;throw new TypeError('Expected "'+I.name+'" to not be empty')}for(var _=0;_<S.length;_++){var N=v(S[_],I);if(c&&!g[x].test(N))throw new TypeError('Expected all "'+I.name+'" to match "'+I.pattern+'", but got "'+N+'"');O+=I.prefix+N+I.suffix}continue}if(typeof S=="string"||typeof S=="number"){var N=v(String(S),I);if(c&&!g[x].test(N))throw new TypeError('Expected "'+I.name+'" to match "'+I.pattern+'", but got "'+N+'"');O+=I.prefix+N+I.suffix;continue}if(!s){var F=w?"an array":"a string";throw new TypeError('Expected "'+I.name+'" to be '+F)}}return O}}T(Ha,"tokensToFunction");Dt.tokensToFunction=Ha;function Io(R,p){var m=[],D=xr(R,m,p);return Ua(D,m,p)}T(Io,"match");Dt.match=Io;function Ua(R,p,m){m===void 0&&(m={});var D=m.decode,v=D===void 0?function(r){return r}:D;return function(r){var c=R.exec(r);if(!c)return!1;for(var g=c[0],h=c.index,O=Object.create(null),x=T(function(S){if(c[S]===void 0)return"continue";var s=p[S-1];s.modifier==="*"||s.modifier==="+"?O[s.name]=c[S].split(s.prefix+s.suffix).map(function(w){return v(w,s)}):O[s.name]=v(c[S],s)},"_loop_1"),I=1;I<c.length;I++)x(I);return{path:g,index:h,params:O}}}T(Ua,"regexpToFunction");Dt.regexpToFunction=Ua;function Pn(R){return R.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}T(Pn,"escapeString");function yr(R){return R&&R.sensitive?"":"i"}T(yr,"flags");function Eo(R,p){if(!p)return R;var m=R.source.match(/\((?!\?)/g);if(m)for(var D=0;D<m.length;D++)p.push({name:D,prefix:"",suffix:"",modifier:"",pattern:""});return R}T(Eo,"regexpToRegexp");function Mo(R,p,m){var D=R.map(function(v){return xr(v,p,m).source});return new RegExp("(?:"+D.join("|")+")",yr(m))}T(Mo,"arrayToRegexp");function Oo(R,p,m){return Va(mr(R,m),p,m)}T(Oo,"stringToRegexp");function Va(R,p,m){m===void 0&&(m={});for(var D=m.strict,v=D===void 0?!1:D,r=m.start,c=r===void 0?!0:r,g=m.end,h=g===void 0?!0:g,O=m.encode,x=O===void 0?function($){return $}:O,I="["+Pn(m.endsWith||"")+"]|$",S="["+Pn(m.delimiter||"/#?")+"]",s=c?"^":"",w=0,_=R;w<_.length;w++){var N=_[w];if(typeof N=="string")s+=Pn(x(N));else{var F=Pn(x(N.prefix)),K=Pn(x(N.suffix));if(N.pattern)if(p&&p.push(N),F||K)if(N.modifier==="+"||N.modifier==="*"){var X=N.modifier==="*"?"?":"";s+="(?:"+F+"((?:"+N.pattern+")(?:"+K+F+"(?:"+N.pattern+"))*)"+K+")"+X}else s+="(?:"+F+"("+N.pattern+")"+K+")"+N.modifier;else s+="("+N.pattern+")"+N.modifier;else s+="(?:"+F+K+")"+N.modifier}}if(h)v||(s+=S+"?"),s+=m.endsWith?"(?="+I+")":"$";else{var L=R[R.length-1],W=typeof L=="string"?S.indexOf(L[L.length-1])>-1:L===void 0;v||(s+="(?:"+S+"(?="+I+"))?"),W||(s+="(?="+S+"|"+I+")")}return new RegExp(s,yr(m))}T(Va,"tokensToRegexp");Dt.tokensToRegexp=Va;function xr(R,p,m){return R instanceof RegExp?Eo(R,p):Array.isArray(R)?Mo(R,p,m):Oo(R,p,m)}T(xr,"pathToRegexp");Dt.pathToRegexp=xr;Object.defineProperty(_r,"__esModule",{value:!0});_r.getPathMatch=Ro;var Ao=yi.default,ia=Dt;function Ro(R,p){const m=[],D=ia.pathToRegexp(R,m,{delimiter:"/",sensitive:!1,strict:p==null?void 0:p.strict}),v=ia.regexpToFunction(p!=null&&p.regexModifier?new RegExp(p.regexModifier(D.source),D.flags):D,m);return(r,c)=>{const g=r==null?!1:v(r);if(!g)return!1;if(p!=null&&p.removeUnnamedParams)for(const h of m)typeof h.name=="number"&&delete g.params[h.name];return Ao({},c,g.params)}}T(Ro,"getPathMatch");var jn={},bi={};Object.defineProperty(bi,"__esModule",{value:!0});bi.escapeStringRegexp=No;const Lo=/[|\\{}()[\]^$+*?.-]/,ko=/[|\\{}()[\]^$+*?.-]/g;function No(R){return Lo.test(R)?R.replace(ko,"\\$&"):R}T(No,"escapeStringRegexp");var wr={};Object.defineProperty(wr,"__esModule",{value:!0});wr.parseUrl=Do;var Bo=an,zo=Vn;function Do(R){if(R.startsWith("/"))return zo.parseRelativeUrl(R);const p=new URL(R);return{hash:p.hash,hostname:p.hostname,href:p.href,pathname:p.pathname,port:p.port,protocol:p.protocol,query:Bo.searchParamsToUrlQuery(p.searchParams),search:p.search}}T(Do,"parseUrl");Object.defineProperty(jn,"__esModule",{value:!0});jn.matchHas=jo;jn.compileNonPath=Qi;jn.prepareDestination=$o;var ra=yi.default,Bn=Dt,Fo=bi,Ho=wr;function Uo(R){let p="";for(let m=0;m<R.length;m++){const D=R.charCodeAt(m);(D>64&&D<91||D>96&&D<123)&&(p+=R[m])}return p}T(Uo,"getSafeParamName");function Vo(R,p){return R.replace(new RegExp(`:${Fo.escapeStringRegexp(p)}`,"g"),`__ESC_COLON_${p}`)}T(Vo,"escapeSegment");function ui(R){return R.replace(/__ESC_COLON_/gi,":")}T(ui,"unescapeSegments");function jo(R,p,m=[],D=[]){const v={},r=T(g=>{let h,O=g.key;switch(g.type){case"header":{O=O.toLowerCase(),h=R.headers[O];break}case"cookie":{h=R.cookies[g.key];break}case"query":{h=p[O];break}case"host":{const{host:x}=(R==null?void 0:R.headers)||{};h=x==null?void 0:x.split(":")[0].toLowerCase();break}}if(!g.value&&h)return v[Uo(O)]=h,!0;if(h){const x=new RegExp(`^${g.value}$`),I=Array.isArray(h)?h.slice(-1)[0].match(x):h.match(x);if(I)return Array.isArray(I)&&(I.groups?Object.keys(I.groups).forEach(S=>{v[S]=I.groups[S]}):g.type==="host"&&I[0]&&(v.host=I[0])),!0}return!1},"hasMatch");return m.every(g=>r(g))&&!D.some(g=>r(g))?v:!1}T(jo,"matchHas");function Qi(R,p){if(!R.includes(":"))return R;for(const m of Object.keys(p))R.includes(`:${m}`)&&(R=R.replace(new RegExp(`:${m}\\*`,"g"),`:${m}--ESCAPED_PARAM_ASTERISKS`).replace(new RegExp(`:${m}\\?`,"g"),`:${m}--ESCAPED_PARAM_QUESTION`).replace(new RegExp(`:${m}\\+`,"g"),`:${m}--ESCAPED_PARAM_PLUS`).replace(new RegExp(`:${m}(?!\\w)`,"g"),`--ESCAPED_PARAM_COLON${m}`));return R=R.replace(/(:|\*|\?|\+|\(|\)|\{|\})/g,"\\$1").replace(/--ESCAPED_PARAM_PLUS/g,"+").replace(/--ESCAPED_PARAM_COLON/g,":").replace(/--ESCAPED_PARAM_QUESTION/g,"?").replace(/--ESCAPED_PARAM_ASTERISKS/g,"*"),Bn.compile(`/${R}`,{validate:!1})(p).slice(1)}T(Qi,"compileNonPath");function $o(R){const p=Object.assign({},R.query);delete p.__nextLocale,delete p.__nextDefaultLocale,delete p.__nextDataReq;let m=R.destination;for(const w of Object.keys(ra({},R.params,p)))m=Vo(m,w);const D=Ho.parseUrl(m),v=D.query,r=ui(`${D.pathname}${D.hash||""}`),c=ui(D.hostname||""),g=[],h=[];Bn.pathToRegexp(r,g),Bn.pathToRegexp(c,h);const O=[];g.forEach(w=>O.push(w.name)),h.forEach(w=>O.push(w.name));const x=Bn.compile(r,{validate:!1}),I=Bn.compile(c,{validate:!1});for(const[w,_]of Object.entries(v))Array.isArray(_)?v[w]=_.map(N=>Qi(ui(N),R.params)):typeof _=="string"&&(v[w]=Qi(ui(_),R.params));let S=Object.keys(R.params).filter(w=>w!=="nextInternalLocale");if(R.appendParamsToQuery&&!S.some(w=>O.includes(w)))for(const w of S)w in v||(v[w]=R.params[w]);let s;try{s=x(R.params);const[w,_]=s.split("#");D.hostname=I(R.params),D.pathname=w,D.hash=`${_?"#":""}${_||""}`,delete D.search}catch(w){throw w.message.match(/Expected .*? to not repeat, but got an array/)?new Error("To use a multi-match in the destination you must add `*` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match"):w}return D.query=ra({},p,D.query),{newUrl:s,destQuery:v,parsedDestination:D}}T($o,"prepareDestination");var vi={exports:{}},pi={exports:{}},Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.pathHasPrefix=qo;var Wo=rn;function qo(R,p){if(typeof R!="string")return!1;const{pathname:m}=Wo.parsePath(R);return m===p||m.startsWith(p+"/")}T(qo,"pathHasPrefix");(function(R,p){Object.defineProperty(p,"__esModule",{value:!0}),p.hasBasePath=v;var m=Mn;const D=process.env.__NEXT_ROUTER_BASEPATH||"";function v(r){return m.pathHasPrefix(r,D)}T(v,"hasBasePath"),(typeof p.default=="function"||typeof p.default=="object"&&p.default!==null)&&typeof p.default.__esModule>"u"&&(Object.defineProperty(p.default,"__esModule",{value:!0}),Object.assign(p.default,p),R.exports=p.default)})(pi,pi.exports);(function(R,p){Object.defineProperty(p,"__esModule",{value:!0}),p.removeBasePath=v;var m=pi.exports;const D=process.env.__NEXT_ROUTER_BASEPATH||"";function v(r){return process.env.__NEXT_MANUAL_CLIENT_BASE_PATH&&!m.hasBasePath(r)||(r=r.slice(D.length),r.startsWith("/")||(r=`/${r}`)),r}T(v,"removeBasePath"),(typeof p.default=="function"||typeof p.default=="object"&&p.default!==null)&&typeof p.default.__esModule>"u"&&(Object.defineProperty(p.default,"__esModule",{value:!0}),Object.assign(p.default,p),R.exports=p.default)})(vi,vi.exports);Object.defineProperty(pr,"__esModule",{value:!0});pr.default=Zo;var Go=_r,aa=jn,sa=gn,oa=Un,ua=vi.exports,Xo=Vn;function Zo(R,p,m,D,v,r){let c=!1,g=!1,h=Xo.parseRelativeUrl(R),O=sa.removeTrailingSlash(oa.normalizeLocalePath(ua.removeBasePath(h.pathname),r).pathname),x;const I=T(s=>{let _=Go.getPathMatch(s.source+(process.env.__NEXT_TRAILING_SLASH?"(/)?":""),{removeUnnamedParams:!0,strict:!0})(h.pathname);if((s.has||s.missing)&&_){const N=aa.matchHas({headers:{host:document.location.hostname},cookies:document.cookie.split("; ").reduce((F,K)=>{const[X,...L]=K.split("=");return F[X]=L.join("="),F},{})},h.query,s.has,s.missing);N?Object.assign(_,N):_=!1}if(_){if(!s.destination)return g=!0,!0;const N=aa.prepareDestination({appendParamsToQuery:!0,destination:s.destination,params:_,query:D});if(h=N.parsedDestination,R=N.newUrl,Object.assign(D,N.parsedDestination.query),O=sa.removeTrailingSlash(oa.normalizeLocalePath(ua.removeBasePath(R),r).pathname),p.includes(O))return c=!0,x=O,!0;if(x=v(O),x!==R&&p.includes(x))return c=!0,!0}},"handleRewrite");let S=!1;for(let s=0;s<m.beforeFiles.length;s++)I(m.beforeFiles[s]);if(c=p.includes(O),!c){if(!S){for(let s=0;s<m.afterFiles.length;s++)if(I(m.afterFiles[s])){S=!0;break}}if(S||(x=v(O),c=p.includes(x),S=c),!S){for(let s=0;s<m.fallback.length;s++)if(I(m.fallback[s])){S=!0;break}}}return{asPath:R,parsedAs:h,matchedPage:c,resolvedHref:x,externalDest:g}}T(Zo,"resolveRewrites");var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.getRouteMatcher=Jo;var Ko=Ye;function Jo({re:R,groups:p}){return m=>{const D=R.exec(m);if(!D)return!1;const v=T(c=>{try{return decodeURIComponent(c)}catch{throw new Ko.DecodeError("failed to decode param")}},"decode"),r={};return Object.keys(p).forEach(c=>{const g=p[c],h=D[g.pos];h!==void 0&&(r[c]=~h.indexOf("/")?h.split("/").map(O=>v(O)):g.repeat?[v(h)]:v(h))}),r}}T(Jo,"getRouteMatcher");var $n={};Object.defineProperty($n,"__esModule",{value:!0});$n.getRouteRegex=Ga;$n.getNamedRouteRegex=eu;$n.getNamedMiddlewareRegex=tu;var Qo=yi.default,ja=bi,$a=gn;function Wa(R){const p=R.startsWith("[")&&R.endsWith("]");p&&(R=R.slice(1,-1));const m=R.startsWith("...");return m&&(R=R.slice(3)),{key:R,repeat:m,optional:p}}T(Wa,"parseParameter");function qa(R){const p=$a.removeTrailingSlash(R).slice(1).split("/"),m={};let D=1;return{parameterizedRoute:p.map(v=>{if(v.startsWith("[")&&v.endsWith("]")){const{key:r,optional:c,repeat:g}=Wa(v.slice(1,-1));return m[r]={pos:D++,repeat:g,optional:c},g?c?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}else return`/${ja.escapeStringRegexp(v)}`}).join(""),groups:m}}T(qa,"getParametrizedRoute");function Ga(R){const{parameterizedRoute:p,groups:m}=qa(R);return{re:new RegExp(`^${p}(?:/)?$`),groups:m}}T(Ga,"getRouteRegex");function Yo(){let R=97,p=1;return()=>{let m="";for(let D=0;D<p;D++)m+=String.fromCharCode(R),R++,R>122&&(p++,R=97);return m}}T(Yo,"buildGetSafeRouteKey");function Xa(R){const p=$a.removeTrailingSlash(R).slice(1).split("/"),m=Yo(),D={};return{namedParameterizedRoute:p.map(v=>{if(v.startsWith("[")&&v.endsWith("]")){const{key:r,optional:c,repeat:g}=Wa(v.slice(1,-1));let h=r.replace(/\W/g,""),O=!1;return(h.length===0||h.length>30)&&(O=!0),isNaN(parseInt(h.slice(0,1)))||(O=!0),O&&(h=m()),D[h]=r,g?c?`(?:/(?<${h}>.+?))?`:`/(?<${h}>.+?)`:`/(?<${h}>[^/]+?)`}else return`/${ja.escapeStringRegexp(v)}`}).join(""),routeKeys:D}}T(Xa,"getNamedParametrizedRoute");function eu(R){const p=Xa(R);return Qo({},Ga(R),{namedRegex:`^${p.namedParameterizedRoute}(?:/)?$`,routeKeys:p.routeKeys})}T(eu,"getNamedRouteRegex");function tu(R,p){const{parameterizedRoute:m}=qa(R),{catchAll:D=!0}=p;if(m==="/")return{namedRegex:`^/${D?".*":""}$`};const{namedParameterizedRoute:v}=Xa(R);return{namedRegex:`^${v}${D?"(?:(/.*)?)":""}$`}}T(tu,"getNamedMiddlewareRegex");var On={};Object.defineProperty(On,"__esModule",{value:!0});On.formatUrl=Za;On.formatWithValidation=su;On.urlObjectKeys=void 0;var nu=Ca.default,iu=nu(an);const ru=/https?|ftp|gopher|file/;function Za(R){let{auth:p,hostname:m}=R,D=R.protocol||"",v=R.pathname||"",r=R.hash||"",c=R.query||"",g=!1;p=p?encodeURIComponent(p).replace(/%3A/i,":")+"@":"",R.host?g=p+R.host:m&&(g=p+(~m.indexOf(":")?`[${m}]`:m),R.port&&(g+=":"+R.port)),c&&typeof c=="object"&&(c=String(iu.urlQueryToSearchParams(c)));let h=R.search||c&&`?${c}`||"";return D&&!D.endsWith(":")&&(D+=":"),R.slashes||(!D||ru.test(D))&&g!==!1?(g="//"+(g||""),v&&v[0]!=="/"&&(v="/"+v)):g||(g=""),r&&r[0]!=="#"&&(r="#"+r),h&&h[0]!=="?"&&(h="?"+h),v=v.replace(/[?#]/g,encodeURIComponent),h=h.replace("#","%23"),`${D}${g}${v}${h}${r}`}T(Za,"formatUrl");const au=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];On.urlObjectKeys=au;function su(R){return Za(R)}T(su,"formatWithValidation");var Yi={exports:{}},li={},la;function ou(){if(la)return li;la=1,Object.defineProperty(li,"__esModule",{value:!0}),li.detectDomainLocale=R;function R(p,m,D){let v;if(p){D&&(D=D.toLowerCase());for(const g of p){var r,c;const h=(r=g.domain)==null?void 0:r.split(":")[0].toLowerCase();if(m===h||D===g.defaultLocale.toLowerCase()||((c=g.locales)==null?void 0:c.some(O=>O.toLowerCase()===D))){v=g;break}}}return v}return T(R,"detectDomainLocale$1"),li}T(ou,"requireDetectDomainLocale");(function(R,p){Object.defineProperty(p,"__esModule",{value:!0}),p.detectDomainLocale=void 0;const m=T((...D)=>{if(process.env.__NEXT_I18N_SUPPORT)return ou().detectDomainLocale(...D)},"detectDomainLocale");p.detectDomainLocale=m,(typeof p.default=="function"||typeof p.default=="object"&&p.default!==null)&&typeof p.default.__esModule>"u"&&(Object.defineProperty(p.default,"__esModule",{value:!0}),Object.assign(p.default,p),R.exports=p.default)})(Yi,Yi.exports);var er={exports:{}},Pi={},Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.addPathPrefix=lu;var uu=rn;function lu(R,p){if(!R.startsWith("/")||!p)return R;const{pathname:m,query:D,hash:v}=uu.parsePath(R);return`${p}${m}${D}${v}`}T(lu,"addPathPrefix");Object.defineProperty(Pi,"__esModule",{value:!0});Pi.addLocale=hu;var fu=Wn,fa=Mn;function hu(R,p,m,D){return p&&p!==m&&(D||!fa.pathHasPrefix(R.toLowerCase(),`/${p.toLowerCase()}`)&&!fa.pathHasPrefix(R.toLowerCase(),"/api"))?fu.addPathPrefix(R,`/${p}`):R}T(hu,"addLocale");(function(R,p){Object.defineProperty(p,"__esModule",{value:!0}),p.addLocale=void 0;var m=Dn.exports;const D=T((v,...r)=>process.env.__NEXT_I18N_SUPPORT?m.normalizePathTrailingSlash(Pi.addLocale(v,...r)):v,"addLocale");p.addLocale=D,(typeof p.default=="function"||typeof p.default=="object"&&p.default!==null)&&typeof p.default.__esModule>"u"&&(Object.defineProperty(p.default,"__esModule",{value:!0}),Object.assign(p.default,p),R.exports=p.default)})(er,er.exports);var tr={exports:{}};(function(R,p){Object.defineProperty(p,"__esModule",{value:!0}),p.removeLocale=D;var m=rn;function D(v,r){if(process.env.__NEXT_I18N_SUPPORT){const{pathname:c}=m.parsePath(v),g=c.toLowerCase(),h=r==null?void 0:r.toLowerCase();return r&&(g.startsWith(`/${h}/`)||g===`/${h}`)?`${c.length===r.length+1?"/":""}${v.slice(r.length+1)}`:v}return v}T(D,"removeLocale"),(typeof p.default=="function"||typeof p.default=="object"&&p.default!==null)&&typeof p.default.__esModule>"u"&&(Object.defineProperty(p.default,"__esModule",{value:!0}),Object.assign(p.default,p),R.exports=p.default)})(tr,tr.exports);var nr={exports:{}};(function(R,p){Object.defineProperty(p,"__esModule",{value:!0}),p.addBasePath=r;var m=Wn,D=Dn.exports;const v=process.env.__NEXT_ROUTER_BASEPATH||"";function r(c,g){return process.env.__NEXT_MANUAL_CLIENT_BASE_PATH&&!g?c:D.normalizePathTrailingSlash(m.addPathPrefix(c,v))}T(r,"addBasePath"),(typeof p.default=="function"||typeof p.default=="object"&&p.default!==null)&&typeof p.default.__esModule>"u"&&(Object.defineProperty(p.default,"__esModule",{value:!0}),Object.assign(p.default,p),R.exports=p.default)})(nr,nr.exports);var br={},Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.removePathPrefix=du;var cu=Mn;function du(R,p){if(cu.pathHasPrefix(R,p)){const m=R.slice(p.length);return m.startsWith("/")?m:`/${m}`}return R}T(du,"removePathPrefix");Object.defineProperty(br,"__esModule",{value:!0});br.getNextPathnameInfo=_u;var gu=Un,vu=Pr,pu=Mn;function _u(R,p){var m;const{basePath:D,i18n:v,trailingSlash:r}=(m=p.nextConfig)!=null?m:{},c={pathname:R,trailingSlash:R!=="/"?R.endsWith("/"):r};if(D&&pu.pathHasPrefix(c.pathname,D)&&(c.pathname=vu.removePathPrefix(c.pathname,D),c.basePath=D),p.parseData===!0&&c.pathname.startsWith("/_next/data/")&&c.pathname.endsWith(".json")){const g=c.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),h=g[0];c.pathname=g[1]!=="index"?`/${g.slice(1).join("/")}`:"/",c.buildId=h}if(v){const g=gu.normalizeLocalePath(c.pathname,v.locales);c.locale=g==null?void 0:g.detectedLocale,c.pathname=(g==null?void 0:g.pathname)||c.pathname}return c}T(_u,"getNextPathnameInfo");var Cr={},Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.addPathSuffix=yu;var mu=rn;function yu(R,p){if(!R.startsWith("/")||!p)return R;const{pathname:m,query:D,hash:v}=mu.parsePath(R);return`${m}${p}${D}${v}`}T(yu,"addPathSuffix");Object.defineProperty(Cr,"__esModule",{value:!0});Cr.formatNextPathnameInfo=wu;var ha=gn,ca=Wn,da=Tr,xu=Pi;function wu(R){let p=xu.addLocale(R.pathname,R.locale,R.buildId?void 0:R.defaultLocale,R.ignorePrefix);return(R.buildId||!R.trailingSlash)&&(p=ha.removeTrailingSlash(p)),R.buildId&&(p=da.addPathSuffix(ca.addPathPrefix(p,`/_next/data/${R.buildId}`),R.pathname==="/"?"index.json":".json")),p=ca.addPathPrefix(p,R.basePath),!R.buildId&&R.trailingSlash?p.endsWith("/")?p:da.addPathSuffix(p,"/"):ha.removeTrailingSlash(p)}T(wu,"formatNextPathnameInfo");var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.compareRouterStates=Su;function Su(R,p){const m=Object.keys(R);if(m.length!==Object.keys(p).length)return!1;for(let D=m.length;D--;){const v=m[D];if(v==="query"){const r=Object.keys(R.query);if(r.length!==Object.keys(p.query).length)return!1;for(let c=r.length;c--;){const g=r[c];if(!p.query.hasOwnProperty(g)||R.query[g]!==p.query[g])return!1}}else if(!p.hasOwnProperty(v)||R[v]!==p[v])return!1}return!0}T(Su,"compareRouterStates");var Er={};Object.defineProperty(Er,"__esModule",{value:!0});Er.isBot=bu;function bu(R){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(R)}T(bu,"isBot");Object.defineProperty(jt,"__esModule",{value:!0});jt.matchesMiddleware=zn;jt.isLocalURL=_i;jt.interpolateAs=Mr;jt.resolveHref=ar;jt.createKey=sr;jt.default=void 0;var cn=fr.default,Qt=yi.default,Ka=Fn.default,Pu=Ca.default,Cu=Dn.exports,Ut=gn,In=Zi.exports,Tu=Hs.exports,fi=Pu(Hn),Iu=cr,Yt=Un,Eu=Ka(vr),zt=Ye,Vt=Si,Bt=Vn,Mu=an,ir=Ka(pr),Cn=Sr,dn=$n,_t=On,ga=Yi.exports,En=rn,tn=er.exports,ji=tr.exports,wt=vi.exports,gt=nr.exports,en=pi.exports,hi=br,va=Cr,Ou=Ir,Au=Er;function pa(){return Object.assign(new Error("Route Cancelled"),{cancelled:!0})}T(pa,"buildCancellationError");function zn(R){return rr.apply(this,arguments)}T(zn,"matchesMiddleware");function rr(){return rr=cn(function*(R){const p=yield Promise.resolve(R.router.pageLoader.getMiddleware());if(!p)return!1;const{pathname:m}=En.parsePath(R.asPath),D=en.hasBasePath(m)?wt.removeBasePath(m):m,v=gt.addBasePath(tn.addLocale(D,R.locale));return p.some(r=>new RegExp(r.regexp).test(v))}),rr.apply(this,arguments)}T(rr,"_matchesMiddleware");function $i(R){const p=zt.getLocationOrigin();return R.startsWith(p)?R.substring(p.length):R}T($i,"stripOrigin");function Ja(R,p){const m={};return Object.keys(R).forEach(D=>{p.includes(D)||(m[D]=R[D])}),m}T(Ja,"omit");function _i(R){if(!zt.isAbsoluteUrl(R))return!0;try{const p=zt.getLocationOrigin(),m=new URL(R,p);return m.origin===p&&en.hasBasePath(m.pathname)}catch{return!1}}T(_i,"isLocalURL");function Mr(R,p,m){let D="";const v=dn.getRouteRegex(R),r=v.groups,c=(p!==R?Cn.getRouteMatcher(v)(p):"")||m;D=R;const g=Object.keys(r);return g.every(h=>{let O=c[h]||"";const{repeat:x,optional:I}=r[h];let S=`[${x?"...":""}${h}]`;return I&&(S=`${O?"":"/"}[${S}]`),x&&!Array.isArray(O)&&(O=[O]),(I||h in c)&&(D=D.replace(S,x?O.map(s=>encodeURIComponent(s)).join("/"):encodeURIComponent(O))||"/")})||(D=""),{params:g,result:D}}T(Mr,"interpolateAs");function ar(R,p,m){let D,v=typeof p=="string"?p:_t.formatWithValidation(p);const r=v.match(/^[a-zA-Z]{1,}:\/\//),c=r?v.slice(r[0].length):v;if((c.split("?")[0]||"").match(/(\/\/|\\)/)){console.error(`Invalid href passed to next/router: ${v}, repeated forward-slashes (//) or backslashes \\ are not valid in the href`);const h=zt.normalizeRepeatedSlashes(c);v=(r?r[0]:"")+h}if(!_i(v))return m?[v]:v;try{D=new URL(v.startsWith("#")?R.asPath:R.pathname,"http://n")}catch{D=new URL("/","http://n")}try{const h=new URL(v,D);h.pathname=Cu.normalizePathTrailingSlash(h.pathname);let O="";if(Vt.isDynamicRoute(h.pathname)&&h.searchParams&&m){const I=Mu.searchParamsToUrlQuery(h.searchParams),{result:S,params:s}=Mr(h.pathname,h.pathname,I);S&&(O=_t.formatWithValidation({pathname:S,hash:h.hash,query:Ja(I,s)}))}const x=h.origin===D.origin?h.href.slice(h.origin.length):h.href;return m?[x,O||x]:x}catch{return m?[v]:v}}T(ar,"resolveHref");function Wi(R,p,m){let[D,v]=ar(R,p,!0);const r=zt.getLocationOrigin(),c=D.startsWith(r),g=v&&v.startsWith(r);D=$i(D),v=v&&$i(v);const h=c?D:gt.addBasePath(D),O=m?$i(ar(R,m)):v||D;return{url:h,as:g?O:gt.addBasePath(O)}}T(Wi,"prepareUrlAs");function nn(R,p){const m=Ut.removeTrailingSlash(Iu.denormalizePagePath(R));return m==="/404"||m==="/_error"?R:(p.includes(m)||p.some(D=>{if(Vt.isDynamicRoute(D)&&dn.getRouteRegex(D).re.test(m))return R=D,!0}),Ut.removeTrailingSlash(R))}T(nn,"resolveDynamicRoute");function Ru(R,p,m){const D={basePath:m.router.basePath,i18n:{locales:m.router.locales},trailingSlash:Boolean(process.env.__NEXT_TRAILING_SLASH)},v=p.headers.get("x-nextjs-rewrite");let r=v||p.headers.get("x-nextjs-matched-path");const c=p.headers.get("x-matched-path");if(c&&!r&&!c.includes("__next_data_catchall")&&!c.includes("/_error")&&!c.includes("/404")&&(r=c),r){if(r.startsWith("/")){const x=Bt.parseRelativeUrl(r),I=hi.getNextPathnameInfo(x.pathname,{nextConfig:D,parseData:!0});let S=Ut.removeTrailingSlash(I.pathname);return Promise.all([m.router.pageLoader.getPageList(),In.getClientBuildManifest()]).then(([s,{__rewrites:w}])=>{let _=tn.addLocale(I.pathname,I.locale);if(Vt.isDynamicRoute(_)||!v&&s.includes(Yt.normalizeLocalePath(wt.removeBasePath(_),m.router.locales).pathname)){const F=hi.getNextPathnameInfo(Bt.parseRelativeUrl(R).pathname,{parseData:!0});_=gt.addBasePath(F.pathname),x.pathname=_}if(process.env.__NEXT_HAS_REWRITES){const F=ir.default(_,s,w,x.query,K=>nn(K,s),m.router.locales);F.matchedPage&&(x.pathname=F.parsedAs.pathname,_=x.pathname,Object.assign(x.query,F.parsedAs.query))}else if(!s.includes(S)){const F=nn(S,s);F!==S&&(S=F)}const N=s.includes(S)?S:nn(Yt.normalizeLocalePath(wt.removeBasePath(x.pathname),m.router.locales).pathname,s);if(Vt.isDynamicRoute(N)){const F=Cn.getRouteMatcher(dn.getRouteRegex(N))(_);Object.assign(x.query,F||{})}return{type:"rewrite",parsedAs:x,resolvedHref:N}})}const h=En.parsePath(R),O=va.formatNextPathnameInfo(Qt({},hi.getNextPathnameInfo(h.pathname,{nextConfig:D,parseData:!0}),{defaultLocale:m.router.defaultLocale,buildId:""}));return Promise.resolve({type:"redirect-external",destination:`${O}${h.query}${h.hash}`})}const g=p.headers.get("x-nextjs-redirect");if(g){if(g.startsWith("/")){const h=En.parsePath(g),O=va.formatNextPathnameInfo(Qt({},hi.getNextPathnameInfo(h.pathname,{nextConfig:D,parseData:!0}),{defaultLocale:m.router.defaultLocale,buildId:""}));return Promise.resolve({type:"redirect-internal",newAs:`${O}${h.query}${h.hash}`,newUrl:`${O}${h.query}${h.hash}`})}return Promise.resolve({type:"redirect-external",destination:g})}return Promise.resolve({type:"next"})}T(Ru,"getMiddlewareData");function _a(R){return zn(R).then(p=>p&&R.fetchData?R.fetchData().then(m=>Ru(m.dataHref,m.response,R).then(D=>({dataHref:m.dataHref,cacheKey:m.cacheKey,json:m.json,response:m.response,text:m.text,effect:D}))).catch(m=>null):null)}T(_a,"withMiddlewareEffects");const qi=process.env.__NEXT_SCROLL_RESTORATION&&typeof window<"u"&&"scrollRestoration"in window.history&&!!function(){try{let R="__next";return sessionStorage.setItem(R,R),sessionStorage.removeItem(R),!0}catch{}}(),Qa=Symbol("SSG_DATA_NOT_FOUND");function Ya(R,p,m){return fetch(R,{credentials:"same-origin",method:m.method||"GET",headers:Object.assign({},m.headers,{"x-nextjs-data":"1"})}).then(D=>!D.ok&&p>1&&D.status>=500?Ya(R,p-1,m):D)}T(Ya,"fetchRetry");function Gi(R){const p=document.documentElement,m=p.style.scrollBehavior;p.style.scrollBehavior="auto",R(),p.style.scrollBehavior=m}T(Gi,"handleSmoothScroll");function ma(R){try{return JSON.parse(R)}catch{return null}}T(ma,"tryToParseAsJSON");function Sn({dataHref:R,inflightCache:p,isPrefetch:m,hasMiddleware:D,isServerRender:v,parseJSON:r,persistCache:c,isBackground:g,unstable_skipClientCache:h}){const{href:O}=new URL(R,window.location.href);var x;const I=T(S=>Ya(R,v?3:1,{headers:Object.assign({},m?{purpose:"prefetch"}:{},m&&D?{"x-middleware-prefetch":"1"}:{}),method:(x=S==null?void 0:S.method)!=null?x:"GET"}).then(s=>s.ok&&(S==null?void 0:S.method)==="HEAD"?{dataHref:R,response:s,text:"",json:{},cacheKey:O}:s.text().then(w=>{if(!s.ok){if(D&&[301,302,307,308].includes(s.status))return{dataHref:R,response:s,text:w,json:{},cacheKey:O};if(!D&&s.status===404){var _;if((_=ma(w))!=null&&_.notFound)return{dataHref:R,json:{notFound:Qa},response:s,text:w,cacheKey:O}}const N=new Error("Failed to load static props");throw v||In.markAssetError(N),N}return{dataHref:R,json:r?ma(w):null,response:s,text:w,cacheKey:O}})).then(s=>((!c||!1||s.response.headers.get("x-middleware-cache")==="no-cache")&&delete p[O],s)).catch(s=>{throw h||delete p[O],s.message==="Failed to fetch"&&In.markAssetError(s),s}),"getData");return h&&c?I({}).then(S=>(p[O]=Promise.resolve(S),S)):p[O]!==void 0?p[O]:p[O]=I(g?{method:"HEAD"}:{})}T(Sn,"fetchNextData");function sr(){return Math.random().toString(36).slice(2,10)}T(sr,"createKey");function kt({url:R,router:p}){if(R===gt.addBasePath(tn.addLocale(p.asPath,p.locale)))throw new Error(`Invariant: attempted to hard navigate to the same URL ${R} ${location.href}`);window.location.href=R}T(kt,"handleHardNavigation");const ya=T(({route:R,router:p})=>{let m=!1;const D=p.clc=()=>{m=!0};return T(()=>{if(m){const r=new Error(`Abort fetching component for route: "${R}"`);throw r.cancelled=!0,r}D===p.clc&&(p.clc=null)},"handleCancelled")},"getCancelledHandler");class St{reload(){window.location.reload()}back(){window.history.back()}forward(){window.history.forward()}push(p,m,D={}){if(process.env.__NEXT_SCROLL_RESTORATION&&qi)try{sessionStorage.setItem("__next_scroll_"+this._key,JSON.stringify({x:self.pageXOffset,y:self.pageYOffset}))}catch{}return{url:p,as:m}=Wi(this,p,m),this.change("pushState",p,m,D)}replace(p,m,D={}){return{url:p,as:m}=Wi(this,p,m),this.change("replaceState",p,m,D)}change(p,m,D,v,r){var c=this;return cn(function*(){if(!_i(m))return kt({url:m,router:c}),!1;const g=v._h;let h=g||v._shouldResolveHref||En.parsePath(m).pathname===En.parsePath(D).pathname;const O=Qt({},c.state),x=c.isReady!==!0;c.isReady=!0;const I=c.isSsr;if(g||(c.isSsr=!1),g&&c.clc)return!1;const S=O.locale;if(process.env.__NEXT_I18N_SUPPORT){O.locale=v.locale===!1?c.defaultLocale:v.locale||O.locale,typeof v.locale>"u"&&(v.locale=O.locale);const Se=Bt.parseRelativeUrl(en.hasBasePath(D)?wt.removeBasePath(D):D),we=Yt.normalizeLocalePath(Se.pathname,c.locales);we.detectedLocale&&(O.locale=we.detectedLocale,Se.pathname=gt.addBasePath(Se.pathname),D=_t.formatWithValidation(Se),m=gt.addBasePath(Yt.normalizeLocalePath(en.hasBasePath(m)?wt.removeBasePath(m):m,c.locales).pathname));let Me=!1;if(process.env.__NEXT_I18N_SUPPORT){var s;(s=c.locales)!=null&&s.includes(O.locale)||(Se.pathname=tn.addLocale(Se.pathname,O.locale),kt({url:_t.formatWithValidation(Se),router:c}),Me=!0)}const je=ga.detectDomainLocale(c.domainLocales,void 0,O.locale);if(process.env.__NEXT_I18N_SUPPORT&&!Me&&je&&c.isLocaleDomain&&self.location.hostname!==je.domain){const Ke=wt.removeBasePath(D);kt({url:`http${je.http?"":"s"}://${je.domain}${gt.addBasePath(`${O.locale===je.defaultLocale?"":`/${O.locale}`}${Ke==="/"?"":Ke}`||"/")}`,router:c}),Me=!0}if(Me)return new Promise(()=>{})}zt.ST&&performance.mark("routeChange");const{shallow:w=!1,scroll:_=!0}=v,N={shallow:w};c._inFlightRoute&&c.clc&&(I||St.events.emit("routeChangeError",pa(),c._inFlightRoute,N),c.clc(),c.clc=null),D=gt.addBasePath(tn.addLocale(en.hasBasePath(D)?wt.removeBasePath(D):D,v.locale,c.defaultLocale));const F=ji.removeLocale(en.hasBasePath(D)?wt.removeBasePath(D):D,O.locale);c._inFlightRoute=D;const K=S!==O.locale;if(!g&&c.onlyAHashChange(F)&&!K){O.asPath=F,St.events.emit("hashChangeStart",D,N),c.changeState(p,m,D,Qt({},v,{scroll:!1})),_&&c.scrollToHash(F);try{yield c.set(O,c.components[O.route],null)}catch(Se){throw fi.default(Se)&&Se.cancelled&&St.events.emit("routeChangeError",Se,F,N),Se}return St.events.emit("hashChangeComplete",D,N),!0}let X=Bt.parseRelativeUrl(m),{pathname:L,query:W}=X,$,q;try{[$,{__rewrites:q}]=yield Promise.all([c.pageLoader.getPageList(),In.getClientBuildManifest(),c.pageLoader.getMiddleware()])}catch{return kt({url:D,router:c}),!1}!c.urlIsNew(F)&&!K&&(p="replaceState");let ee=D;L=L&&Ut.removeTrailingSlash(wt.removeBasePath(L));let J=Ut.removeTrailingSlash(L);const ae=D.startsWith("/")&&Bt.parseRelativeUrl(D).pathname,ne=!!(ae&&J!==ae&&(!Vt.isDynamicRoute(J)||!Cn.getRouteMatcher(dn.getRouteRegex(J))(ae))),fe=yield zn({asPath:D,locale:O.locale,router:c});if(v.shallow&&fe&&(L=c.pathname),g&&fe&&(h=!1),h&&L!=="/_error")if(v._shouldResolveHref=!0,process.env.__NEXT_HAS_REWRITES&&D.startsWith("/")){const Se=ir.default(gt.addBasePath(tn.addLocale(F,O.locale),!0),$,q,W,we=>nn(we,$),c.locales);if(Se.externalDest)return kt({url:D,router:c}),!0;fe||(ee=Se.asPath),Se.matchedPage&&Se.resolvedHref&&(L=Se.resolvedHref,X.pathname=gt.addBasePath(L),fe||(m=_t.formatWithValidation(X)))}else X.pathname=nn(L,$),X.pathname!==L&&(L=X.pathname,X.pathname=gt.addBasePath(L),fe||(m=_t.formatWithValidation(X)));if(!_i(D))return kt({url:D,router:c}),!1;ee=ji.removeLocale(wt.removeBasePath(ee),O.locale),J=Ut.removeTrailingSlash(L);let pe=!1;if(Vt.isDynamicRoute(J)){const Se=Bt.parseRelativeUrl(ee),we=Se.pathname,Me=dn.getRouteRegex(J);pe=Cn.getRouteMatcher(Me)(we);const je=J===we,Ke=je?Mr(J,we,W):{};if(!pe||je&&!Ke.result){const qe=Object.keys(Me.groups).filter(ht=>!W[ht]&&!Me.groups[ht].optional);if(qe.length>0&&!fe)throw new Error((je?`The provided \`href\` (${m}) value is missing query values (${qe.join(", ")}) to be interpolated properly. `:`The provided \`as\` value (${we}) is incompatible with the \`href\` value (${J}). `)+`Read more: https://nextjs.org/docs/messages/${je?"href-interpolation-failed":"incompatible-href-as"}`)}else je?D=_t.formatWithValidation(Object.assign({},Se,{pathname:Ke.result,query:Ja(W,Ke.params)})):Object.assign(W,pe)}g||St.events.emit("routeChangeStart",D,N);try{var ce,Ce;let Se=yield c.getRouteInfo({route:J,pathname:L,query:W,as:D,resolvedAs:ee,routeProps:N,locale:O.locale,isPreview:O.isPreview,hasMiddleware:fe,unstable_skipClientCache:v.unstable_skipClientCache,isQueryUpdating:g&&!c.isFallback,isMiddlewareRewrite:ne});if("route"in Se&&fe){L=Se.route||J,J=L,N.shallow||(W=Object.assign({},Se.query||{},W));const $e=en.hasBasePath(X.pathname)?wt.removeBasePath(X.pathname):X.pathname;if(pe&&L!==$e&&Object.keys(pe).forEach(Fe=>{pe&&W[Fe]===pe[Fe]&&delete W[Fe]}),Vt.isDynamicRoute(L)){let at=!N.shallow&&Se.resolvedAs?Se.resolvedAs:gt.addBasePath(tn.addLocale(new URL(D,location.href).pathname,O.locale),!0);if(en.hasBasePath(at)&&(at=wt.removeBasePath(at)),process.env.__NEXT_I18N_SUPPORT){const qt=Yt.normalizeLocalePath(at,c.locales);O.locale=qt.detectedLocale||O.locale,at=qt.pathname}const Ct=dn.getRouteRegex(L),Wt=Cn.getRouteMatcher(Ct)(new URL(at,location.href).pathname);Wt&&Object.assign(W,Wt)}}if("type"in Se)return Se.type==="redirect-internal"?c.change(p,Se.newUrl,Se.newAs,v):(kt({url:Se.destination,router:c}),new Promise(()=>{}));let{error:we,props:Me,__N_SSG:je,__N_SSP:Ke}=Se;const qe=Se.Component;if(qe&&qe.unstable_scriptLoader&&[].concat(qe.unstable_scriptLoader()).forEach(Fe=>{Tu.handleClientScriptLoad(Fe.props)}),(je||Ke)&&Me){if(Me.pageProps&&Me.pageProps.__N_REDIRECT){v.locale=!1;const $e=Me.pageProps.__N_REDIRECT;if($e.startsWith("/")&&Me.pageProps.__N_REDIRECT_BASE_PATH!==!1){const Fe=Bt.parseRelativeUrl($e);Fe.pathname=nn(Fe.pathname,$);const{url:at,as:Ct}=Wi(c,$e,$e);return c.change(p,at,Ct,v)}return kt({url:$e,router:c}),new Promise(()=>{})}if(O.isPreview=!!Me.__N_PREVIEW,Me.notFound===Qa){let $e;try{yield c.fetchComponent("/404"),$e="/404"}catch{$e="/_error"}if(Se=yield c.getRouteInfo({route:$e,pathname:$e,query:W,as:D,resolvedAs:ee,routeProps:{shallow:!1},locale:O.locale,isPreview:O.isPreview}),"type"in Se)throw new Error("Unexpected middleware effect on /404")}}St.events.emit("beforeHistoryChange",D,N),c.changeState(p,m,D,v),g&&L==="/_error"&&((ce=self.__NEXT_DATA__.props)==null||(Ce=ce.pageProps)==null?void 0:Ce.statusCode)===500&&(Me==null?void 0:Me.pageProps)&&(Me.pageProps.statusCode=500);var de;const ht=v.shallow&&O.route===((de=Se.route)!=null?de:J);var Oe;const We=(Oe=v.scroll)!=null?Oe:!v._h&&!ht,rt=We?{x:0,y:0}:null,ot=Qt({},O,{route:J,pathname:L,query:W,asPath:F,isFallback:!1}),$t=r!=null?r:rt;if(!(v._h&&!$t&&!x&&!K&&Ou.compareRouterStates(ot,c.state))){if(yield c.set(ot,Se,$t).catch(Fe=>{if(Fe.cancelled)we=we||Fe;else throw Fe}),we)throw g||St.events.emit("routeChangeError",we,F,N),we;process.env.__NEXT_I18N_SUPPORT&&O.locale&&(document.documentElement.lang=O.locale),g||St.events.emit("routeChangeComplete",D,N),We&&/#.+$/.test(D)&&c.scrollToHash(D)}return!0}catch(Se){if(fi.default(Se)&&Se.cancelled)return!1;throw Se}})()}changeState(p,m,D,v={}){(p!=="pushState"||zt.getURL()!==D)&&(this._shallow=v.shallow,window.history[p]({url:m,as:D,options:v,__N:!0,key:this._key=p!=="pushState"?this._key:sr()},"",D))}handleRouteInfoError(p,m,D,v,r,c){var g=this;return cn(function*(){if(console.error(p),p.cancelled)throw p;if(In.isAssetError(p)||c)throw St.events.emit("routeChangeError",p,v,r),kt({url:v,router:g}),pa();try{let h;const{page:O,styleSheets:x}=yield g.fetchComponent("/_error"),I={props:h,Component:O,styleSheets:x,err:p,error:p};if(!I.props)try{I.props=yield g.getInitialProps(O,{err:p,pathname:m,query:D})}catch(S){console.error("Error in error page `getInitialProps`: ",S),I.props={}}return I}catch(h){return g.handleRouteInfoError(fi.default(h)?h:new Error(h+""),m,D,v,r,!0)}})()}getRouteInfo({route:p,pathname:m,query:D,as:v,resolvedAs:r,routeProps:c,locale:g,hasMiddleware:h,isPreview:O,unstable_skipClientCache:x,isQueryUpdating:I,isMiddlewareRewrite:S}){var s=this;return cn(function*(){let w=p;try{var _,N,F,K;const X=ya({route:w,router:s});let L=s.components[w];if(c.shallow&&L&&s.route===w)return L;h&&(L=void 0);let W=L&&!("initial"in L)?L:void 0;const $=I,q={dataHref:s.pageLoader.getDataHref({href:_t.formatWithValidation({pathname:m,query:D}),skipInterpolation:!0,asPath:r,locale:g}),hasMiddleware:!0,isServerRender:s.isSsr,parseJSON:!0,inflightCache:$?s.sbc:s.sdc,persistCache:!O,isPrefetch:!1,unstable_skipClientCache:x,isBackground:$},ee=I&&!S?{}:yield _a({fetchData:()=>Sn(q),asPath:r,locale:g,router:s}).catch(ce=>{if(I)return{};throw ce});if(I&&(ee.json=self.__NEXT_DATA__.props),X(),(ee==null||(_=ee.effect)==null?void 0:_.type)==="redirect-internal"||(ee==null||(N=ee.effect)==null?void 0:N.type)==="redirect-external")return ee.effect;if((ee==null||(F=ee.effect)==null?void 0:F.type)==="rewrite"){const ce=Ut.removeTrailingSlash(ee.effect.resolvedHref),Ce=yield s.pageLoader.getPageList();if((!I||Ce.includes(ce))&&(w=ce,m=ee.effect.resolvedHref,D=Qt({},D,ee.effect.parsedAs.query),r=wt.removeBasePath(Yt.normalizeLocalePath(ee.effect.parsedAs.pathname,s.locales).pathname),L=s.components[w],c.shallow&&L&&s.route===w&&!h))return Qt({},L,{route:w})}if(w==="/api"||w.startsWith("/api/"))return kt({url:v,router:s}),new Promise(()=>{});const J=W||(yield s.fetchComponent(w).then(ce=>({Component:ce.page,styleSheets:ce.styleSheets,__N_SSG:ce.mod.__N_SSG,__N_SSP:ce.mod.__N_SSP}))),ae=ee==null||(K=ee.response)==null?void 0:K.headers.get("x-middleware-skip"),ne=J.__N_SSG||J.__N_SSP;ae&&delete s.sdc[ee==null?void 0:ee.dataHref];const{props:fe,cacheKey:pe}=yield s._getData(cn(function*(){if(ne){const{json:ce,cacheKey:Ce}=(ee==null?void 0:ee.json)&&!ae?ee:yield Sn({dataHref:ee!=null&&ee.json?ee==null?void 0:ee.dataHref:s.pageLoader.getDataHref({href:_t.formatWithValidation({pathname:m,query:D}),asPath:r,locale:g}),isServerRender:s.isSsr,parseJSON:!0,inflightCache:ae?{}:s.sdc,persistCache:!O,isPrefetch:!1,unstable_skipClientCache:x});return{cacheKey:Ce,props:ce||{}}}return{headers:{},cacheKey:"",props:yield s.getInitialProps(J.Component,{pathname:m,query:D,asPath:v,locale:g,locales:s.locales,defaultLocale:s.defaultLocale})}}));return J.__N_SSP&&q.dataHref&&delete s.sdc[pe],!s.isPreview&&J.__N_SSG&&!0&&!I&&Sn(Object.assign({},q,{isBackground:!0,persistCache:!1,inflightCache:s.sbc})).catch(()=>{}),fe.pageProps=Object.assign({},fe.pageProps),J.props=fe,J.route=w,J.query=D,J.resolvedAs=r,s.components[w]=J,J}catch(X){return s.handleRouteInfoError(fi.getProperError(X),m,D,v,c)}})()}set(p,m,D){return this.state=p,this.sub(m,this.components["/_app"].Component,D)}beforePopState(p){this._bps=p}onlyAHashChange(p){if(!this.asPath)return!1;const[m,D]=this.asPath.split("#"),[v,r]=p.split("#");return r&&m===v&&D===r?!0:m!==v?!1:D!==r}scrollToHash(p){const[,m=""]=p.split("#");if(m===""||m==="top"){Gi(()=>window.scrollTo(0,0));return}const D=decodeURIComponent(m),v=document.getElementById(D);if(v){Gi(()=>v.scrollIntoView());return}const r=document.getElementsByName(D)[0];r&&Gi(()=>r.scrollIntoView())}urlIsNew(p){return this.asPath!==p}prefetch(p,m=p,D={}){var v=this;return cn(function*(){if(typeof window<"u"&&Au.isBot(window.navigator.userAgent))return;let r=Bt.parseRelativeUrl(p),{pathname:c,query:g}=r;const h=c;if(process.env.__NEXT_I18N_SUPPORT&&D.locale===!1){c=Yt.normalizeLocalePath(c,v.locales).pathname,r.pathname=c,p=_t.formatWithValidation(r);let _=Bt.parseRelativeUrl(m);const N=Yt.normalizeLocalePath(_.pathname,v.locales);_.pathname=N.pathname,D.locale=N.detectedLocale||v.defaultLocale,m=_t.formatWithValidation(_)}const O=yield v.pageLoader.getPageList();let x=m;const I=typeof D.locale<"u"?D.locale||void 0:v.locale,S=yield zn({asPath:m,locale:I,router:v});if(process.env.__NEXT_HAS_REWRITES&&m.startsWith("/")){let _;({__rewrites:_}=yield In.getClientBuildManifest());const N=ir.default(gt.addBasePath(tn.addLocale(m,v.locale),!0),O,_,r.query,F=>nn(F,O),v.locales);if(N.externalDest)return;S||(x=ji.removeLocale(wt.removeBasePath(N.asPath),v.locale)),N.matchedPage&&N.resolvedHref&&(c=N.resolvedHref,r.pathname=c,S||(p=_t.formatWithValidation(r)))}r.pathname=nn(r.pathname,O),Vt.isDynamicRoute(r.pathname)&&(c=r.pathname,r.pathname=c,Object.assign(g,Cn.getRouteMatcher(dn.getRouteRegex(r.pathname))(En.parsePath(m).pathname)||{}),S||(p=_t.formatWithValidation(r)));const s=process.env.__NEXT_MIDDLEWARE_PREFETCH==="strict"?{}:yield _a({fetchData:()=>Sn({dataHref:v.pageLoader.getDataHref({href:_t.formatWithValidation({pathname:h,query:g}),skipInterpolation:!0,asPath:x,locale:I}),hasMiddleware:!0,isServerRender:v.isSsr,parseJSON:!0,inflightCache:v.sdc,persistCache:!v.isPreview,isPrefetch:!0}),asPath:m,locale:I,router:v});if((s==null?void 0:s.effect.type)==="rewrite"&&(r.pathname=s.effect.resolvedHref,c=s.effect.resolvedHref,g=Qt({},g,s.effect.parsedAs.query),x=s.effect.parsedAs.pathname,p=_t.formatWithValidation(r)),(s==null?void 0:s.effect.type)==="redirect-external")return;const w=Ut.removeTrailingSlash(c);yield Promise.all([v.pageLoader._isSsg(w).then(_=>_?Sn({dataHref:s!=null&&s.json?s==null?void 0:s.dataHref:v.pageLoader.getDataHref({href:p,asPath:x,locale:I}),isServerRender:!1,parseJSON:!0,inflightCache:v.sdc,persistCache:!v.isPreview,isPrefetch:!0,unstable_skipClientCache:D.unstable_skipClientCache||D.priority&&!!process.env.__NEXT_OPTIMISTIC_CLIENT_CACHE}).then(()=>!1):!1),v.pageLoader[D.priority?"loadPage":"prefetch"](w)])})()}fetchComponent(p){var m=this;return cn(function*(){const D=ya({route:p,router:m});try{const v=yield m.pageLoader.loadPage(p);return D(),v}catch(v){throw D(),v}})()}_getData(p){let m=!1;const D=T(()=>{m=!0},"cancel");return this.clc=D,p().then(v=>{if(D===this.clc&&(this.clc=null),m){const r=new Error("Loading initial props cancelled");throw r.cancelled=!0,r}return v})}_getFlightData(p){return Sn({dataHref:p,isServerRender:!0,parseJSON:!1,inflightCache:this.sdc,persistCache:!1,isPrefetch:!1}).then(({text:m})=>({data:m}))}getInitialProps(p,m){const{Component:D}=this.components["/_app"],v=this._wrapApp(D);return m.AppTree=v,zt.loadGetInitialProps(D,{AppTree:v,Component:p,router:this,ctx:m})}get route(){return this.state.route}get pathname(){return this.state.pathname}get query(){return this.state.query}get asPath(){return this.state.asPath}get locale(){return this.state.locale}get isFallback(){return this.state.isFallback}get isPreview(){return this.state.isPreview}constructor(p,m,D,{initialProps:v,pageLoader:r,App:c,wrapApp:g,Component:h,err:O,subscription:x,isFallback:I,locale:S,locales:s,defaultLocale:w,domainLocales:_,isPreview:N}){this.sdc={},this.sbc={},this.isFirstPopStateEvent=!0,this._key=sr(),this.onPopState=X=>{const{isFirstPopStateEvent:L}=this;this.isFirstPopStateEvent=!1;const W=X.state;if(!W){const{pathname:fe,query:pe}=this;this.changeState("replaceState",_t.formatWithValidation({pathname:gt.addBasePath(fe),query:pe}),zt.getURL());return}if(W.__NA){window.location.reload();return}if(!W.__N||L&&this.locale===W.options.locale&&W.as===this.asPath)return;let $;const{url:q,as:ee,options:J,key:ae}=W;if(process.env.__NEXT_SCROLL_RESTORATION&&qi&&this._key!==ae){try{sessionStorage.setItem("__next_scroll_"+this._key,JSON.stringify({x:self.pageXOffset,y:self.pageYOffset}))}catch{}try{const fe=sessionStorage.getItem("__next_scroll_"+ae);$=JSON.parse(fe)}catch{$={x:0,y:0}}}this._key=ae;const{pathname:ne}=Bt.parseRelativeUrl(q);this.isSsr&&ee===gt.addBasePath(this.asPath)&&ne===gt.addBasePath(this.pathname)||this._bps&&!this._bps(W)||this.change("replaceState",q,ee,Object.assign({},J,{shallow:J.shallow&&this._shallow,locale:J.locale||this.defaultLocale,_h:0}),$)};const F=Ut.removeTrailingSlash(p);this.components={},p!=="/_error"&&(this.components[F]={Component:h,initial:!0,props:v,err:O,__N_SSG:v&&v.__N_SSG,__N_SSP:v&&v.__N_SSP}),this.components["/_app"]={Component:c,styleSheets:[]},this.events=St.events,this.pageLoader=r;const K=Vt.isDynamicRoute(p)&&self.__NEXT_DATA__.autoExport;if(this.basePath=process.env.__NEXT_ROUTER_BASEPATH||"",this.sub=x,this.clc=null,this._wrapApp=g,this.isSsr=!0,this.isLocaleDomain=!1,this.isReady=!!(self.__NEXT_DATA__.gssp||self.__NEXT_DATA__.gip||self.__NEXT_DATA__.appGip&&!self.__NEXT_DATA__.gsp||!K&&!self.location.search&&!process.env.__NEXT_HAS_REWRITES),process.env.__NEXT_I18N_SUPPORT&&(this.locales=s,this.defaultLocale=w,this.domainLocales=_,this.isLocaleDomain=!!ga.detectDomainLocale(_,self.location.hostname)),this.state={route:F,pathname:p,query:m,asPath:K?p:D,isPreview:!!N,locale:process.env.__NEXT_I18N_SUPPORT?S:void 0,isFallback:I},this._initialMatchesMiddlewarePromise=Promise.resolve(!1),typeof window<"u"){if(!D.startsWith("//")){const X={locale:S},L=zt.getURL();this._initialMatchesMiddlewarePromise=zn({router:this,locale:S,asPath:L}).then(W=>(X._shouldResolveHref=D!==p,this.changeState("replaceState",W?L:_t.formatWithValidation({pathname:gt.addBasePath(p),query:m}),L,X),W))}window.addEventListener("popstate",this.onPopState),process.env.__NEXT_SCROLL_RESTORATION&&qi&&(window.history.scrollRestoration="manual")}}}T(St,"Router");St.events=Eu.default();jt.default=St;var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.RouterContext=void 0;var Lu=Fn.default,ku=Lu(De.exports);const Nu=ku.default.createContext(null);Ci.RouterContext=Nu;var ci={exports:{}},xa;function Bu(){return xa||(xa=1,function(R,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=r;var m=Fn.default,D=m(De.exports),v=es();function r(c){function g(h){return D.default.createElement(c,Object.assign({router:v.useRouter()},h))}return T(g,"WithRouterWrapper"),g.getInitialProps=c.getInitialProps,g.origGetInitialProps=c.origGetInitialProps,g}T(r,"withRouter"),(typeof p.default=="function"||typeof p.default=="object"&&p.default!==null)&&typeof p.default.__esModule>"u"&&(Object.defineProperty(p.default,"__esModule",{value:!0}),Object.assign(p.default,p),R.exports=p.default)}(ci,ci.exports)),ci.exports}T(Bu,"requireWithRouter");var wa;function es(){return wa||(wa=1,function(R,p){Object.defineProperty(p,"__esModule",{value:!0}),Object.defineProperty(p,"Router",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(p,"withRouter",{enumerable:!0,get:function(){return g.default}}),p.useRouter=w,p.createRouter=_,p.makePublicRouterInstance=N,p.default=void 0;var m=Fn.default,D=m(De.exports),v=m(jt),r=Ci,c=m(Hn),g=m(Bu());const h={router:null,readyCallbacks:[],ready(F){if(this.router)return F();typeof window<"u"&&this.readyCallbacks.push(F)}},O=["pathname","route","query","asPath","components","isFallback","basePath","locale","locales","defaultLocale","isReady","isPreview","isLocaleDomain","domainLocales"],x=["routeChangeStart","beforeHistoryChange","routeChangeComplete","routeChangeError","hashChangeStart","hashChangeComplete"],I=["push","replace","reload","back","prefetch","beforePopState"];Object.defineProperty(h,"events",{get(){return v.default.events}});function S(){if(!h.router){const F=`No router instance found.
You should only use "next/router" on the client side of your app.
`;throw new Error(F)}return h.router}T(S,"getRouter"),O.forEach(F=>{Object.defineProperty(h,F,{get(){return S()[F]}})}),I.forEach(F=>{h[F]=(...K)=>S()[F](...K)}),x.forEach(F=>{h.ready(()=>{v.default.events.on(F,(...K)=>{const X=`on${F.charAt(0).toUpperCase()}${F.substring(1)}`,L=h;if(L[X])try{L[X](...K)}catch(W){console.error(`Error when running the Router event: ${X}`),console.error(c.default(W)?`${W.message}
${W.stack}`:W+"")}})})});var s=h;p.default=s;function w(){const F=D.default.useContext(r.RouterContext);if(!F)throw new Error("Error: NextRouter was not mounted. https://nextjs.org/docs/messages/next-router-not-mounted");return F}T(w,"useRouter");function _(...F){return h.router=new v.default(...F),h.readyCallbacks.forEach(K=>K()),h.readyCallbacks=[],h.router}T(_,"createRouter");function N(F){const K=F,X={};for(const L of O){if(typeof K[L]=="object"){X[L]=Object.assign(Array.isArray(K[L])?[]:{},K[L]);continue}X[L]=K[L]}return X.events=v.default.events,I.forEach(L=>{X[L]=(...W)=>K[L](...W)}),X}T(N,"makePublicRouterInstance"),(typeof p.default=="function"||typeof p.default=="object"&&p.default!==null)&&typeof p.default.__esModule>"u"&&(Object.defineProperty(p.default,"__esModule",{value:!0}),Object.assign(p.default,p),R.exports=p.default)}(oi,oi.exports)),oi.exports}T(es,"requireRouter");(function(R){R.exports=es()})(Xs);var zu=T(function(p){var m=p.initValue,D=p.useHookBody,v=p.applyStateChange,r=De.exports.useRef(m);if(typeof D!="function")throw new Error("function expected as hook body parameter. got "+typeof D);var c=D();return De.exports.useLayoutEffect(function(){r.current!==c&&(r.current=c,v(c))},[v,c]),null},"SingleItemContainer"),or=T(function(p){console&&console.warn&&console.warn(p)},"warning"),Xi=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,Du=T(function(p){return Vs.exports.unstable_batchedUpdates(p)},"batch"),Fu=T(function(p){if(Xi.document&&Xi.document.createElement){var m=Xi.document.createElement("div"),D=Us(m);D.render(Ta(p,{automaticContainerInternalUseOnly:!0}))}else or("Can not mount SingletonHooksContainer on server side. Did you manage to run useEffect on server? Please mount SingletonHooksContainer into your components tree manually.")},"mount"),Hu=1,ur=!1,ts=!1,gi=[],Tn=[],mi=T(function(){Tn.forEach(function(p){return p()})},"notifyContainersAsync"),Uu=T(function(p){var m=p.automaticContainerInternalUseOnly,D=De.exports.useState([]),v=D[0],r=D[1],c=De.exports.useRef();return c.current=v,!m&&ur===!1&&(ts=!0),De.exports.useEffect(function(){var g=!0;function h(){if(!!g){if(Tn[0]!==h){!m&&ur===!0&&or("SingletonHooksContainer is mounted after some singleton hook has been used.Your SingletonHooksContainer will not be used in favor of internal one."),r(function(O){return[]});return}r([].concat(gi))}}return T(h,"updateRenderedHooks"),Tn.push(h),mi(),function(){g=!1,c.current.length>0&&or("SingletonHooksContainer is unmounted, but it has active singleton hooks. They will be reevaluated once SingletonHooksContainer is mounted again"),Tn.splice(Tn.indexOf(h),1),mi()}},[m]),Ta(js,{children:v.map(function(g){var h=g.hook,O=g.key;return De.exports.createElement(zu,{...h,key:O})})})},"SingletonHooksContainer"),Vu=T(function(p){var m=Hu++;return gi.push({hook:p,key:m}),Tn.length===0&&ts===!1&&(ur=!0,Fu(Uu)),mi(),function(){gi.splice(gi.findIndex(function(D){return D.key===m}),1),mi()}},"addHook"),ju=T(function(p,m,D){D===void 0&&(D={});var v=!1,r=void 0,c=!1,g=void 0,h=[],O=D,x=O.unmountIfNoConsumers,I=x===void 0?!1:x,S=T(function(_){g=_,Du(function(){return h.forEach(function(N){return N(_)})})},"applyStateChange"),s=T(function(){return c||(g=typeof p=="function"?p():p,c=!0),g},"stateInitializer");return function(){var w=De.exports.useState(s),_=w[0],N=w[1];return De.exports.useEffect(function(){return v||(v=!0,r=Vu({initValue:p,useHookBody:m,applyStateChange:S})),h.push(N),g!==_&&N(g),function(){h.splice(h.indexOf(N),1),h.length===0&&I&&(r(),v=!1)}},[]),_}},"singletonHook"),$u={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(R,p){T(function(D,v){R.exports=v()},"webpackUniversalModuleDefinition")(di,function(){return function(m){var D={};function v(r){if(D[r])return D[r].exports;var c=D[r]={i:r,l:!1,exports:{}};return m[r].call(c.exports,c,c.exports,v),c.l=!0,c.exports}return T(v,"__webpack_require__"),v.m=m,v.c=D,v.d=function(r,c,g){v.o(r,c)||Object.defineProperty(r,c,{enumerable:!0,get:g})},v.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},v.t=function(r,c){if(c&1&&(r=v(r)),c&8||c&4&&typeof r=="object"&&r&&r.__esModule)return r;var g=Object.create(null);if(v.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:r}),c&2&&typeof r!="string")for(var h in r)v.d(g,h,function(O){return r[O]}.bind(null,h));return g},v.n=function(r){var c=r&&r.__esModule?T(function(){return r.default},"getDefault"):T(function(){return r},"getModuleExports");return v.d(c,"a",c),c},v.o=function(r,c){return Object.prototype.hasOwnProperty.call(r,c)},v.p="",v(v.s=21)}([function(m,D){var v={};m.exports=v,function(){v._nextId=0,v._seed=0,v._nowStartTime=+new Date,v._warnedOnce={},v._decomp=null,v.extend=function(c,g){var h,O;typeof g=="boolean"?(h=2,O=g):(h=1,O=!0);for(var x=h;x<arguments.length;x++){var I=arguments[x];if(I)for(var S in I)O&&I[S]&&I[S].constructor===Object&&(!c[S]||c[S].constructor===Object)?(c[S]=c[S]||{},v.extend(c[S],O,I[S])):c[S]=I[S]}return c},v.clone=function(c,g){return v.extend({},g,c)},v.keys=function(c){if(Object.keys)return Object.keys(c);var g=[];for(var h in c)g.push(h);return g},v.values=function(c){var g=[];if(Object.keys){for(var h=Object.keys(c),O=0;O<h.length;O++)g.push(c[h[O]]);return g}for(var x in c)g.push(c[x]);return g},v.get=function(c,g,h,O){g=g.split(".").slice(h,O);for(var x=0;x<g.length;x+=1)c=c[g[x]];return c},v.set=function(c,g,h,O,x){var I=g.split(".").slice(O,x);return v.get(c,g,0,-1)[I[I.length-1]]=h,h},v.shuffle=function(c){for(var g=c.length-1;g>0;g--){var h=Math.floor(v.random()*(g+1)),O=c[g];c[g]=c[h],c[h]=O}return c},v.choose=function(c){return c[Math.floor(v.random()*c.length)]},v.isElement=function(c){return typeof HTMLElement<"u"?c instanceof HTMLElement:!!(c&&c.nodeType&&c.nodeName)},v.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},v.isFunction=function(c){return typeof c=="function"},v.isPlainObject=function(c){return typeof c=="object"&&c.constructor===Object},v.isString=function(c){return toString.call(c)==="[object String]"},v.clamp=function(c,g,h){return c<g?g:c>h?h:c},v.sign=function(c){return c<0?-1:1},v.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-v._nowStartTime},v.random=function(c,g){return c=typeof c<"u"?c:0,g=typeof g<"u"?g:1,c+r()*(g-c)};var r=T(function(){return v._seed=(v._seed*9301+49297)%233280,v._seed/233280},"_seededRandom");v.colorToNumber=function(c){return c=c.replace("#",""),c.length==3&&(c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2)),parseInt(c,16)},v.logLevel=1,v.log=function(){console&&v.logLevel>0&&v.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},v.info=function(){console&&v.logLevel>0&&v.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},v.warn=function(){console&&v.logLevel>0&&v.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},v.warnOnce=function(){var c=Array.prototype.slice.call(arguments).join(" ");v._warnedOnce[c]||(v.warn(c),v._warnedOnce[c]=!0)},v.deprecated=function(c,g,h){c[g]=v.chain(function(){v.warnOnce("\u{1F505} deprecated \u{1F505}",h)},c[g])},v.nextId=function(){return v._nextId++},v.indexOf=function(c,g){if(c.indexOf)return c.indexOf(g);for(var h=0;h<c.length;h++)if(c[h]===g)return h;return-1},v.map=function(c,g){if(c.map)return c.map(g);for(var h=[],O=0;O<c.length;O+=1)h.push(g(c[O]));return h},v.topologicalSort=function(c){var g=[],h=[],O=[];for(var x in c)!h[x]&&!O[x]&&v._topologicalSort(x,h,O,c,g);return g},v._topologicalSort=function(c,g,h,O,x){var I=O[c]||[];h[c]=!0;for(var S=0;S<I.length;S+=1){var s=I[S];h[s]||g[s]||v._topologicalSort(s,g,h,O,x)}h[c]=!1,g[c]=!0,x.push(c)},v.chain=function(){for(var c=[],g=0;g<arguments.length;g+=1){var h=arguments[g];h._chained?c.push.apply(c,h._chained):c.push(h)}var O=T(function(){for(var x,I=new Array(arguments.length),S=0,s=arguments.length;S<s;S++)I[S]=arguments[S];for(S=0;S<c.length;S+=1){var w=c[S].apply(x,I);typeof w<"u"&&(x=w)}return x},"chain");return O._chained=c,O},v.chainPathBefore=function(c,g,h){return v.set(c,g,v.chain(h,v.get(c,g)))},v.chainPathAfter=function(c,g,h){return v.set(c,g,v.chain(v.get(c,g),h))},v.setDecomp=function(c){v._decomp=c},v.getDecomp=function(){var c=v._decomp;try{!c&&typeof window<"u"&&(c=window.decomp),!c&&typeof di<"u"&&(c=di.decomp)}catch{c=null}return c}}()},function(m,D){var v={};m.exports=v,function(){v.create=function(r){var c={min:{x:0,y:0},max:{x:0,y:0}};return r&&v.update(c,r),c},v.update=function(r,c,g){r.min.x=1/0,r.max.x=-1/0,r.min.y=1/0,r.max.y=-1/0;for(var h=0;h<c.length;h++){var O=c[h];O.x>r.max.x&&(r.max.x=O.x),O.x<r.min.x&&(r.min.x=O.x),O.y>r.max.y&&(r.max.y=O.y),O.y<r.min.y&&(r.min.y=O.y)}g&&(g.x>0?r.max.x+=g.x:r.min.x+=g.x,g.y>0?r.max.y+=g.y:r.min.y+=g.y)},v.contains=function(r,c){return c.x>=r.min.x&&c.x<=r.max.x&&c.y>=r.min.y&&c.y<=r.max.y},v.overlaps=function(r,c){return r.min.x<=c.max.x&&r.max.x>=c.min.x&&r.max.y>=c.min.y&&r.min.y<=c.max.y},v.translate=function(r,c){r.min.x+=c.x,r.max.x+=c.x,r.min.y+=c.y,r.max.y+=c.y},v.shift=function(r,c){var g=r.max.x-r.min.x,h=r.max.y-r.min.y;r.min.x=c.x,r.max.x=c.x+g,r.min.y=c.y,r.max.y=c.y+h}}()},function(m,D){var v={};m.exports=v,function(){v.create=function(r,c){return{x:r||0,y:c||0}},v.clone=function(r){return{x:r.x,y:r.y}},v.magnitude=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)},v.magnitudeSquared=function(r){return r.x*r.x+r.y*r.y},v.rotate=function(r,c,g){var h=Math.cos(c),O=Math.sin(c);g||(g={});var x=r.x*h-r.y*O;return g.y=r.x*O+r.y*h,g.x=x,g},v.rotateAbout=function(r,c,g,h){var O=Math.cos(c),x=Math.sin(c);h||(h={});var I=g.x+((r.x-g.x)*O-(r.y-g.y)*x);return h.y=g.y+((r.x-g.x)*x+(r.y-g.y)*O),h.x=I,h},v.normalise=function(r){var c=v.magnitude(r);return c===0?{x:0,y:0}:{x:r.x/c,y:r.y/c}},v.dot=function(r,c){return r.x*c.x+r.y*c.y},v.cross=function(r,c){return r.x*c.y-r.y*c.x},v.cross3=function(r,c,g){return(c.x-r.x)*(g.y-r.y)-(c.y-r.y)*(g.x-r.x)},v.add=function(r,c,g){return g||(g={}),g.x=r.x+c.x,g.y=r.y+c.y,g},v.sub=function(r,c,g){return g||(g={}),g.x=r.x-c.x,g.y=r.y-c.y,g},v.mult=function(r,c){return{x:r.x*c,y:r.y*c}},v.div=function(r,c){return{x:r.x/c,y:r.y/c}},v.perp=function(r,c){return c=c===!0?-1:1,{x:c*-r.y,y:c*r.x}},v.neg=function(r){return{x:-r.x,y:-r.y}},v.angle=function(r,c){return Math.atan2(c.y-r.y,c.x-r.x)},v._temp=[v.create(),v.create(),v.create(),v.create(),v.create(),v.create()]}()},function(m,D,v){var r={};m.exports=r;var c=v(2),g=v(0);(function(){r.create=function(h,O){for(var x=[],I=0;I<h.length;I++){var S=h[I],s={x:S.x,y:S.y,index:I,body:O,isInternal:!1};x.push(s)}return x},r.fromPath=function(h,O){var x=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,I=[];return h.replace(x,function(S,s,w){I.push({x:parseFloat(s),y:parseFloat(w)})}),r.create(I,O)},r.centre=function(h){for(var O=r.area(h,!0),x={x:0,y:0},I,S,s,w=0;w<h.length;w++)s=(w+1)%h.length,I=c.cross(h[w],h[s]),S=c.mult(c.add(h[w],h[s]),I),x=c.add(x,S);return c.div(x,6*O)},r.mean=function(h){for(var O={x:0,y:0},x=0;x<h.length;x++)O.x+=h[x].x,O.y+=h[x].y;return c.div(O,h.length)},r.area=function(h,O){for(var x=0,I=h.length-1,S=0;S<h.length;S++)x+=(h[I].x-h[S].x)*(h[I].y+h[S].y),I=S;return O?x/2:Math.abs(x)/2},r.inertia=function(h,O){for(var x=0,I=0,S=h,s,w,_=0;_<S.length;_++)w=(_+1)%S.length,s=Math.abs(c.cross(S[w],S[_])),x+=s*(c.dot(S[w],S[w])+c.dot(S[w],S[_])+c.dot(S[_],S[_])),I+=s;return O/6*(x/I)},r.translate=function(h,O,x){x=typeof x<"u"?x:1;var I=h.length,S=O.x*x,s=O.y*x,w;for(w=0;w<I;w++)h[w].x+=S,h[w].y+=s;return h},r.rotate=function(h,O,x){if(O!==0){var I=Math.cos(O),S=Math.sin(O),s=x.x,w=x.y,_=h.length,N,F,K,X;for(X=0;X<_;X++)N=h[X],F=N.x-s,K=N.y-w,N.x=s+(F*I-K*S),N.y=w+(F*S+K*I);return h}},r.contains=function(h,O){for(var x=O.x,I=O.y,S=h.length,s=h[S-1],w,_=0;_<S;_++){if(w=h[_],(x-s.x)*(w.y-s.y)+(I-s.y)*(s.x-w.x)>0)return!1;s=w}return!0},r.scale=function(h,O,x,I){if(O===1&&x===1)return h;I=I||r.centre(h);for(var S,s,w=0;w<h.length;w++)S=h[w],s=c.sub(S,I),h[w].x=I.x+s.x*O,h[w].y=I.y+s.y*x;return h},r.chamfer=function(h,O,x,I,S){typeof O=="number"?O=[O]:O=O||[8],x=typeof x<"u"?x:-1,I=I||2,S=S||14;for(var s=[],w=0;w<h.length;w++){var _=h[w-1>=0?w-1:h.length-1],N=h[w],F=h[(w+1)%h.length],K=O[w<O.length?w:O.length-1];if(K===0){s.push(N);continue}var X=c.normalise({x:N.y-_.y,y:_.x-N.x}),L=c.normalise({x:F.y-N.y,y:N.x-F.x}),W=Math.sqrt(2*Math.pow(K,2)),$=c.mult(g.clone(X),K),q=c.normalise(c.mult(c.add(X,L),.5)),ee=c.sub(N,c.mult(q,W)),J=x;x===-1&&(J=Math.pow(K,.32)*1.75),J=g.clamp(J,I,S),J%2===1&&(J+=1);for(var ae=Math.acos(c.dot(X,L)),ne=ae/J,fe=0;fe<J;fe++)s.push(c.add(c.rotate($,ne*fe),ee))}return s},r.clockwiseSort=function(h){var O=r.mean(h);return h.sort(function(x,I){return c.angle(O,x)-c.angle(O,I)}),h},r.isConvex=function(h){var O=0,x=h.length,I,S,s,w;if(x<3)return null;for(I=0;I<x;I++)if(S=(I+1)%x,s=(I+2)%x,w=(h[S].x-h[I].x)*(h[s].y-h[S].y),w-=(h[S].y-h[I].y)*(h[s].x-h[S].x),w<0?O|=1:w>0&&(O|=2),O===3)return!1;return O!==0?!0:null},r.hull=function(h){var O=[],x=[],I,S;for(h=h.slice(0),h.sort(function(s,w){var _=s.x-w.x;return _!==0?_:s.y-w.y}),S=0;S<h.length;S+=1){for(I=h[S];x.length>=2&&c.cross3(x[x.length-2],x[x.length-1],I)<=0;)x.pop();x.push(I)}for(S=h.length-1;S>=0;S-=1){for(I=h[S];O.length>=2&&c.cross3(O[O.length-2],O[O.length-1],I)<=0;)O.pop();O.push(I)}return O.pop(),x.pop(),O.concat(x)}})()},function(m,D,v){var r={};m.exports=r;var c=v(0);(function(){r.on=function(g,h,O){for(var x=h.split(" "),I,S=0;S<x.length;S++)I=x[S],g.events=g.events||{},g.events[I]=g.events[I]||[],g.events[I].push(O);return O},r.off=function(g,h,O){if(!h){g.events={};return}typeof h=="function"&&(O=h,h=c.keys(g.events).join(" "));for(var x=h.split(" "),I=0;I<x.length;I++){var S=g.events[x[I]],s=[];if(O&&S)for(var w=0;w<S.length;w++)S[w]!==O&&s.push(S[w]);g.events[x[I]]=s}},r.trigger=function(g,h,O){var x,I,S,s,w=g.events;if(w&&c.keys(w).length>0){O||(O={}),x=h.split(" ");for(var _=0;_<x.length;_++)if(I=x[_],S=w[I],S){s=c.clone(O,!1),s.name=I,s.source=g;for(var N=0;N<S.length;N++)S[N].apply(g,[s])}}}})()},function(m,D,v){var r={};m.exports=r;var c=v(4),g=v(0),h=v(1),O=v(6);(function(){r.create=function(x){return g.extend({id:g.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},x)},r.setModified=function(x,I,S,s){if(x.isModified=I,I&&x.cache&&(x.cache.allBodies=null,x.cache.allConstraints=null,x.cache.allComposites=null),S&&x.parent&&r.setModified(x.parent,I,S,s),s)for(var w=0;w<x.composites.length;w++){var _=x.composites[w];r.setModified(_,I,S,s)}},r.add=function(x,I){var S=[].concat(I);c.trigger(x,"beforeAdd",{object:I});for(var s=0;s<S.length;s++){var w=S[s];switch(w.type){case"body":if(w.parent!==w){g.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(x,w);break;case"constraint":r.addConstraint(x,w);break;case"composite":r.addComposite(x,w);break;case"mouseConstraint":r.addConstraint(x,w.constraint);break}}return c.trigger(x,"afterAdd",{object:I}),x},r.remove=function(x,I,S){var s=[].concat(I);c.trigger(x,"beforeRemove",{object:I});for(var w=0;w<s.length;w++){var _=s[w];switch(_.type){case"body":r.removeBody(x,_,S);break;case"constraint":r.removeConstraint(x,_,S);break;case"composite":r.removeComposite(x,_,S);break;case"mouseConstraint":r.removeConstraint(x,_.constraint);break}}return c.trigger(x,"afterRemove",{object:I}),x},r.addComposite=function(x,I){return x.composites.push(I),I.parent=x,r.setModified(x,!0,!0,!1),x},r.removeComposite=function(x,I,S){var s=g.indexOf(x.composites,I);if(s!==-1&&r.removeCompositeAt(x,s),S)for(var w=0;w<x.composites.length;w++)r.removeComposite(x.composites[w],I,!0);return x},r.removeCompositeAt=function(x,I){return x.composites.splice(I,1),r.setModified(x,!0,!0,!1),x},r.addBody=function(x,I){return x.bodies.push(I),r.setModified(x,!0,!0,!1),x},r.removeBody=function(x,I,S){var s=g.indexOf(x.bodies,I);if(s!==-1&&r.removeBodyAt(x,s),S)for(var w=0;w<x.composites.length;w++)r.removeBody(x.composites[w],I,!0);return x},r.removeBodyAt=function(x,I){return x.bodies.splice(I,1),r.setModified(x,!0,!0,!1),x},r.addConstraint=function(x,I){return x.constraints.push(I),r.setModified(x,!0,!0,!1),x},r.removeConstraint=function(x,I,S){var s=g.indexOf(x.constraints,I);if(s!==-1&&r.removeConstraintAt(x,s),S)for(var w=0;w<x.composites.length;w++)r.removeConstraint(x.composites[w],I,!0);return x},r.removeConstraintAt=function(x,I){return x.constraints.splice(I,1),r.setModified(x,!0,!0,!1),x},r.clear=function(x,I,S){if(S)for(var s=0;s<x.composites.length;s++)r.clear(x.composites[s],I,!0);return I?x.bodies=x.bodies.filter(function(w){return w.isStatic}):x.bodies.length=0,x.constraints.length=0,x.composites.length=0,r.setModified(x,!0,!0,!1),x},r.allBodies=function(x){if(x.cache&&x.cache.allBodies)return x.cache.allBodies;for(var I=[].concat(x.bodies),S=0;S<x.composites.length;S++)I=I.concat(r.allBodies(x.composites[S]));return x.cache&&(x.cache.allBodies=I),I},r.allConstraints=function(x){if(x.cache&&x.cache.allConstraints)return x.cache.allConstraints;for(var I=[].concat(x.constraints),S=0;S<x.composites.length;S++)I=I.concat(r.allConstraints(x.composites[S]));return x.cache&&(x.cache.allConstraints=I),I},r.allComposites=function(x){if(x.cache&&x.cache.allComposites)return x.cache.allComposites;for(var I=[].concat(x.composites),S=0;S<x.composites.length;S++)I=I.concat(r.allComposites(x.composites[S]));return x.cache&&(x.cache.allComposites=I),I},r.get=function(x,I,S){var s,w;switch(S){case"body":s=r.allBodies(x);break;case"constraint":s=r.allConstraints(x);break;case"composite":s=r.allComposites(x).concat(x);break}return s?(w=s.filter(function(_){return _.id.toString()===I.toString()}),w.length===0?null:w[0]):null},r.move=function(x,I,S){return r.remove(x,I),r.add(S,I),x},r.rebase=function(x){for(var I=r.allBodies(x).concat(r.allConstraints(x)).concat(r.allComposites(x)),S=0;S<I.length;S++)I[S].id=g.nextId();return x},r.translate=function(x,I,S){for(var s=S?r.allBodies(x):x.bodies,w=0;w<s.length;w++)O.translate(s[w],I);return x},r.rotate=function(x,I,S,s){for(var w=Math.cos(I),_=Math.sin(I),N=s?r.allBodies(x):x.bodies,F=0;F<N.length;F++){var K=N[F],X=K.position.x-S.x,L=K.position.y-S.y;O.setPosition(K,{x:S.x+(X*w-L*_),y:S.y+(X*_+L*w)}),O.rotate(K,I)}return x},r.scale=function(x,I,S,s,w){for(var _=w?r.allBodies(x):x.bodies,N=0;N<_.length;N++){var F=_[N],K=F.position.x-s.x,X=F.position.y-s.y;O.setPosition(F,{x:s.x+K*I,y:s.y+X*S}),O.scale(F,I,S)}return x},r.bounds=function(x){for(var I=r.allBodies(x),S=[],s=0;s<I.length;s+=1){var w=I[s];S.push(w.bounds.min,w.bounds.max)}return h.create(S)}})()},function(m,D,v){var r={};m.exports=r;var c=v(3),g=v(2),h=v(7);v(16);var O=v(0),x=v(1),I=v(11);(function(){r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r.create=function(s){var w={id:O.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:c.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},_=O.extend(w,s);return S(_,s),_},r.nextGroup=function(s){return s?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var S=T(function(s,w){w=w||{},r.set(s,{bounds:s.bounds||x.create(s.vertices),positionPrev:s.positionPrev||g.clone(s.position),anglePrev:s.anglePrev||s.angle,vertices:s.vertices,parts:s.parts||[s],isStatic:s.isStatic,isSleeping:s.isSleeping,parent:s.parent||s}),c.rotate(s.vertices,s.angle,s.position),I.rotate(s.axes,s.angle),x.update(s.bounds,s.vertices,s.velocity),r.set(s,{axes:w.axes||s.axes,area:w.area||s.area,mass:w.mass||s.mass,inertia:w.inertia||s.inertia});var _=s.isStatic?"#14151f":O.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),N=s.isStatic?"#555":"#ccc",F=s.isStatic&&s.render.fillStyle===null?1:0;s.render.fillStyle=s.render.fillStyle||_,s.render.strokeStyle=s.render.strokeStyle||N,s.render.lineWidth=s.render.lineWidth||F,s.render.sprite.xOffset+=-(s.bounds.min.x-s.position.x)/(s.bounds.max.x-s.bounds.min.x),s.render.sprite.yOffset+=-(s.bounds.min.y-s.position.y)/(s.bounds.max.y-s.bounds.min.y)},"_initProperties");r.set=function(s,w,_){var N;typeof w=="string"&&(N=w,w={},w[N]=_);for(N in w)if(!!Object.prototype.hasOwnProperty.call(w,N))switch(_=w[N],N){case"isStatic":r.setStatic(s,_);break;case"isSleeping":h.set(s,_);break;case"mass":r.setMass(s,_);break;case"density":r.setDensity(s,_);break;case"inertia":r.setInertia(s,_);break;case"vertices":r.setVertices(s,_);break;case"position":r.setPosition(s,_);break;case"angle":r.setAngle(s,_);break;case"velocity":r.setVelocity(s,_);break;case"angularVelocity":r.setAngularVelocity(s,_);break;case"parts":r.setParts(s,_);break;case"centre":r.setCentre(s,_);break;default:s[N]=_}},r.setStatic=function(s,w){for(var _=0;_<s.parts.length;_++){var N=s.parts[_];N.isStatic=w,w?(N._original={restitution:N.restitution,friction:N.friction,mass:N.mass,inertia:N.inertia,density:N.density,inverseMass:N.inverseMass,inverseInertia:N.inverseInertia},N.restitution=0,N.friction=1,N.mass=N.inertia=N.density=1/0,N.inverseMass=N.inverseInertia=0,N.positionPrev.x=N.position.x,N.positionPrev.y=N.position.y,N.anglePrev=N.angle,N.angularVelocity=0,N.speed=0,N.angularSpeed=0,N.motion=0):N._original&&(N.restitution=N._original.restitution,N.friction=N._original.friction,N.mass=N._original.mass,N.inertia=N._original.inertia,N.density=N._original.density,N.inverseMass=N._original.inverseMass,N.inverseInertia=N._original.inverseInertia,N._original=null)}},r.setMass=function(s,w){var _=s.inertia/(s.mass/6);s.inertia=_*(w/6),s.inverseInertia=1/s.inertia,s.mass=w,s.inverseMass=1/s.mass,s.density=s.mass/s.area},r.setDensity=function(s,w){r.setMass(s,w*s.area),s.density=w},r.setInertia=function(s,w){s.inertia=w,s.inverseInertia=1/s.inertia},r.setVertices=function(s,w){w[0].body===s?s.vertices=w:s.vertices=c.create(w,s),s.axes=I.fromVertices(s.vertices),s.area=c.area(s.vertices),r.setMass(s,s.density*s.area);var _=c.centre(s.vertices);c.translate(s.vertices,_,-1),r.setInertia(s,r._inertiaScale*c.inertia(s.vertices,s.mass)),c.translate(s.vertices,s.position),x.update(s.bounds,s.vertices,s.velocity)},r.setParts=function(s,w,_){var N;for(w=w.slice(0),s.parts.length=0,s.parts.push(s),s.parent=s,N=0;N<w.length;N++){var F=w[N];F!==s&&(F.parent=s,s.parts.push(F))}if(s.parts.length!==1){if(_=typeof _<"u"?_:!0,_){var K=[];for(N=0;N<w.length;N++)K=K.concat(w[N].vertices);c.clockwiseSort(K);var X=c.hull(K),L=c.centre(X);r.setVertices(s,X),c.translate(s.vertices,L)}var W=r._totalProperties(s);s.area=W.area,s.parent=s,s.position.x=W.centre.x,s.position.y=W.centre.y,s.positionPrev.x=W.centre.x,s.positionPrev.y=W.centre.y,r.setMass(s,W.mass),r.setInertia(s,W.inertia),r.setPosition(s,W.centre)}},r.setCentre=function(s,w,_){_?(s.positionPrev.x+=w.x,s.positionPrev.y+=w.y,s.position.x+=w.x,s.position.y+=w.y):(s.positionPrev.x=w.x-(s.position.x-s.positionPrev.x),s.positionPrev.y=w.y-(s.position.y-s.positionPrev.y),s.position.x=w.x,s.position.y=w.y)},r.setPosition=function(s,w){var _=g.sub(w,s.position);s.positionPrev.x+=_.x,s.positionPrev.y+=_.y;for(var N=0;N<s.parts.length;N++){var F=s.parts[N];F.position.x+=_.x,F.position.y+=_.y,c.translate(F.vertices,_),x.update(F.bounds,F.vertices,s.velocity)}},r.setAngle=function(s,w){var _=w-s.angle;s.anglePrev+=_;for(var N=0;N<s.parts.length;N++){var F=s.parts[N];F.angle+=_,c.rotate(F.vertices,_,s.position),I.rotate(F.axes,_),x.update(F.bounds,F.vertices,s.velocity),N>0&&g.rotateAbout(F.position,_,s.position,F.position)}},r.setVelocity=function(s,w){s.positionPrev.x=s.position.x-w.x,s.positionPrev.y=s.position.y-w.y,s.velocity.x=w.x,s.velocity.y=w.y,s.speed=g.magnitude(s.velocity)},r.setAngularVelocity=function(s,w){s.anglePrev=s.angle-w,s.angularVelocity=w,s.angularSpeed=Math.abs(s.angularVelocity)},r.translate=function(s,w){r.setPosition(s,g.add(s.position,w))},r.rotate=function(s,w,_){if(!_)r.setAngle(s,s.angle+w);else{var N=Math.cos(w),F=Math.sin(w),K=s.position.x-_.x,X=s.position.y-_.y;r.setPosition(s,{x:_.x+(K*N-X*F),y:_.y+(K*F+X*N)}),r.setAngle(s,s.angle+w)}},r.scale=function(s,w,_,N){var F=0,K=0;N=N||s.position;for(var X=0;X<s.parts.length;X++){var L=s.parts[X];c.scale(L.vertices,w,_,N),L.axes=I.fromVertices(L.vertices),L.area=c.area(L.vertices),r.setMass(L,s.density*L.area),c.translate(L.vertices,{x:-L.position.x,y:-L.position.y}),r.setInertia(L,r._inertiaScale*c.inertia(L.vertices,L.mass)),c.translate(L.vertices,{x:L.position.x,y:L.position.y}),X>0&&(F+=L.area,K+=L.inertia),L.position.x=N.x+(L.position.x-N.x)*w,L.position.y=N.y+(L.position.y-N.y)*_,x.update(L.bounds,L.vertices,s.velocity)}s.parts.length>1&&(s.area=F,s.isStatic||(r.setMass(s,s.density*F),r.setInertia(s,K))),s.circleRadius&&(w===_?s.circleRadius*=w:s.circleRadius=null)},r.update=function(s,w,_,N){var F=Math.pow(w*_*s.timeScale,2),K=1-s.frictionAir*_*s.timeScale,X=s.position.x-s.positionPrev.x,L=s.position.y-s.positionPrev.y;s.velocity.x=X*K*N+s.force.x/s.mass*F,s.velocity.y=L*K*N+s.force.y/s.mass*F,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.position.x+=s.velocity.x,s.position.y+=s.velocity.y,s.angularVelocity=(s.angle-s.anglePrev)*K*N+s.torque/s.inertia*F,s.anglePrev=s.angle,s.angle+=s.angularVelocity,s.speed=g.magnitude(s.velocity),s.angularSpeed=Math.abs(s.angularVelocity);for(var W=0;W<s.parts.length;W++){var $=s.parts[W];c.translate($.vertices,s.velocity),W>0&&($.position.x+=s.velocity.x,$.position.y+=s.velocity.y),s.angularVelocity!==0&&(c.rotate($.vertices,s.angularVelocity,s.position),I.rotate($.axes,s.angularVelocity),W>0&&g.rotateAbout($.position,s.angularVelocity,s.position,$.position)),x.update($.bounds,$.vertices,s.velocity)}},r.applyForce=function(s,w,_){s.force.x+=_.x,s.force.y+=_.y;var N={x:w.x-s.position.x,y:w.y-s.position.y};s.torque+=N.x*_.y-N.y*_.x},r._totalProperties=function(s){for(var w={mass:0,area:0,inertia:0,centre:{x:0,y:0}},_=s.parts.length===1?0:1;_<s.parts.length;_++){var N=s.parts[_],F=N.mass!==1/0?N.mass:1;w.mass+=F,w.area+=N.area,w.inertia+=N.inertia,w.centre=g.add(w.centre,g.mult(N.position,F))}return w.centre=g.div(w.centre,w.mass),w}})()},function(m,D,v){var r={};m.exports=r;var c=v(4);(function(){r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(g,h){for(var O=h*h*h,x=0;x<g.length;x++){var I=g[x],S=I.speed*I.speed+I.angularSpeed*I.angularSpeed;if(I.force.x!==0||I.force.y!==0){r.set(I,!1);continue}var s=Math.min(I.motion,S),w=Math.max(I.motion,S);I.motion=r._minBias*s+(1-r._minBias)*w,I.sleepThreshold>0&&I.motion<r._motionSleepThreshold*O?(I.sleepCounter+=1,I.sleepCounter>=I.sleepThreshold&&r.set(I,!0)):I.sleepCounter>0&&(I.sleepCounter-=1)}},r.afterCollisions=function(g,h){for(var O=h*h*h,x=0;x<g.length;x++){var I=g[x];if(!!I.isActive){var S=I.collision,s=S.bodyA.parent,w=S.bodyB.parent;if(!(s.isSleeping&&w.isSleeping||s.isStatic||w.isStatic)&&(s.isSleeping||w.isSleeping)){var _=s.isSleeping&&!s.isStatic?s:w,N=_===s?w:s;!_.isStatic&&N.motion>r._motionWakeThreshold*O&&r.set(_,!1)}}}},r.set=function(g,h){var O=g.isSleeping;h?(g.isSleeping=!0,g.sleepCounter=g.sleepThreshold,g.positionImpulse.x=0,g.positionImpulse.y=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.speed=0,g.angularSpeed=0,g.motion=0,O||c.trigger(g,"sleepStart")):(g.isSleeping=!1,g.sleepCounter=0,O&&c.trigger(g,"sleepEnd"))}})()},function(m,D,v){var r={};m.exports=r;var c=v(3),g=v(9);(function(){var h=[],O={overlap:0,axis:null},x={overlap:0,axis:null};r.create=function(I,S){return{pair:null,collided:!1,bodyA:I,bodyB:S,parentA:I.parent,parentB:S.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},r.collides=function(I,S,s){if(r._overlapAxes(O,I.vertices,S.vertices,I.axes),O.overlap<=0||(r._overlapAxes(x,S.vertices,I.vertices,S.axes),x.overlap<=0))return null;var w=s&&s.table[g.id(I,S)],_;w?_=w.collision:(_=r.create(I,S),_.collided=!0,_.bodyA=I.id<S.id?I:S,_.bodyB=I.id<S.id?S:I,_.parentA=_.bodyA.parent,_.parentB=_.bodyB.parent),I=_.bodyA,S=_.bodyB;var N;O.overlap<x.overlap?N=O:N=x;var F=_.normal,K=_.supports,X=N.axis,L=X.x,W=X.y;L*(S.position.x-I.position.x)+W*(S.position.y-I.position.y)<0?(F.x=L,F.y=W):(F.x=-L,F.y=-W),_.tangent.x=-F.y,_.tangent.y=F.x,_.depth=N.overlap,_.penetration.x=F.x*_.depth,_.penetration.y=F.y*_.depth;var $=r._findSupports(I,S,F,1),q=0;if(c.contains(I.vertices,$[0])&&(K[q++]=$[0]),c.contains(I.vertices,$[1])&&(K[q++]=$[1]),q<2){var ee=r._findSupports(S,I,F,-1);c.contains(S.vertices,ee[0])&&(K[q++]=ee[0]),q<2&&c.contains(S.vertices,ee[1])&&(K[q++]=ee[1])}return q===0&&(K[q++]=$[0]),K.length=q,_},r._overlapAxes=function(I,S,s,w){var _=S.length,N=s.length,F=S[0].x,K=S[0].y,X=s[0].x,L=s[0].y,W=w.length,$=Number.MAX_VALUE,q=0,ee,J,ae,ne,fe,pe;for(fe=0;fe<W;fe++){var ce=w[fe],Ce=ce.x,de=ce.y,Oe=F*Ce+K*de,Se=X*Ce+L*de,we=Oe,Me=Se;for(pe=1;pe<_;pe+=1)ne=S[pe].x*Ce+S[pe].y*de,ne>we?we=ne:ne<Oe&&(Oe=ne);for(pe=1;pe<N;pe+=1)ne=s[pe].x*Ce+s[pe].y*de,ne>Me?Me=ne:ne<Se&&(Se=ne);if(J=we-Se,ae=Me-Oe,ee=J<ae?J:ae,ee<$&&($=ee,q=fe,ee<=0))break}I.axis=w[q],I.overlap=$},r._projectToAxis=function(I,S,s){for(var w=S[0].x*s.x+S[0].y*s.y,_=w,N=1;N<S.length;N+=1){var F=S[N].x*s.x+S[N].y*s.y;F>_?_=F:F<w&&(w=F)}I.min=w,I.max=_},r._findSupports=function(I,S,s,w){var _=S.vertices,N=_.length,F=I.position.x,K=I.position.y,X=s.x*w,L=s.y*w,W=Number.MAX_VALUE,$,q,ee,J,ae;for(ae=0;ae<N;ae+=1)q=_[ae],J=X*(F-q.x)+L*(K-q.y),J<W&&(W=J,$=q);return ee=_[(N+$.index-1)%N],W=X*(F-ee.x)+L*(K-ee.y),q=_[($.index+1)%N],X*(F-q.x)+L*(K-q.y)<W?(h[0]=$,h[1]=q,h):(h[0]=$,h[1]=ee,h)}})()},function(m,D,v){var r={};m.exports=r;var c=v(17);(function(){r.create=function(g,h){var O=g.bodyA,x=g.bodyB,I={id:r.id(O,x),bodyA:O,bodyB:x,collision:g,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:O.isSensor||x.isSensor,timeCreated:h,timeUpdated:h,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return r.update(I,g,h),I},r.update=function(g,h,O){var x=g.contacts,I=h.supports,S=g.activeContacts,s=h.parentA,w=h.parentB,_=s.vertices.length;g.isActive=!0,g.timeUpdated=O,g.collision=h,g.separation=h.depth,g.inverseMass=s.inverseMass+w.inverseMass,g.friction=s.friction<w.friction?s.friction:w.friction,g.frictionStatic=s.frictionStatic>w.frictionStatic?s.frictionStatic:w.frictionStatic,g.restitution=s.restitution>w.restitution?s.restitution:w.restitution,g.slop=s.slop>w.slop?s.slop:w.slop,h.pair=g,S.length=0;for(var N=0;N<I.length;N++){var F=I[N],K=F.body===s?F.index:_+F.index,X=x[K];X?S.push(X):S.push(x[K]=c.create(F))}},r.setActive=function(g,h,O){h?(g.isActive=!0,g.timeUpdated=O):(g.isActive=!1,g.activeContacts.length=0)},r.id=function(g,h){return g.id<h.id?"A"+g.id+"B"+h.id:"A"+h.id+"B"+g.id}})()},function(m,D,v){var r={};m.exports=r;var c=v(3),g=v(2),h=v(7),O=v(1),x=v(11),I=v(0);(function(){r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(S){var s=S;s.bodyA&&!s.pointA&&(s.pointA={x:0,y:0}),s.bodyB&&!s.pointB&&(s.pointB={x:0,y:0});var w=s.bodyA?g.add(s.bodyA.position,s.pointA):s.pointA,_=s.bodyB?g.add(s.bodyB.position,s.pointB):s.pointB,N=g.magnitude(g.sub(w,_));s.length=typeof s.length<"u"?s.length:N,s.id=s.id||I.nextId(),s.label=s.label||"Constraint",s.type="constraint",s.stiffness=s.stiffness||(s.length>0?1:.7),s.damping=s.damping||0,s.angularStiffness=s.angularStiffness||0,s.angleA=s.bodyA?s.bodyA.angle:s.angleA,s.angleB=s.bodyB?s.bodyB.angle:s.angleB,s.plugin={};var F={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return s.length===0&&s.stiffness>.1?(F.type="pin",F.anchors=!1):s.stiffness<.9&&(F.type="spring"),s.render=I.extend(F,s.render),s},r.preSolveAll=function(S){for(var s=0;s<S.length;s+=1){var w=S[s],_=w.constraintImpulse;w.isStatic||_.x===0&&_.y===0&&_.angle===0||(w.position.x+=_.x,w.position.y+=_.y,w.angle+=_.angle)}},r.solveAll=function(S,s){for(var w=0;w<S.length;w+=1){var _=S[w],N=!_.bodyA||_.bodyA&&_.bodyA.isStatic,F=!_.bodyB||_.bodyB&&_.bodyB.isStatic;(N||F)&&r.solve(S[w],s)}for(w=0;w<S.length;w+=1)_=S[w],N=!_.bodyA||_.bodyA&&_.bodyA.isStatic,F=!_.bodyB||_.bodyB&&_.bodyB.isStatic,!N&&!F&&r.solve(S[w],s)},r.solve=function(S,s){var w=S.bodyA,_=S.bodyB,N=S.pointA,F=S.pointB;if(!(!w&&!_)){w&&!w.isStatic&&(g.rotate(N,w.angle-S.angleA,N),S.angleA=w.angle),_&&!_.isStatic&&(g.rotate(F,_.angle-S.angleB,F),S.angleB=_.angle);var K=N,X=F;if(w&&(K=g.add(w.position,N)),_&&(X=g.add(_.position,F)),!(!K||!X)){var L=g.sub(K,X),W=g.magnitude(L);W<r._minLength&&(W=r._minLength);var $=(W-S.length)/W,q=S.stiffness<1?S.stiffness*s:S.stiffness,ee=g.mult(L,$*q),J=(w?w.inverseMass:0)+(_?_.inverseMass:0),ae=(w?w.inverseInertia:0)+(_?_.inverseInertia:0),ne=J+ae,fe,pe,ce,Ce,de;if(S.damping){var Oe=g.create();ce=g.div(L,W),de=g.sub(_&&g.sub(_.position,_.positionPrev)||Oe,w&&g.sub(w.position,w.positionPrev)||Oe),Ce=g.dot(ce,de)}w&&!w.isStatic&&(pe=w.inverseMass/J,w.constraintImpulse.x-=ee.x*pe,w.constraintImpulse.y-=ee.y*pe,w.position.x-=ee.x*pe,w.position.y-=ee.y*pe,S.damping&&(w.positionPrev.x-=S.damping*ce.x*Ce*pe,w.positionPrev.y-=S.damping*ce.y*Ce*pe),fe=g.cross(N,ee)/ne*r._torqueDampen*w.inverseInertia*(1-S.angularStiffness),w.constraintImpulse.angle-=fe,w.angle-=fe),_&&!_.isStatic&&(pe=_.inverseMass/J,_.constraintImpulse.x+=ee.x*pe,_.constraintImpulse.y+=ee.y*pe,_.position.x+=ee.x*pe,_.position.y+=ee.y*pe,S.damping&&(_.positionPrev.x+=S.damping*ce.x*Ce*pe,_.positionPrev.y+=S.damping*ce.y*Ce*pe),fe=g.cross(F,ee)/ne*r._torqueDampen*_.inverseInertia*(1-S.angularStiffness),_.constraintImpulse.angle+=fe,_.angle+=fe)}}},r.postSolveAll=function(S){for(var s=0;s<S.length;s++){var w=S[s],_=w.constraintImpulse;if(!(w.isStatic||_.x===0&&_.y===0&&_.angle===0)){h.set(w,!1);for(var N=0;N<w.parts.length;N++){var F=w.parts[N];c.translate(F.vertices,_),N>0&&(F.position.x+=_.x,F.position.y+=_.y),_.angle!==0&&(c.rotate(F.vertices,_.angle,w.position),x.rotate(F.axes,_.angle),N>0&&g.rotateAbout(F.position,_.angle,w.position,F.position)),O.update(F.bounds,F.vertices,w.velocity)}_.angle*=r._warming,_.x*=r._warming,_.y*=r._warming}}},r.pointAWorld=function(S){return{x:(S.bodyA?S.bodyA.position.x:0)+S.pointA.x,y:(S.bodyA?S.bodyA.position.y:0)+S.pointA.y}},r.pointBWorld=function(S){return{x:(S.bodyB?S.bodyB.position.x:0)+S.pointB.x,y:(S.bodyB?S.bodyB.position.y:0)+S.pointB.y}}})()},function(m,D,v){var r={};m.exports=r;var c=v(2),g=v(0);(function(){r.fromVertices=function(h){for(var O={},x=0;x<h.length;x++){var I=(x+1)%h.length,S=c.normalise({x:h[I].y-h[x].y,y:h[x].x-h[I].x}),s=S.y===0?1/0:S.x/S.y;s=s.toFixed(3).toString(),O[s]=S}return g.values(O)},r.rotate=function(h,O){if(O!==0)for(var x=Math.cos(O),I=Math.sin(O),S=0;S<h.length;S++){var s=h[S],w;w=s.x*x-s.y*I,s.y=s.x*I+s.y*x,s.x=w}}})()},function(m,D,v){var r={};m.exports=r;var c=v(3),g=v(0),h=v(6),O=v(1),x=v(2);(function(){r.rectangle=function(I,S,s,w,_){_=_||{};var N={label:"Rectangle Body",position:{x:I,y:S},vertices:c.fromPath("L 0 0 L "+s+" 0 L "+s+" "+w+" L 0 "+w)};if(_.chamfer){var F=_.chamfer;N.vertices=c.chamfer(N.vertices,F.radius,F.quality,F.qualityMin,F.qualityMax),delete _.chamfer}return h.create(g.extend({},N,_))},r.trapezoid=function(I,S,s,w,_,N){N=N||{},_*=.5;var F=(1-_*2)*s,K=s*_,X=K+F,L=X+K,W;_<.5?W="L 0 0 L "+K+" "+-w+" L "+X+" "+-w+" L "+L+" 0":W="L 0 0 L "+X+" "+-w+" L "+L+" 0";var $={label:"Trapezoid Body",position:{x:I,y:S},vertices:c.fromPath(W)};if(N.chamfer){var q=N.chamfer;$.vertices=c.chamfer($.vertices,q.radius,q.quality,q.qualityMin,q.qualityMax),delete N.chamfer}return h.create(g.extend({},$,N))},r.circle=function(I,S,s,w,_){w=w||{};var N={label:"Circle Body",circleRadius:s};_=_||25;var F=Math.ceil(Math.max(10,Math.min(_,s)));return F%2===1&&(F+=1),r.polygon(I,S,F,s,g.extend({},N,w))},r.polygon=function(I,S,s,w,_){if(_=_||{},s<3)return r.circle(I,S,w,_);for(var N=2*Math.PI/s,F="",K=N*.5,X=0;X<s;X+=1){var L=K+X*N,W=Math.cos(L)*w,$=Math.sin(L)*w;F+="L "+W.toFixed(3)+" "+$.toFixed(3)+" "}var q={label:"Polygon Body",position:{x:I,y:S},vertices:c.fromPath(F)};if(_.chamfer){var ee=_.chamfer;q.vertices=c.chamfer(q.vertices,ee.radius,ee.quality,ee.qualityMin,ee.qualityMax),delete _.chamfer}return h.create(g.extend({},q,_))},r.fromVertices=function(I,S,s,w,_,N,F,K){var X=g.getDecomp(),L,W,$,q,ee,J,ae,ne,fe,pe,ce;for(L=Boolean(X&&X.quickDecomp),w=w||{},$=[],_=typeof _<"u"?_:!1,N=typeof N<"u"?N:.01,F=typeof F<"u"?F:10,K=typeof K<"u"?K:.01,g.isArray(s[0])||(s=[s]),pe=0;pe<s.length;pe+=1)if(J=s[pe],q=c.isConvex(J),ee=!q,ee&&!L&&g.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),q||!L)q?J=c.clockwiseSort(J):J=c.hull(J),$.push({position:{x:I,y:S},vertices:J});else{var Ce=J.map(function(rt){return[rt.x,rt.y]});X.makeCCW(Ce),N!==!1&&X.removeCollinearPoints(Ce,N),K!==!1&&X.removeDuplicatePoints&&X.removeDuplicatePoints(Ce,K);var de=X.quickDecomp(Ce);for(ae=0;ae<de.length;ae++){var Oe=de[ae],Se=Oe.map(function(rt){return{x:rt[0],y:rt[1]}});F>0&&c.area(Se)<F||$.push({position:c.centre(Se),vertices:Se})}}for(ae=0;ae<$.length;ae++)$[ae]=h.create(g.extend($[ae],w));if(_){var we=5;for(ae=0;ae<$.length;ae++){var Me=$[ae];for(ne=ae+1;ne<$.length;ne++){var je=$[ne];if(O.overlaps(Me.bounds,je.bounds)){var Ke=Me.vertices,qe=je.vertices;for(fe=0;fe<Me.vertices.length;fe++)for(ce=0;ce<je.vertices.length;ce++){var ht=x.magnitudeSquared(x.sub(Ke[(fe+1)%Ke.length],qe[ce])),We=x.magnitudeSquared(x.sub(Ke[fe],qe[(ce+1)%qe.length]));ht<we&&We<we&&(Ke[fe].isInternal=!0,qe[ce].isInternal=!0)}}}}}return $.length>1?(W=h.create(g.extend({parts:$.slice(0)},w)),h.setPosition(W,{x:I,y:S}),W):$[0]}})()},function(m,D,v){var r={};m.exports=r;var c=v(0);(function(){r.create=function(g){var h={};return g||c.log("Mouse.create: element was undefined, defaulting to document.body","warn"),h.element=g||document.body,h.absolute={x:0,y:0},h.position={x:0,y:0},h.mousedownPosition={x:0,y:0},h.mouseupPosition={x:0,y:0},h.offset={x:0,y:0},h.scale={x:1,y:1},h.wheelDelta=0,h.button=-1,h.pixelRatio=parseInt(h.element.getAttribute("data-pixel-ratio"),10)||1,h.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},h.mousemove=function(O){var x=r._getRelativeMousePosition(O,h.element,h.pixelRatio),I=O.changedTouches;I&&(h.button=0,O.preventDefault()),h.absolute.x=x.x,h.absolute.y=x.y,h.position.x=h.absolute.x*h.scale.x+h.offset.x,h.position.y=h.absolute.y*h.scale.y+h.offset.y,h.sourceEvents.mousemove=O},h.mousedown=function(O){var x=r._getRelativeMousePosition(O,h.element,h.pixelRatio),I=O.changedTouches;I?(h.button=0,O.preventDefault()):h.button=O.button,h.absolute.x=x.x,h.absolute.y=x.y,h.position.x=h.absolute.x*h.scale.x+h.offset.x,h.position.y=h.absolute.y*h.scale.y+h.offset.y,h.mousedownPosition.x=h.position.x,h.mousedownPosition.y=h.position.y,h.sourceEvents.mousedown=O},h.mouseup=function(O){var x=r._getRelativeMousePosition(O,h.element,h.pixelRatio),I=O.changedTouches;I&&O.preventDefault(),h.button=-1,h.absolute.x=x.x,h.absolute.y=x.y,h.position.x=h.absolute.x*h.scale.x+h.offset.x,h.position.y=h.absolute.y*h.scale.y+h.offset.y,h.mouseupPosition.x=h.position.x,h.mouseupPosition.y=h.position.y,h.sourceEvents.mouseup=O},h.mousewheel=function(O){h.wheelDelta=Math.max(-1,Math.min(1,O.wheelDelta||-O.detail)),O.preventDefault()},r.setElement(h,h.element),h},r.setElement=function(g,h){g.element=h,h.addEventListener("mousemove",g.mousemove),h.addEventListener("mousedown",g.mousedown),h.addEventListener("mouseup",g.mouseup),h.addEventListener("mousewheel",g.mousewheel),h.addEventListener("DOMMouseScroll",g.mousewheel),h.addEventListener("touchmove",g.mousemove),h.addEventListener("touchstart",g.mousedown),h.addEventListener("touchend",g.mouseup)},r.clearSourceEvents=function(g){g.sourceEvents.mousemove=null,g.sourceEvents.mousedown=null,g.sourceEvents.mouseup=null,g.sourceEvents.mousewheel=null,g.wheelDelta=0},r.setOffset=function(g,h){g.offset.x=h.x,g.offset.y=h.y,g.position.x=g.absolute.x*g.scale.x+g.offset.x,g.position.y=g.absolute.y*g.scale.y+g.offset.y},r.setScale=function(g,h){g.scale.x=h.x,g.scale.y=h.y,g.position.x=g.absolute.x*g.scale.x+g.offset.x,g.position.y=g.absolute.y*g.scale.y+g.offset.y},r._getRelativeMousePosition=function(g,h,O){var x=h.getBoundingClientRect(),I=document.documentElement||document.body.parentNode||document.body,S=window.pageXOffset!==void 0?window.pageXOffset:I.scrollLeft,s=window.pageYOffset!==void 0?window.pageYOffset:I.scrollTop,w=g.changedTouches,_,N;return w?(_=w[0].pageX-x.left-S,N=w[0].pageY-x.top-s):(_=g.pageX-x.left-S,N=g.pageY-x.top-s),{x:_/(h.clientWidth/(h.width||h.clientWidth)*O),y:N/(h.clientHeight/(h.height||h.clientHeight)*O)}}})()},function(m,D,v){var r={};m.exports=r;var c=v(0),g=v(8);(function(){r.create=function(h){var O={bodies:[],pairs:null};return c.extend(O,h)},r.setBodies=function(h,O){h.bodies=O.slice(0)},r.clear=function(h){h.bodies=[]},r.collisions=function(h){var O=[],x=h.pairs,I=h.bodies,S=I.length,s=r.canCollide,w=g.collides,_,N;for(I.sort(r._compareBoundsX),_=0;_<S;_++){var F=I[_],K=F.bounds,X=F.bounds.max.x,L=F.bounds.max.y,W=F.bounds.min.y,$=F.isStatic||F.isSleeping,q=F.parts.length,ee=q===1;for(N=_+1;N<S;N++){var J=I[N],ae=J.bounds;if(ae.min.x>X)break;if(!(L<ae.min.y||W>ae.max.y)&&!($&&(J.isStatic||J.isSleeping))&&!!s(F.collisionFilter,J.collisionFilter)){var ne=J.parts.length;if(ee&&ne===1){var fe=w(F,J,x);fe&&O.push(fe)}else for(var pe=q>1?1:0,ce=ne>1?1:0,Ce=pe;Ce<q;Ce++)for(var de=F.parts[Ce],K=de.bounds,Oe=ce;Oe<ne;Oe++){var Se=J.parts[Oe],ae=Se.bounds;if(!(K.min.x>ae.max.x||K.max.x<ae.min.x||K.max.y<ae.min.y||K.min.y>ae.max.y)){var fe=w(de,Se,x);fe&&O.push(fe)}}}}}return O},r.canCollide=function(h,O){return h.group===O.group&&h.group!==0?h.group>0:(h.mask&O.category)!==0&&(O.mask&h.category)!==0},r._compareBoundsX=function(h,O){return h.bounds.min.x-O.bounds.min.x}})()},function(m,D,v){var r={};m.exports=r;var c=v(0);(function(){r._registry={},r.register=function(g){if(r.isPlugin(g)||c.warn("Plugin.register:",r.toString(g),"does not implement all required fields."),g.name in r._registry){var h=r._registry[g.name],O=r.versionParse(g.version).number,x=r.versionParse(h.version).number;O>x?(c.warn("Plugin.register:",r.toString(h),"was upgraded to",r.toString(g)),r._registry[g.name]=g):O<x?c.warn("Plugin.register:",r.toString(h),"can not be downgraded to",r.toString(g)):g!==h&&c.warn("Plugin.register:",r.toString(g),"is already registered to different plugin object")}else r._registry[g.name]=g;return g},r.resolve=function(g){return r._registry[r.dependencyParse(g).name]},r.toString=function(g){return typeof g=="string"?g:(g.name||"anonymous")+"@"+(g.version||g.range||"0.0.0")},r.isPlugin=function(g){return g&&g.name&&g.version&&g.install},r.isUsed=function(g,h){return g.used.indexOf(h)>-1},r.isFor=function(g,h){var O=g.for&&r.dependencyParse(g.for);return!g.for||h.name===O.name&&r.versionSatisfies(h.version,O.range)},r.use=function(g,h){if(g.uses=(g.uses||[]).concat(h||[]),g.uses.length===0){c.warn("Plugin.use:",r.toString(g),"does not specify any dependencies to install.");return}for(var O=r.dependencies(g),x=c.topologicalSort(O),I=[],S=0;S<x.length;S+=1)if(x[S]!==g.name){var s=r.resolve(x[S]);if(!s){I.push("\u274C "+x[S]);continue}r.isUsed(g,s.name)||(r.isFor(s,g)||(c.warn("Plugin.use:",r.toString(s),"is for",s.for,"but installed on",r.toString(g)+"."),s._warned=!0),s.install?s.install(g):(c.warn("Plugin.use:",r.toString(s),"does not specify an install function."),s._warned=!0),s._warned?(I.push("\u{1F536} "+r.toString(s)),delete s._warned):I.push("\u2705 "+r.toString(s)),g.used.push(s.name))}I.length>0&&c.info(I.join("  "))},r.dependencies=function(g,h){var O=r.dependencyParse(g),x=O.name;if(h=h||{},!(x in h)){g=r.resolve(g)||g,h[x]=c.map(g.uses||[],function(S){r.isPlugin(S)&&r.register(S);var s=r.dependencyParse(S),w=r.resolve(S);return w&&!r.versionSatisfies(w.version,s.range)?(c.warn("Plugin.dependencies:",r.toString(w),"does not satisfy",r.toString(s),"used by",r.toString(O)+"."),w._warned=!0,g._warned=!0):w||(c.warn("Plugin.dependencies:",r.toString(S),"used by",r.toString(O),"could not be resolved."),g._warned=!0),s.name});for(var I=0;I<h[x].length;I+=1)r.dependencies(h[x][I],h);return h}},r.dependencyParse=function(g){if(c.isString(g)){var h=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return h.test(g)||c.warn("Plugin.dependencyParse:",g,"is not a valid dependency string."),{name:g.split("@")[0],range:g.split("@")[1]||"*"}}return{name:g.name,range:g.range||g.version}},r.versionParse=function(g){var h=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;h.test(g)||c.warn("Plugin.versionParse:",g,"is not a valid version or range.");var O=h.exec(g),x=Number(O[4]),I=Number(O[5]),S=Number(O[6]);return{isRange:Boolean(O[1]||O[2]),version:O[3],range:g,operator:O[1]||O[2]||"",major:x,minor:I,patch:S,parts:[x,I,S],prerelease:O[7],number:x*1e8+I*1e4+S}},r.versionSatisfies=function(g,h){h=h||"*";var O=r.versionParse(h),x=r.versionParse(g);if(O.isRange){if(O.operator==="*"||g==="*")return!0;if(O.operator===">")return x.number>O.number;if(O.operator===">=")return x.number>=O.number;if(O.operator==="~")return x.major===O.major&&x.minor===O.minor&&x.patch>=O.patch;if(O.operator==="^")return O.major>0?x.major===O.major&&x.number>=O.number:O.minor>0?x.minor===O.minor&&x.patch>=O.patch:x.patch===O.patch}return g===h||g==="*"}})()},function(m,D,v){var r={};m.exports=r;var c=v(0),g=v(5),h=v(1),O=v(4),x=v(2),I=v(13);(function(){var S,s;typeof window<"u"&&(S=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(L){window.setTimeout(function(){L(c.now())},1e3/60)},s=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r._goodFps=30,r._goodDelta=1e3/60,r.create=function(L){var W={controller:r,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!L.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},$=c.extend(W,L);return $.canvas&&($.canvas.width=$.options.width||$.canvas.width,$.canvas.height=$.options.height||$.canvas.height),$.mouse=L.mouse,$.engine=L.engine,$.canvas=$.canvas||N($.options.width,$.options.height),$.context=$.canvas.getContext("2d"),$.textures={},$.bounds=$.bounds||{min:{x:0,y:0},max:{x:$.canvas.width,y:$.canvas.height}},$.options.showBroadphase=!1,$.options.pixelRatio!==1&&r.setPixelRatio($,$.options.pixelRatio),c.isElement($.element)?$.element.appendChild($.canvas):$.canvas.parentNode||c.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),$},r.run=function(L){T(function W($){L.frameRequestId=S(W),w(L,$),r.world(L,$),(L.options.showStats||L.options.showDebug)&&r.stats(L,L.context,$),(L.options.showPerformance||L.options.showDebug)&&r.performance(L,L.context,$)},"loop")()},r.stop=function(L){s(L.frameRequestId)},r.setPixelRatio=function(L,W){var $=L.options,q=L.canvas;W==="auto"&&(W=F(q)),$.pixelRatio=W,q.setAttribute("data-pixel-ratio",W),q.width=$.width*W,q.height=$.height*W,q.style.width=$.width+"px",q.style.height=$.height+"px"},r.lookAt=function(L,W,$,q){q=typeof q<"u"?q:!0,W=c.isArray(W)?W:[W],$=$||{x:0,y:0};for(var ee={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},J=0;J<W.length;J+=1){var ae=W[J],ne=ae.bounds?ae.bounds.min:ae.min||ae.position||ae,fe=ae.bounds?ae.bounds.max:ae.max||ae.position||ae;ne&&fe&&(ne.x<ee.min.x&&(ee.min.x=ne.x),fe.x>ee.max.x&&(ee.max.x=fe.x),ne.y<ee.min.y&&(ee.min.y=ne.y),fe.y>ee.max.y&&(ee.max.y=fe.y))}var pe=ee.max.x-ee.min.x+2*$.x,ce=ee.max.y-ee.min.y+2*$.y,Ce=L.canvas.height,de=L.canvas.width,Oe=de/Ce,Se=pe/ce,we=1,Me=1;Se>Oe?Me=Se/Oe:we=Oe/Se,L.options.hasBounds=!0,L.bounds.min.x=ee.min.x,L.bounds.max.x=ee.min.x+pe*we,L.bounds.min.y=ee.min.y,L.bounds.max.y=ee.min.y+ce*Me,q&&(L.bounds.min.x+=pe*.5-pe*we*.5,L.bounds.max.x+=pe*.5-pe*we*.5,L.bounds.min.y+=ce*.5-ce*Me*.5,L.bounds.max.y+=ce*.5-ce*Me*.5),L.bounds.min.x-=$.x,L.bounds.max.x-=$.x,L.bounds.min.y-=$.y,L.bounds.max.y-=$.y,L.mouse&&(I.setScale(L.mouse,{x:(L.bounds.max.x-L.bounds.min.x)/L.canvas.width,y:(L.bounds.max.y-L.bounds.min.y)/L.canvas.height}),I.setOffset(L.mouse,L.bounds.min))},r.startViewTransform=function(L){var W=L.bounds.max.x-L.bounds.min.x,$=L.bounds.max.y-L.bounds.min.y,q=W/L.options.width,ee=$/L.options.height;L.context.setTransform(L.options.pixelRatio/q,0,0,L.options.pixelRatio/ee,0,0),L.context.translate(-L.bounds.min.x,-L.bounds.min.y)},r.endViewTransform=function(L){L.context.setTransform(L.options.pixelRatio,0,0,L.options.pixelRatio,0,0)},r.world=function(L,W){var $=c.now(),q=L.engine,ee=q.world,J=L.canvas,ae=L.context,ne=L.options,fe=L.timing,pe=g.allBodies(ee),ce=g.allConstraints(ee),Ce=ne.wireframes?ne.wireframeBackground:ne.background,de=[],Oe=[],Se,we={timestamp:q.timing.timestamp};if(O.trigger(L,"beforeRender",we),L.currentBackground!==Ce&&X(L,Ce),ae.globalCompositeOperation="source-in",ae.fillStyle="transparent",ae.fillRect(0,0,J.width,J.height),ae.globalCompositeOperation="source-over",ne.hasBounds){for(Se=0;Se<pe.length;Se++){var Me=pe[Se];h.overlaps(Me.bounds,L.bounds)&&de.push(Me)}for(Se=0;Se<ce.length;Se++){var je=ce[Se],Ke=je.bodyA,qe=je.bodyB,ht=je.pointA,We=je.pointB;Ke&&(ht=x.add(Ke.position,je.pointA)),qe&&(We=x.add(qe.position,je.pointB)),!(!ht||!We)&&(h.contains(L.bounds,ht)||h.contains(L.bounds,We))&&Oe.push(je)}r.startViewTransform(L),L.mouse&&(I.setScale(L.mouse,{x:(L.bounds.max.x-L.bounds.min.x)/L.options.width,y:(L.bounds.max.y-L.bounds.min.y)/L.options.height}),I.setOffset(L.mouse,L.bounds.min))}else Oe=ce,de=pe,L.options.pixelRatio!==1&&L.context.setTransform(L.options.pixelRatio,0,0,L.options.pixelRatio,0,0);!ne.wireframes||q.enableSleeping&&ne.showSleeping?r.bodies(L,de,ae):(ne.showConvexHulls&&r.bodyConvexHulls(L,de,ae),r.bodyWireframes(L,de,ae)),ne.showBounds&&r.bodyBounds(L,de,ae),(ne.showAxes||ne.showAngleIndicator)&&r.bodyAxes(L,de,ae),ne.showPositions&&r.bodyPositions(L,de,ae),ne.showVelocity&&r.bodyVelocity(L,de,ae),ne.showIds&&r.bodyIds(L,de,ae),ne.showSeparations&&r.separations(L,q.pairs.list,ae),ne.showCollisions&&r.collisions(L,q.pairs.list,ae),ne.showVertexNumbers&&r.vertexNumbers(L,de,ae),ne.showMousePosition&&r.mousePosition(L,L.mouse,ae),r.constraints(Oe,ae),ne.hasBounds&&r.endViewTransform(L),O.trigger(L,"afterRender",we),fe.lastElapsed=c.now()-$},r.stats=function(L,W,$){for(var q=L.engine,ee=q.world,J=g.allBodies(ee),ae=0,ne=55,fe=44,pe=0,ce=0,Ce=0;Ce<J.length;Ce+=1)ae+=J[Ce].parts.length;var de={Part:ae,Body:J.length,Cons:g.allConstraints(ee).length,Comp:g.allComposites(ee).length,Pair:q.pairs.list.length};W.fillStyle="#0e0f19",W.fillRect(pe,ce,ne*5.5,fe),W.font="12px Arial",W.textBaseline="top",W.textAlign="right";for(var Oe in de){var Se=de[Oe];W.fillStyle="#aaa",W.fillText(Oe,pe+ne,ce+8),W.fillStyle="#eee",W.fillText(Se,pe+ne,ce+26),pe+=ne}},r.performance=function(L,W){var $=L.engine,q=L.timing,ee=q.deltaHistory,J=q.elapsedHistory,ae=q.timestampElapsedHistory,ne=q.engineDeltaHistory,fe=q.engineElapsedHistory,pe=$.timing.lastDelta,ce=_(ee),Ce=_(J),de=_(ne),Oe=_(fe),Se=_(ae),we=Se/ce||0,Me=1e3/ce||0,je=4,Ke=12,qe=60,ht=34,We=10,rt=69;W.fillStyle="#0e0f19",W.fillRect(0,50,Ke*4+qe*5+22,ht),r.status(W,We,rt,qe,je,ee.length,Math.round(Me)+" fps",Me/r._goodFps,function(ot){return ee[ot]/ce-1}),r.status(W,We+Ke+qe,rt,qe,je,ne.length,pe.toFixed(2)+" dt",r._goodDelta/pe,function(ot){return ne[ot]/de-1}),r.status(W,We+(Ke+qe)*2,rt,qe,je,fe.length,Oe.toFixed(2)+" ut",1-Oe/r._goodFps,function(ot){return fe[ot]/Oe-1}),r.status(W,We+(Ke+qe)*3,rt,qe,je,J.length,Ce.toFixed(2)+" rt",1-Ce/r._goodFps,function(ot){return J[ot]/Ce-1}),r.status(W,We+(Ke+qe)*4,rt,qe,je,ae.length,we.toFixed(2)+" x",we*we*we,function(ot){return(ae[ot]/ee[ot]/we||0)-1})},r.status=function(L,W,$,q,ee,J,ae,ne,fe){L.strokeStyle="#888",L.fillStyle="#444",L.lineWidth=1,L.fillRect(W,$+7,q,1),L.beginPath(),L.moveTo(W,$+7-ee*c.clamp(.4*fe(0),-2,2));for(var pe=0;pe<q;pe+=1)L.lineTo(W+pe,$+7-(pe<J?ee*c.clamp(.4*fe(pe),-2,2):0));L.stroke(),L.fillStyle="hsl("+c.clamp(25+95*ne,0,120)+",100%,60%)",L.fillRect(W,$-7,4,4),L.font="12px Arial",L.textBaseline="middle",L.textAlign="right",L.fillStyle="#eee",L.fillText(ae,W+q,$-5)},r.constraints=function(L,W){for(var $=W,q=0;q<L.length;q++){var ee=L[q];if(!(!ee.render.visible||!ee.pointA||!ee.pointB)){var J=ee.bodyA,ae=ee.bodyB,ne,fe;if(J?ne=x.add(J.position,ee.pointA):ne=ee.pointA,ee.render.type==="pin")$.beginPath(),$.arc(ne.x,ne.y,3,0,2*Math.PI),$.closePath();else{if(ae?fe=x.add(ae.position,ee.pointB):fe=ee.pointB,$.beginPath(),$.moveTo(ne.x,ne.y),ee.render.type==="spring")for(var pe=x.sub(fe,ne),ce=x.perp(x.normalise(pe)),Ce=Math.ceil(c.clamp(ee.length/5,12,20)),de,Oe=1;Oe<Ce;Oe+=1)de=Oe%2===0?1:-1,$.lineTo(ne.x+pe.x*(Oe/Ce)+ce.x*de*4,ne.y+pe.y*(Oe/Ce)+ce.y*de*4);$.lineTo(fe.x,fe.y)}ee.render.lineWidth&&($.lineWidth=ee.render.lineWidth,$.strokeStyle=ee.render.strokeStyle,$.stroke()),ee.render.anchors&&($.fillStyle=ee.render.strokeStyle,$.beginPath(),$.arc(ne.x,ne.y,3,0,2*Math.PI),$.arc(fe.x,fe.y,3,0,2*Math.PI),$.closePath(),$.fill())}}},r.bodies=function(L,W,$){var q=$;L.engine;var ee=L.options,J=ee.showInternalEdges||!ee.wireframes,ae,ne,fe,pe;for(fe=0;fe<W.length;fe++)if(ae=W[fe],!!ae.render.visible){for(pe=ae.parts.length>1?1:0;pe<ae.parts.length;pe++)if(ne=ae.parts[pe],!!ne.render.visible){if(ee.showSleeping&&ae.isSleeping?q.globalAlpha=.5*ne.render.opacity:ne.render.opacity!==1&&(q.globalAlpha=ne.render.opacity),ne.render.sprite&&ne.render.sprite.texture&&!ee.wireframes){var ce=ne.render.sprite,Ce=K(L,ce.texture);q.translate(ne.position.x,ne.position.y),q.rotate(ne.angle),q.drawImage(Ce,Ce.width*-ce.xOffset*ce.xScale,Ce.height*-ce.yOffset*ce.yScale,Ce.width*ce.xScale,Ce.height*ce.yScale),q.rotate(-ne.angle),q.translate(-ne.position.x,-ne.position.y)}else{if(ne.circleRadius)q.beginPath(),q.arc(ne.position.x,ne.position.y,ne.circleRadius,0,2*Math.PI);else{q.beginPath(),q.moveTo(ne.vertices[0].x,ne.vertices[0].y);for(var de=1;de<ne.vertices.length;de++)!ne.vertices[de-1].isInternal||J?q.lineTo(ne.vertices[de].x,ne.vertices[de].y):q.moveTo(ne.vertices[de].x,ne.vertices[de].y),ne.vertices[de].isInternal&&!J&&q.moveTo(ne.vertices[(de+1)%ne.vertices.length].x,ne.vertices[(de+1)%ne.vertices.length].y);q.lineTo(ne.vertices[0].x,ne.vertices[0].y),q.closePath()}ee.wireframes?(q.lineWidth=1,q.strokeStyle="#bbb",q.stroke()):(q.fillStyle=ne.render.fillStyle,ne.render.lineWidth&&(q.lineWidth=ne.render.lineWidth,q.strokeStyle=ne.render.strokeStyle,q.stroke()),q.fill())}q.globalAlpha=1}}},r.bodyWireframes=function(L,W,$){var q=$,ee=L.options.showInternalEdges,J,ae,ne,fe,pe;for(q.beginPath(),ne=0;ne<W.length;ne++)if(J=W[ne],!!J.render.visible)for(pe=J.parts.length>1?1:0;pe<J.parts.length;pe++){for(ae=J.parts[pe],q.moveTo(ae.vertices[0].x,ae.vertices[0].y),fe=1;fe<ae.vertices.length;fe++)!ae.vertices[fe-1].isInternal||ee?q.lineTo(ae.vertices[fe].x,ae.vertices[fe].y):q.moveTo(ae.vertices[fe].x,ae.vertices[fe].y),ae.vertices[fe].isInternal&&!ee&&q.moveTo(ae.vertices[(fe+1)%ae.vertices.length].x,ae.vertices[(fe+1)%ae.vertices.length].y);q.lineTo(ae.vertices[0].x,ae.vertices[0].y)}q.lineWidth=1,q.strokeStyle="#bbb",q.stroke()},r.bodyConvexHulls=function(L,W,$){var q=$,ee,J,ae;for(q.beginPath(),J=0;J<W.length;J++)if(ee=W[J],!(!ee.render.visible||ee.parts.length===1)){for(q.moveTo(ee.vertices[0].x,ee.vertices[0].y),ae=1;ae<ee.vertices.length;ae++)q.lineTo(ee.vertices[ae].x,ee.vertices[ae].y);q.lineTo(ee.vertices[0].x,ee.vertices[0].y)}q.lineWidth=1,q.strokeStyle="rgba(255,255,255,0.2)",q.stroke()},r.vertexNumbers=function(L,W,$){var q=$,ee,J,ae;for(ee=0;ee<W.length;ee++){var ne=W[ee].parts;for(ae=ne.length>1?1:0;ae<ne.length;ae++){var fe=ne[ae];for(J=0;J<fe.vertices.length;J++)q.fillStyle="rgba(255,255,255,0.2)",q.fillText(ee+"_"+J,fe.position.x+(fe.vertices[J].x-fe.position.x)*.8,fe.position.y+(fe.vertices[J].y-fe.position.y)*.8)}}},r.mousePosition=function(L,W,$){var q=$;q.fillStyle="rgba(255,255,255,0.8)",q.fillText(W.position.x+"  "+W.position.y,W.position.x+5,W.position.y-5)},r.bodyBounds=function(L,W,$){var q=$;L.engine;var ee=L.options;q.beginPath();for(var J=0;J<W.length;J++){var ae=W[J];if(ae.render.visible)for(var ne=W[J].parts,fe=ne.length>1?1:0;fe<ne.length;fe++){var pe=ne[fe];q.rect(pe.bounds.min.x,pe.bounds.min.y,pe.bounds.max.x-pe.bounds.min.x,pe.bounds.max.y-pe.bounds.min.y)}}ee.wireframes?q.strokeStyle="rgba(255,255,255,0.08)":q.strokeStyle="rgba(0,0,0,0.1)",q.lineWidth=1,q.stroke()},r.bodyAxes=function(L,W,$){var q=$;L.engine;var ee=L.options,J,ae,ne,fe;for(q.beginPath(),ae=0;ae<W.length;ae++){var pe=W[ae],ce=pe.parts;if(!!pe.render.visible)if(ee.showAxes)for(ne=ce.length>1?1:0;ne<ce.length;ne++)for(J=ce[ne],fe=0;fe<J.axes.length;fe++){var Ce=J.axes[fe];q.moveTo(J.position.x,J.position.y),q.lineTo(J.position.x+Ce.x*20,J.position.y+Ce.y*20)}else for(ne=ce.length>1?1:0;ne<ce.length;ne++)for(J=ce[ne],fe=0;fe<J.axes.length;fe++)q.moveTo(J.position.x,J.position.y),q.lineTo((J.vertices[0].x+J.vertices[J.vertices.length-1].x)/2,(J.vertices[0].y+J.vertices[J.vertices.length-1].y)/2)}ee.wireframes?(q.strokeStyle="indianred",q.lineWidth=1):(q.strokeStyle="rgba(255, 255, 255, 0.4)",q.globalCompositeOperation="overlay",q.lineWidth=2),q.stroke(),q.globalCompositeOperation="source-over"},r.bodyPositions=function(L,W,$){var q=$;L.engine;var ee=L.options,J,ae,ne,fe;for(q.beginPath(),ne=0;ne<W.length;ne++)if(J=W[ne],!!J.render.visible)for(fe=0;fe<J.parts.length;fe++)ae=J.parts[fe],q.arc(ae.position.x,ae.position.y,3,0,2*Math.PI,!1),q.closePath();for(ee.wireframes?q.fillStyle="indianred":q.fillStyle="rgba(0,0,0,0.5)",q.fill(),q.beginPath(),ne=0;ne<W.length;ne++)J=W[ne],J.render.visible&&(q.arc(J.positionPrev.x,J.positionPrev.y,2,0,2*Math.PI,!1),q.closePath());q.fillStyle="rgba(255,165,0,0.8)",q.fill()},r.bodyVelocity=function(L,W,$){var q=$;q.beginPath();for(var ee=0;ee<W.length;ee++){var J=W[ee];!J.render.visible||(q.moveTo(J.position.x,J.position.y),q.lineTo(J.position.x+(J.position.x-J.positionPrev.x)*2,J.position.y+(J.position.y-J.positionPrev.y)*2))}q.lineWidth=3,q.strokeStyle="cornflowerblue",q.stroke()},r.bodyIds=function(L,W,$){var q=$,ee,J;for(ee=0;ee<W.length;ee++)if(!!W[ee].render.visible){var ae=W[ee].parts;for(J=ae.length>1?1:0;J<ae.length;J++){var ne=ae[J];q.font="12px Arial",q.fillStyle="rgba(255,255,255,0.5)",q.fillText(ne.id,ne.position.x+10,ne.position.y-10)}}},r.collisions=function(L,W,$){var q=$,ee=L.options,J,ae,ne,fe;for(q.beginPath(),ne=0;ne<W.length;ne++)if(J=W[ne],!!J.isActive)for(ae=J.collision,fe=0;fe<J.activeContacts.length;fe++){var pe=J.activeContacts[fe],ce=pe.vertex;q.rect(ce.x-1.5,ce.y-1.5,3.5,3.5)}for(ee.wireframes?q.fillStyle="rgba(255,255,255,0.7)":q.fillStyle="orange",q.fill(),q.beginPath(),ne=0;ne<W.length;ne++)if(J=W[ne],!!J.isActive&&(ae=J.collision,J.activeContacts.length>0)){var Ce=J.activeContacts[0].vertex.x,de=J.activeContacts[0].vertex.y;J.activeContacts.length===2&&(Ce=(J.activeContacts[0].vertex.x+J.activeContacts[1].vertex.x)/2,de=(J.activeContacts[0].vertex.y+J.activeContacts[1].vertex.y)/2),ae.bodyB===ae.supports[0].body||ae.bodyA.isStatic===!0?q.moveTo(Ce-ae.normal.x*8,de-ae.normal.y*8):q.moveTo(Ce+ae.normal.x*8,de+ae.normal.y*8),q.lineTo(Ce,de)}ee.wireframes?q.strokeStyle="rgba(255,165,0,0.7)":q.strokeStyle="orange",q.lineWidth=1,q.stroke()},r.separations=function(L,W,$){var q=$,ee=L.options,J,ae,ne,fe,pe;for(q.beginPath(),pe=0;pe<W.length;pe++)if(J=W[pe],!!J.isActive){ae=J.collision,ne=ae.bodyA,fe=ae.bodyB;var ce=1;!fe.isStatic&&!ne.isStatic&&(ce=.5),fe.isStatic&&(ce=0),q.moveTo(fe.position.x,fe.position.y),q.lineTo(fe.position.x-ae.penetration.x*ce,fe.position.y-ae.penetration.y*ce),ce=1,!fe.isStatic&&!ne.isStatic&&(ce=.5),ne.isStatic&&(ce=0),q.moveTo(ne.position.x,ne.position.y),q.lineTo(ne.position.x+ae.penetration.x*ce,ne.position.y+ae.penetration.y*ce)}ee.wireframes?q.strokeStyle="rgba(255,165,0,0.5)":q.strokeStyle="orange",q.stroke()},r.inspector=function(L,W){L.engine;var $=L.selected,q=L.render,ee=q.options,J;if(ee.hasBounds){var ae=q.bounds.max.x-q.bounds.min.x,ne=q.bounds.max.y-q.bounds.min.y,fe=ae/q.options.width,pe=ne/q.options.height;W.scale(1/fe,1/pe),W.translate(-q.bounds.min.x,-q.bounds.min.y)}for(var ce=0;ce<$.length;ce++){var Ce=$[ce].data;switch(W.translate(.5,.5),W.lineWidth=1,W.strokeStyle="rgba(255,165,0,0.9)",W.setLineDash([1,2]),Ce.type){case"body":J=Ce.bounds,W.beginPath(),W.rect(Math.floor(J.min.x-3),Math.floor(J.min.y-3),Math.floor(J.max.x-J.min.x+6),Math.floor(J.max.y-J.min.y+6)),W.closePath(),W.stroke();break;case"constraint":var de=Ce.pointA;Ce.bodyA&&(de=Ce.pointB),W.beginPath(),W.arc(de.x,de.y,10,0,2*Math.PI),W.closePath(),W.stroke();break}W.setLineDash([]),W.translate(-.5,-.5)}L.selectStart!==null&&(W.translate(.5,.5),W.lineWidth=1,W.strokeStyle="rgba(255,165,0,0.6)",W.fillStyle="rgba(255,165,0,0.1)",J=L.selectBounds,W.beginPath(),W.rect(Math.floor(J.min.x),Math.floor(J.min.y),Math.floor(J.max.x-J.min.x),Math.floor(J.max.y-J.min.y)),W.closePath(),W.stroke(),W.fill(),W.translate(-.5,-.5)),ee.hasBounds&&W.setTransform(1,0,0,1,0,0)};var w=T(function(L,W){var $=L.engine,q=L.timing,ee=q.historySize,J=$.timing.timestamp;q.delta=W-q.lastTime||r._goodDelta,q.lastTime=W,q.timestampElapsed=J-q.lastTimestamp||0,q.lastTimestamp=J,q.deltaHistory.unshift(q.delta),q.deltaHistory.length=Math.min(q.deltaHistory.length,ee),q.engineDeltaHistory.unshift($.timing.lastDelta),q.engineDeltaHistory.length=Math.min(q.engineDeltaHistory.length,ee),q.timestampElapsedHistory.unshift(q.timestampElapsed),q.timestampElapsedHistory.length=Math.min(q.timestampElapsedHistory.length,ee),q.engineElapsedHistory.unshift($.timing.lastElapsed),q.engineElapsedHistory.length=Math.min(q.engineElapsedHistory.length,ee),q.elapsedHistory.unshift(q.lastElapsed),q.elapsedHistory.length=Math.min(q.elapsedHistory.length,ee)},"_updateTiming"),_=T(function(L){for(var W=0,$=0;$<L.length;$+=1)W+=L[$];return W/L.length||0},"_mean"),N=T(function(L,W){var $=document.createElement("canvas");return $.width=L,$.height=W,$.oncontextmenu=function(){return!1},$.onselectstart=function(){return!1},$},"_createCanvas"),F=T(function(L){var W=L.getContext("2d"),$=window.devicePixelRatio||1,q=W.webkitBackingStorePixelRatio||W.mozBackingStorePixelRatio||W.msBackingStorePixelRatio||W.oBackingStorePixelRatio||W.backingStorePixelRatio||1;return $/q},"_getPixelRatio"),K=T(function(L,W){var $=L.textures[W];return $||($=L.textures[W]=new Image,$.src=W,$)},"_getTexture"),X=T(function(L,W){var $=W;/(jpg|gif|png)$/.test(W)&&($="url("+W+")"),L.canvas.style.background=$,L.canvas.style.backgroundSize="contain",L.currentBackground=W},"_applyBackground")})()},function(m,D){var v={};m.exports=v,function(){v.create=function(r){return{vertex:r,normalImpulse:0,tangentImpulse:0}}}()},function(m,D,v){var r={};m.exports=r;var c=v(7),g=v(19),h=v(14),O=v(20),x=v(4),I=v(5),S=v(10),s=v(0),w=v(6);(function(){r.create=function(_){_=_||{};var N={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},F=s.extend(N,_);return F.world=_.world||I.create({label:"World"}),F.pairs=_.pairs||O.create(),F.detector=_.detector||h.create(),F.grid={buckets:[]},F.world.gravity=F.gravity,F.broadphase=F.grid,F.metrics={},F},r.update=function(_,N,F){var K=s.now();N=N||1e3/60,F=F||1;var X=_.world,L=_.detector,W=_.pairs,$=_.timing,q=$.timestamp,ee;$.timestamp+=N*$.timeScale,$.lastDelta=N*$.timeScale;var J={timestamp:$.timestamp};x.trigger(_,"beforeUpdate",J);var ae=I.allBodies(X),ne=I.allConstraints(X);for(X.isModified&&h.setBodies(L,ae),X.isModified&&I.setModified(X,!1,!1,!0),_.enableSleeping&&c.update(ae,$.timeScale),r._bodiesApplyGravity(ae,_.gravity),r._bodiesUpdate(ae,N,$.timeScale,F,X.bounds),S.preSolveAll(ae),ee=0;ee<_.constraintIterations;ee++)S.solveAll(ne,$.timeScale);S.postSolveAll(ae),L.pairs=_.pairs;var fe=h.collisions(L);for(O.update(W,fe,q),_.enableSleeping&&c.afterCollisions(W.list,$.timeScale),W.collisionStart.length>0&&x.trigger(_,"collisionStart",{pairs:W.collisionStart}),g.preSolvePosition(W.list),ee=0;ee<_.positionIterations;ee++)g.solvePosition(W.list,$.timeScale);for(g.postSolvePosition(ae),S.preSolveAll(ae),ee=0;ee<_.constraintIterations;ee++)S.solveAll(ne,$.timeScale);for(S.postSolveAll(ae),g.preSolveVelocity(W.list),ee=0;ee<_.velocityIterations;ee++)g.solveVelocity(W.list,$.timeScale);return W.collisionActive.length>0&&x.trigger(_,"collisionActive",{pairs:W.collisionActive}),W.collisionEnd.length>0&&x.trigger(_,"collisionEnd",{pairs:W.collisionEnd}),r._bodiesClearForces(ae),x.trigger(_,"afterUpdate",J),_.timing.lastElapsed=s.now()-K,_},r.merge=function(_,N){if(s.extend(_,N),N.world){_.world=N.world,r.clear(_);for(var F=I.allBodies(_.world),K=0;K<F.length;K++){var X=F[K];c.set(X,!1),X.id=s.nextId()}}},r.clear=function(_){O.clear(_.pairs),h.clear(_.detector)},r._bodiesClearForces=function(_){for(var N=0;N<_.length;N++){var F=_[N];F.force.x=0,F.force.y=0,F.torque=0}},r._bodiesApplyGravity=function(_,N){var F=typeof N.scale<"u"?N.scale:.001;if(!(N.x===0&&N.y===0||F===0))for(var K=0;K<_.length;K++){var X=_[K];X.isStatic||X.isSleeping||(X.force.y+=X.mass*N.y*F,X.force.x+=X.mass*N.x*F)}},r._bodiesUpdate=function(_,N,F,K,X){for(var L=0;L<_.length;L++){var W=_[L];W.isStatic||W.isSleeping||w.update(W,N,F,K)}}})()},function(m,D,v){var r={};m.exports=r;var c=v(3),g=v(1);(function(){r._restingThresh=4,r._restingThreshTangent=6,r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r.preSolvePosition=function(h){var O,x,I,S=h.length;for(O=0;O<S;O++)x=h[O],x.isActive&&(I=x.activeContacts.length,x.collision.parentA.totalContacts+=I,x.collision.parentB.totalContacts+=I)},r.solvePosition=function(h,O){var x,I,S,s,w,_,N,F,K=r._positionDampen,X=h.length;for(x=0;x<X;x++)I=h[x],!(!I.isActive||I.isSensor)&&(S=I.collision,s=S.parentA,w=S.parentB,_=S.normal,I.separation=_.x*(w.positionImpulse.x+S.penetration.x-s.positionImpulse.x)+_.y*(w.positionImpulse.y+S.penetration.y-s.positionImpulse.y));for(x=0;x<X;x++)I=h[x],!(!I.isActive||I.isSensor)&&(S=I.collision,s=S.parentA,w=S.parentB,_=S.normal,F=(I.separation-I.slop)*O,(s.isStatic||w.isStatic)&&(F*=2),s.isStatic||s.isSleeping||(N=K/s.totalContacts,s.positionImpulse.x+=_.x*F*N,s.positionImpulse.y+=_.y*F*N),w.isStatic||w.isSleeping||(N=K/w.totalContacts,w.positionImpulse.x-=_.x*F*N,w.positionImpulse.y-=_.y*F*N))},r.postSolvePosition=function(h){for(var O=r._positionWarming,x=h.length,I=c.translate,S=g.update,s=0;s<x;s++){var w=h[s],_=w.positionImpulse,N=_.x,F=_.y,K=w.velocity;if(w.totalContacts=0,N!==0||F!==0){for(var X=0;X<w.parts.length;X++){var L=w.parts[X];I(L.vertices,_),S(L.bounds,L.vertices,K),L.position.x+=N,L.position.y+=F}w.positionPrev.x+=N,w.positionPrev.y+=F,N*K.x+F*K.y<0?(_.x=0,_.y=0):(_.x*=O,_.y*=O)}}},r.preSolveVelocity=function(h){var O=h.length,x,I;for(x=0;x<O;x++){var S=h[x];if(!(!S.isActive||S.isSensor)){var s=S.activeContacts,w=s.length,_=S.collision,N=_.parentA,F=_.parentB,K=_.normal,X=_.tangent;for(I=0;I<w;I++){var L=s[I],W=L.vertex,$=L.normalImpulse,q=L.tangentImpulse;if($!==0||q!==0){var ee=K.x*$+X.x*q,J=K.y*$+X.y*q;N.isStatic||N.isSleeping||(N.positionPrev.x+=ee*N.inverseMass,N.positionPrev.y+=J*N.inverseMass,N.anglePrev+=N.inverseInertia*((W.x-N.position.x)*J-(W.y-N.position.y)*ee)),F.isStatic||F.isSleeping||(F.positionPrev.x-=ee*F.inverseMass,F.positionPrev.y-=J*F.inverseMass,F.anglePrev-=F.inverseInertia*((W.x-F.position.x)*J-(W.y-F.position.y)*ee))}}}}},r.solveVelocity=function(h,O){var x=O*O,I=r._restingThresh*x,S=r._frictionNormalMultiplier,s=r._restingThreshTangent*x,w=Number.MAX_VALUE,_=h.length,N,F,K,X;for(K=0;K<_;K++){var L=h[K];if(!(!L.isActive||L.isSensor)){var W=L.collision,$=W.parentA,q=W.parentB,ee=$.velocity,J=q.velocity,ae=W.normal.x,ne=W.normal.y,fe=W.tangent.x,pe=W.tangent.y,ce=L.activeContacts,Ce=ce.length,de=1/Ce,Oe=$.inverseMass+q.inverseMass,Se=L.friction*L.frictionStatic*S*x;for(ee.x=$.position.x-$.positionPrev.x,ee.y=$.position.y-$.positionPrev.y,J.x=q.position.x-q.positionPrev.x,J.y=q.position.y-q.positionPrev.y,$.angularVelocity=$.angle-$.anglePrev,q.angularVelocity=q.angle-q.anglePrev,X=0;X<Ce;X++){var we=ce[X],Me=we.vertex,je=Me.x-$.position.x,Ke=Me.y-$.position.y,qe=Me.x-q.position.x,ht=Me.y-q.position.y,We=ee.x-Ke*$.angularVelocity,rt=ee.y+je*$.angularVelocity,ot=J.x-ht*q.angularVelocity,$t=J.y+qe*q.angularVelocity,Qe=We-ot,$e=rt-$t,Fe=ae*Qe+ne*$e,at=fe*Qe+pe*$e,Ct=L.separation+Fe,Wt=Math.min(Ct,1);Wt=Ct<0?0:Wt;var qt=Wt*Se;at>qt||-at>qt?(F=at>0?at:-at,N=L.friction*(at>0?1:-1)*x,N<-F?N=-F:N>F&&(N=F)):(N=at,F=w);var qn=je*ne-Ke*ae,Gn=qe*ne-ht*ae,Xn=de/(Oe+$.inverseInertia*qn*qn+q.inverseInertia*Gn*Gn),vn=(1+L.restitution)*Fe*Xn;if(N*=Xn,Fe*Fe>I&&Fe<0)we.normalImpulse=0;else{var Zn=we.normalImpulse;we.normalImpulse+=vn,we.normalImpulse=Math.min(we.normalImpulse,0),vn=we.normalImpulse-Zn}if(at*at>s)we.tangentImpulse=0;else{var tt=we.tangentImpulse;we.tangentImpulse+=N,we.tangentImpulse<-F&&(we.tangentImpulse=-F),we.tangentImpulse>F&&(we.tangentImpulse=F),N=we.tangentImpulse-tt}var Gt=ae*vn+fe*N,Je=ne*vn+pe*N;$.isStatic||$.isSleeping||($.positionPrev.x+=Gt*$.inverseMass,$.positionPrev.y+=Je*$.inverseMass,$.anglePrev+=(je*Je-Ke*Gt)*$.inverseInertia),q.isStatic||q.isSleeping||(q.positionPrev.x-=Gt*q.inverseMass,q.positionPrev.y-=Je*q.inverseMass,q.anglePrev-=(qe*Je-ht*Gt)*q.inverseInertia)}}}}})()},function(m,D,v){var r={};m.exports=r;var c=v(9),g=v(0);(function(){r.create=function(h){return g.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},h)},r.update=function(h,O,x){var I=h.list,S=I.length,s=h.table,w=O.length,_=h.collisionStart,N=h.collisionEnd,F=h.collisionActive,K,X,L,W;for(_.length=0,N.length=0,F.length=0,W=0;W<S;W++)I[W].confirmedActive=!1;for(W=0;W<w;W++)K=O[W],L=K.pair,L?(L.isActive?F.push(L):_.push(L),c.update(L,K,x),L.confirmedActive=!0):(L=c.create(K,x),s[L.id]=L,_.push(L),I.push(L));var $=[];for(S=I.length,W=0;W<S;W++)L=I[W],L.confirmedActive||(c.setActive(L,!1,x),N.push(L),!L.collision.bodyA.isSleeping&&!L.collision.bodyB.isSleeping&&$.push(W));for(W=0;W<$.length;W++)X=$[W]-W,L=I[X],I.splice(X,1),delete s[L.id]},r.clear=function(h){return h.table={},h.list.length=0,h.collisionStart.length=0,h.collisionActive.length=0,h.collisionEnd.length=0,h}})()},function(m,D,v){var r=m.exports=v(22);r.Axes=v(11),r.Bodies=v(12),r.Body=v(6),r.Bounds=v(1),r.Collision=v(8),r.Common=v(0),r.Composite=v(5),r.Composites=v(23),r.Constraint=v(10),r.Contact=v(17),r.Detector=v(14),r.Engine=v(18),r.Events=v(4),r.Grid=v(24),r.Mouse=v(13),r.MouseConstraint=v(25),r.Pair=v(9),r.Pairs=v(20),r.Plugin=v(15),r.Query=v(26),r.Render=v(16),r.Resolver=v(19),r.Runner=v(27),r.SAT=v(28),r.Sleeping=v(7),r.Svg=v(29),r.Vector=v(2),r.Vertices=v(3),r.World=v(30),r.Engine.run=r.Runner.run,r.Common.deprecated(r.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(m,D,v){var r={};m.exports=r;var c=v(15),g=v(0);(function(){r.name="matter-js",r.version="0.18.0",r.uses=[],r.used=[],r.use=function(){c.use(r,Array.prototype.slice.call(arguments))},r.before=function(h,O){return h=h.replace(/^Matter./,""),g.chainPathBefore(r,h,O)},r.after=function(h,O){return h=h.replace(/^Matter./,""),g.chainPathAfter(r,h,O)}})()},function(m,D,v){var r={};m.exports=r;var c=v(5),g=v(10),h=v(0),O=v(6),x=v(12),I=h.deprecated;(function(){r.stack=function(S,s,w,_,N,F,K){for(var X=c.create({label:"Stack"}),L=S,W=s,$,q=0,ee=0;ee<_;ee++){for(var J=0,ae=0;ae<w;ae++){var ne=K(L,W,ae,ee,$,q);if(ne){var fe=ne.bounds.max.y-ne.bounds.min.y,pe=ne.bounds.max.x-ne.bounds.min.x;fe>J&&(J=fe),O.translate(ne,{x:pe*.5,y:fe*.5}),L=ne.bounds.max.x+N,c.addBody(X,ne),$=ne,q+=1}else L+=N}W+=J+F,L=S}return X},r.chain=function(S,s,w,_,N,F){for(var K=S.bodies,X=1;X<K.length;X++){var L=K[X-1],W=K[X],$=L.bounds.max.y-L.bounds.min.y,q=L.bounds.max.x-L.bounds.min.x,ee=W.bounds.max.y-W.bounds.min.y,J=W.bounds.max.x-W.bounds.min.x,ae={bodyA:L,pointA:{x:q*s,y:$*w},bodyB:W,pointB:{x:J*_,y:ee*N}},ne=h.extend(ae,F);c.addConstraint(S,g.create(ne))}return S.label+=" Chain",S},r.mesh=function(S,s,w,_,N){var F=S.bodies,K,X,L,W,$;for(K=0;K<w;K++){for(X=1;X<s;X++)L=F[X-1+K*s],W=F[X+K*s],c.addConstraint(S,g.create(h.extend({bodyA:L,bodyB:W},N)));if(K>0)for(X=0;X<s;X++)L=F[X+(K-1)*s],W=F[X+K*s],c.addConstraint(S,g.create(h.extend({bodyA:L,bodyB:W},N))),_&&X>0&&($=F[X-1+(K-1)*s],c.addConstraint(S,g.create(h.extend({bodyA:$,bodyB:W},N)))),_&&X<s-1&&($=F[X+1+(K-1)*s],c.addConstraint(S,g.create(h.extend({bodyA:$,bodyB:W},N))))}return S.label+=" Mesh",S},r.pyramid=function(S,s,w,_,N,F,K){return r.stack(S,s,w,_,N,F,function(X,L,W,$,q,ee){var J=Math.min(_,Math.ceil(w/2)),ae=q?q.bounds.max.x-q.bounds.min.x:0;if(!($>J)){$=J-$;var ne=$,fe=w-1-$;if(!(W<ne||W>fe)){ee===1&&O.translate(q,{x:(W+(w%2===1?1:-1))*ae,y:0});var pe=q?W*ae:0;return K(S+pe+W*N,L,W,$,q,ee)}}})},r.newtonsCradle=function(S,s,w,_,N){for(var F=c.create({label:"Newtons Cradle"}),K=0;K<w;K++){var X=1.9,L=x.circle(S+K*(_*X),s+N,_,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),W=g.create({pointA:{x:S+K*(_*X),y:s},bodyB:L});c.addBody(F,L),c.addConstraint(F,W)}return F},I(r,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),r.car=function(S,s,w,_,N){var F=O.nextGroup(!0),K=20,X=-w*.5+K,L=w*.5-K,W=0,$=c.create({label:"Car"}),q=x.rectangle(S,s,w,_,{collisionFilter:{group:F},chamfer:{radius:_*.5},density:2e-4}),ee=x.circle(S+X,s+W,N,{collisionFilter:{group:F},friction:.8}),J=x.circle(S+L,s+W,N,{collisionFilter:{group:F},friction:.8}),ae=g.create({bodyB:q,pointB:{x:X,y:W},bodyA:ee,stiffness:1,length:0}),ne=g.create({bodyB:q,pointB:{x:L,y:W},bodyA:J,stiffness:1,length:0});return c.addBody($,q),c.addBody($,ee),c.addBody($,J),c.addConstraint($,ae),c.addConstraint($,ne),$},I(r,"car","Composites.car \u27A4 moved to car example"),r.softBody=function(S,s,w,_,N,F,K,X,L,W){L=h.extend({inertia:1/0},L),W=h.extend({stiffness:.2,render:{type:"line",anchors:!1}},W);var $=r.stack(S,s,w,_,N,F,function(q,ee){return x.circle(q,ee,X,L)});return r.mesh($,w,_,K,W),$.label="Soft Body",$},I(r,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(m,D,v){var r={};m.exports=r;var c=v(9),g=v(0),h=g.deprecated;(function(){r.create=function(O){var x={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return g.extend(x,O)},r.update=function(O,x,I,S){var s,w,_,N=I.world,F=O.buckets,K,X,L=!1;for(s=0;s<x.length;s++){var W=x[s];if(!(W.isSleeping&&!S)&&!(N.bounds&&(W.bounds.max.x<N.bounds.min.x||W.bounds.min.x>N.bounds.max.x||W.bounds.max.y<N.bounds.min.y||W.bounds.min.y>N.bounds.max.y))){var $=r._getRegion(O,W);if(!W.region||$.id!==W.region.id||S){(!W.region||S)&&(W.region=$);var q=r._regionUnion($,W.region);for(w=q.startCol;w<=q.endCol;w++)for(_=q.startRow;_<=q.endRow;_++){X=r._getBucketId(w,_),K=F[X];var ee=w>=$.startCol&&w<=$.endCol&&_>=$.startRow&&_<=$.endRow,J=w>=W.region.startCol&&w<=W.region.endCol&&_>=W.region.startRow&&_<=W.region.endRow;!ee&&J&&J&&K&&r._bucketRemoveBody(O,K,W),(W.region===$||ee&&!J||S)&&(K||(K=r._createBucket(F,X)),r._bucketAddBody(O,K,W))}W.region=$,L=!0}}}L&&(O.pairsList=r._createActivePairsList(O))},h(r,"update","Grid.update \u27A4 replaced by Matter.Detector"),r.clear=function(O){O.buckets={},O.pairs={},O.pairsList=[]},h(r,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),r._regionUnion=function(O,x){var I=Math.min(O.startCol,x.startCol),S=Math.max(O.endCol,x.endCol),s=Math.min(O.startRow,x.startRow),w=Math.max(O.endRow,x.endRow);return r._createRegion(I,S,s,w)},r._getRegion=function(O,x){var I=x.bounds,S=Math.floor(I.min.x/O.bucketWidth),s=Math.floor(I.max.x/O.bucketWidth),w=Math.floor(I.min.y/O.bucketHeight),_=Math.floor(I.max.y/O.bucketHeight);return r._createRegion(S,s,w,_)},r._createRegion=function(O,x,I,S){return{id:O+","+x+","+I+","+S,startCol:O,endCol:x,startRow:I,endRow:S}},r._getBucketId=function(O,x){return"C"+O+"R"+x},r._createBucket=function(O,x){var I=O[x]=[];return I},r._bucketAddBody=function(O,x,I){var S=O.pairs,s=c.id,w=x.length,_;for(_=0;_<w;_++){var N=x[_];if(!(I.id===N.id||I.isStatic&&N.isStatic)){var F=s(I,N),K=S[F];K?K[2]+=1:S[F]=[I,N,1]}}x.push(I)},r._bucketRemoveBody=function(O,x,I){var S=O.pairs,s=c.id,w;x.splice(g.indexOf(x,I),1);var _=x.length;for(w=0;w<_;w++){var N=S[s(I,x[w])];N&&(N[2]-=1)}},r._createActivePairsList=function(O){var x,I=O.pairs,S=g.keys(I),s=S.length,w=[],_;for(_=0;_<s;_++)x=I[S[_]],x[2]>0?w.push(x):delete I[S[_]];return w}})()},function(m,D,v){var r={};m.exports=r;var c=v(3),g=v(7),h=v(13),O=v(4),x=v(14),I=v(10),S=v(5),s=v(0),w=v(1);(function(){r.create=function(_,N){var F=(_?_.mouse:null)||(N?N.mouse:null);F||(_&&_.render&&_.render.canvas?F=h.create(_.render.canvas):N&&N.element?F=h.create(N.element):(F=h.create(),s.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var K=I.create({label:"Mouse Constraint",pointA:F.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),X={type:"mouseConstraint",mouse:F,element:null,body:null,constraint:K,collisionFilter:{category:1,mask:4294967295,group:0}},L=s.extend(X,N);return O.on(_,"beforeUpdate",function(){var W=S.allBodies(_.world);r.update(L,W),r._triggerEvents(L)}),L},r.update=function(_,N){var F=_.mouse,K=_.constraint,X=_.body;if(F.button===0){if(K.bodyB)g.set(K.bodyB,!1),K.pointA=F.position;else for(var L=0;L<N.length;L++)if(X=N[L],w.contains(X.bounds,F.position)&&x.canCollide(X.collisionFilter,_.collisionFilter))for(var W=X.parts.length>1?1:0;W<X.parts.length;W++){var $=X.parts[W];if(c.contains($.vertices,F.position)){K.pointA=F.position,K.bodyB=_.body=X,K.pointB={x:F.position.x-X.position.x,y:F.position.y-X.position.y},K.angleB=X.angle,g.set(X,!1),O.trigger(_,"startdrag",{mouse:F,body:X});break}}}else K.bodyB=_.body=null,K.pointB=null,X&&O.trigger(_,"enddrag",{mouse:F,body:X})},r._triggerEvents=function(_){var N=_.mouse,F=N.sourceEvents;F.mousemove&&O.trigger(_,"mousemove",{mouse:N}),F.mousedown&&O.trigger(_,"mousedown",{mouse:N}),F.mouseup&&O.trigger(_,"mouseup",{mouse:N}),h.clearSourceEvents(N)}})()},function(m,D,v){var r={};m.exports=r;var c=v(2),g=v(8),h=v(1),O=v(12),x=v(3);(function(){r.collides=function(I,S){for(var s=[],w=S.length,_=I.bounds,N=g.collides,F=h.overlaps,K=0;K<w;K++){var X=S[K],L=X.parts.length,W=L===1?0:1;if(F(X.bounds,_))for(var $=W;$<L;$++){var q=X.parts[$];if(F(q.bounds,_)){var ee=N(q,I);if(ee){s.push(ee);break}}}}return s},r.ray=function(I,S,s,w){w=w||1e-100;for(var _=c.angle(S,s),N=c.magnitude(c.sub(S,s)),F=(s.x+S.x)*.5,K=(s.y+S.y)*.5,X=O.rectangle(F,K,N,w,{angle:_}),L=r.collides(X,I),W=0;W<L.length;W+=1){var $=L[W];$.body=$.bodyB=$.bodyA}return L},r.region=function(I,S,s){for(var w=[],_=0;_<I.length;_++){var N=I[_],F=h.overlaps(N.bounds,S);(F&&!s||!F&&s)&&w.push(N)}return w},r.point=function(I,S){for(var s=[],w=0;w<I.length;w++){var _=I[w];if(h.contains(_.bounds,S))for(var N=_.parts.length===1?0:1;N<_.parts.length;N++){var F=_.parts[N];if(h.contains(F.bounds,S)&&x.contains(F.vertices,S)){s.push(_);break}}}return s}})()},function(m,D,v){var r={};m.exports=r;var c=v(4),g=v(18),h=v(0);(function(){var O,x;if(typeof window<"u"&&(O=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,x=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!O){var I;O=T(function(S){I=setTimeout(function(){S(h.now())},1e3/60)},"_requestAnimationFrame"),x=T(function(){clearTimeout(I)},"_cancelAnimationFrame")}r.create=function(S){var s={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},w=h.extend(s,S);return w.delta=w.delta||1e3/w.fps,w.deltaMin=w.deltaMin||1e3/w.fps,w.deltaMax=w.deltaMax||1e3/(w.fps*.5),w.fps=1e3/w.delta,w},r.run=function(S,s){return typeof S.positionIterations<"u"&&(s=S,S=r.create()),T(function w(_){S.frameRequestId=O(w),_&&S.enabled&&r.tick(S,s,_)},"render")(),S},r.tick=function(S,s,w){var _=s.timing,N=1,F,K={timestamp:_.timestamp};c.trigger(S,"beforeTick",K),S.isFixed?F=S.delta:(F=w-S.timePrev||S.delta,S.timePrev=w,S.deltaHistory.push(F),S.deltaHistory=S.deltaHistory.slice(-S.deltaSampleSize),F=Math.min.apply(null,S.deltaHistory),F=F<S.deltaMin?S.deltaMin:F,F=F>S.deltaMax?S.deltaMax:F,N=F/S.delta,S.delta=F),S.timeScalePrev!==0&&(N*=_.timeScale/S.timeScalePrev),_.timeScale===0&&(N=0),S.timeScalePrev=_.timeScale,S.correction=N,S.frameCounter+=1,w-S.counterTimestamp>=1e3&&(S.fps=S.frameCounter*((w-S.counterTimestamp)/1e3),S.counterTimestamp=w,S.frameCounter=0),c.trigger(S,"tick",K),c.trigger(S,"beforeUpdate",K),g.update(s,F,N),c.trigger(S,"afterUpdate",K),c.trigger(S,"afterTick",K)},r.stop=function(S){x(S.frameRequestId)},r.start=function(S,s){r.run(S,s)}})()},function(m,D,v){var r={};m.exports=r;var c=v(8),g=v(0),h=g.deprecated;(function(){r.collides=function(O,x){return c.collides(O,x)},h(r,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(m,D,v){var r={};m.exports=r,v(1);var c=v(0);(function(){r.pathToVertices=function(g,h){typeof window<"u"&&!("SVGPathSeg"in window)&&c.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var O,x,I,S,s,w,_,N,F,K,X=[],L,W,$=0,q=0,ee=0;h=h||15;var J=T(function(ne,fe,pe){var ce=pe%2===1&&pe>1;if(!F||ne!=F.x||fe!=F.y){F&&ce?(L=F.x,W=F.y):(L=0,W=0);var Ce={x:L+ne,y:W+fe};(ce||!F)&&(F=Ce),X.push(Ce),q=L+ne,ee=W+fe}},"addPoint"),ae=T(function(ne){var fe=ne.pathSegTypeAsLetter.toUpperCase();if(fe!=="Z"){switch(fe){case"M":case"L":case"T":case"C":case"S":case"Q":q=ne.x,ee=ne.y;break;case"H":q=ne.x;break;case"V":ee=ne.y;break}J(q,ee,ne.pathSegType)}},"addSegmentPoint");for(r._svgPathToAbsolute(g),I=g.getTotalLength(),w=[],O=0;O<g.pathSegList.numberOfItems;O+=1)w.push(g.pathSegList.getItem(O));for(_=w.concat();$<I;){if(K=g.getPathSegAtLength($),s=w[K],s!=N){for(;_.length&&_[0]!=s;)ae(_.shift());N=s}switch(s.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":S=g.getPointAtLength($),J(S.x,S.y,0);break}$+=h}for(O=0,x=_.length;O<x;++O)ae(_[O]);return X},r._svgPathToAbsolute=function(g){for(var h,O,x,I,S,s,w=g.pathSegList,_=0,N=0,F=w.numberOfItems,K=0;K<F;++K){var X=w.getItem(K),L=X.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(L))"x"in X&&(_=X.x),"y"in X&&(N=X.y);else switch("x1"in X&&(x=_+X.x1),"x2"in X&&(S=_+X.x2),"y1"in X&&(I=N+X.y1),"y2"in X&&(s=N+X.y2),"x"in X&&(_+=X.x),"y"in X&&(N+=X.y),L){case"m":w.replaceItem(g.createSVGPathSegMovetoAbs(_,N),K);break;case"l":w.replaceItem(g.createSVGPathSegLinetoAbs(_,N),K);break;case"h":w.replaceItem(g.createSVGPathSegLinetoHorizontalAbs(_),K);break;case"v":w.replaceItem(g.createSVGPathSegLinetoVerticalAbs(N),K);break;case"c":w.replaceItem(g.createSVGPathSegCurvetoCubicAbs(_,N,x,I,S,s),K);break;case"s":w.replaceItem(g.createSVGPathSegCurvetoCubicSmoothAbs(_,N,S,s),K);break;case"q":w.replaceItem(g.createSVGPathSegCurvetoQuadraticAbs(_,N,x,I),K);break;case"t":w.replaceItem(g.createSVGPathSegCurvetoQuadraticSmoothAbs(_,N),K);break;case"a":w.replaceItem(g.createSVGPathSegArcAbs(_,N,X.r1,X.r2,X.angle,X.largeArcFlag,X.sweepFlag),K);break;case"z":case"Z":_=h,N=O;break}(L=="M"||L=="m")&&(h=_,O=N)}}})()},function(m,D,v){var r={};m.exports=r;var c=v(5);v(0),function(){r.create=c.create,r.add=c.add,r.remove=c.remove,r.clear=c.clear,r.addComposite=c.addComposite,r.addBody=c.addBody,r.addConstraint=c.addConstraint}()}])})})($u);var ns={exports:{}};/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(R){(function(p,m){p=p||ta;var D=p.window,v=p.document,r=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],n=t.slice,i=Object.create,a=Object.getOwnPropertyDescriptor,o=Object.defineProperty,l=t.forEach||function(P,b){for(var U=0,A=this.length;U<A;U++)P.call(b,this[U],U,this)},u=T(function(P,b){for(var U in this)this.hasOwnProperty(U)&&P.call(b,this[U],U,this)},"forIn"),f=Object.assign||function(P){for(var b=1,U=arguments.length;b<U;b++){var A=arguments[b];for(var V in A)A.hasOwnProperty(V)&&(P[V]=A[V])}return P},d=T(function(P,b,U){if(P){var A=a(P,"length");(A&&typeof A.value=="number"?l:u).call(P,b,U=U||P)}return U},"each");function C(P,b,U,A,V){var E={};function B(z,G){G=G||(G=a(b,z))&&(G.get?G:G.value),typeof G=="string"&&G[0]==="#"&&(G=P[G.substring(1)]||G);var Q=typeof G=="function",Y=G,re=V||Q&&!G.base?G&&G.get?z in P:P[z]:null,Z;(!V||!re)&&(Q&&re&&(G.base=re),Q&&A!==!1&&(Z=z.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(E[Z[3].toLowerCase()+Z[4]]=Z[2]),(!Y||Q||!Y.get||typeof Y.get!="function"||!M.isPlainObject(Y))&&(Y={value:Y,writable:!0}),(a(P,z)||{configurable:!0}).configurable&&(Y.configurable=!0,Y.enumerable=U!=null?U:!Z),o(P,z,Y))}if(T(B,"field"),b){for(var y in b)b.hasOwnProperty(y)&&!e.test(y)&&B(y);for(var y in E){var k=E[y],H=P["set"+k],j=P["get"+k]||H&&P["is"+k];j&&(A===!0||j.length===0)&&B(y,{get:j,set:H})}}return P}T(C,"inject");function M(){for(var P=0,b=arguments.length;P<b;P++){var U=arguments[P];U&&f(this,U)}return this}return T(M,"Base"),C(M,{inject:function(P){if(P){var b=P.statics===!0?P:P.statics,U=P.beans,A=P.preserve;b!==P&&C(this.prototype,P,P.enumerable,U,A),C(this,b,null,U,A)}for(var V=1,E=arguments.length;V<E;V++)this.inject(arguments[V]);return this},extend:function(){for(var P=this,b,U,A=0,V,E=arguments.length;A<E&&!(b&&U);A++)V=arguments[A],b=b||V.initialize,U=U||V.prototype;return b=b||function(){P.apply(this,arguments)},U=b.prototype=U||i(this.prototype),o(U,"constructor",{value:b,writable:!0,configurable:!0}),C(b,this),arguments.length&&this.inject.apply(b,arguments),b.base=P,b}}).inject({enumerable:!1,initialize:M,set:M,inject:function(){for(var P=0,b=arguments.length;P<b;P++){var U=arguments[P];U&&C(this,U,U.enumerable,U.beans,U.preserve)}return this},extend:function(){var P=i(this);return P.inject.apply(P,arguments)},each:function(P,b){return d(this,P,b)},clone:function(){return new this.constructor(this)},statics:{set:f,each:d,create:i,define:o,describe:a,clone:function(P){return f(new P.constructor,P)},isPlainObject:function(P){var b=P!=null&&P.constructor;return b&&(b===Object||b===M||b.name==="Object")},pick:function(P,b){return P!==m?P:b},slice:function(P,b,U){return n.call(P,b,U)}}})};R.exports=r,r.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+r.each(this,function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+(n==="number"?x.instance.number(e):n==="string"?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return r.importJSON(e,this)},exportJSON:function(e){return r.exportJSON(this,e)},toJSON:function(){return r.serialize(this)},set:function(e,t){return e&&r.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:T(function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!r.exports[n]&&(r.exports[n]=t),t},"extend"),equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&typeof e=="object"&&typeof t=="object"){if(Array.isArray(e)&&Array.isArray(t)){var n=e.length;if(n!==t.length)return!1;for(;n--;)if(!r.equals(e[n],t[n]))return!1}else{var i=Object.keys(e),n=i.length;if(n!==Object.keys(t).length)return!1;for(;n--;){var a=i[n];if(!(t.hasOwnProperty(a)&&r.equals(e[a],t[a])))return!1}}return!0}return!1},read:function(e,t,n,i){if(this===r){var a=this.peek(e,t);return e.__index++,a}var o=this.prototype,l=o._readIndex,u=t||l&&e.__index||0,f=e.length,d=e[u];if(i=i||f-u,d instanceof this||n&&n.readNull&&d==null&&i<=1)return l&&(e.__index=u+1),d&&n&&n.clone?d.clone():d;if(d=r.create(o),l&&(d.__read=!0),d=d.initialize.apply(d,u>0||u+i<f?r.slice(e,u,u+i):e)||d,l){e.__index=u+d.__read;var C=d.__filtered;C&&(e.__filtered=C,d.__filtered=m),d.__read=m}return d},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,n,i){for(var a=[],o,l=t||0,u=i?l+i:e.length,f=l;f<u;f++)a.push(Array.isArray(o=e[f])?this.read(o,0,n):this.read(e,f,n,1));return a},readNamed:function(e,t,n,i,a){var o=this.getNamed(e,t),l=o!==m;if(l){var u=e.__filtered;if(!u){var f=this.getSource(e);u=e.__filtered=r.create(f),u.__unfiltered=f}u[t]=m}return this.read(l?[o]:e,n,i,a)},readSupported:function(e,t){var n=this.getSource(e),i=this,a=!1;return n&&Object.keys(n).forEach(function(o){if(o in t){var l=i.readNamed(e,o);l!==m&&(t[o]=l),a=!0}}),a},getSource:function(e){var t=e.__source;if(t===m){var n=e.length===1&&e[0];t=e.__source=n&&r.isPlainObject(n)?n:null}return t},getNamed:function(e,t){var n=this.getSource(e);if(n)return t?n[t]:e.__filtered||n},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,n,i){var a;function o(C){if(!(n&&C in n)&&!(a&&C in a)){var M=t[C];M!==m&&(e[C]=M)}}if(T(o,"handleKey"),i){for(var l={},u=0,f,d=i.length;u<d;u++)(f=i[u])in t&&(o(f),l[f]=!0);a=l}return Object.keys(t.__unfiltered||t).forEach(o),e},isPlainValue:function(e,t){return r.isPlainObject(e)||Array.isArray(e)||t&&typeof e=="string"},serialize:function(e,t,n,i){t=t||{};var a=!i,o;if(a&&(t.formatter=new x(t.precision),i={length:0,definitions:{},references:{},add:function(M,P){var b="#"+M._id,U=this.references[b];if(!U){this.length++;var A=P.call(M),V=M._class;V&&A[0]!==V&&A.unshift(V),this.definitions[b]=A,U=this.references[b]=[b]}return U}}),e&&e._serialize){o=e._serialize(t,i);var l=e._class;l&&!e._compactSerialize&&(a||!n)&&o[0]!==l&&o.unshift(l)}else if(Array.isArray(e)){o=[];for(var u=0,f=e.length;u<f;u++)o[u]=r.serialize(e[u],t,n,i)}else if(r.isPlainObject(e)){o={};for(var d=Object.keys(e),u=0,f=d.length;u<f;u++){var C=d[u];o[C]=r.serialize(e[C],t,n,i)}}else typeof e=="number"?o=t.formatter.number(e,t.precision):o=e;return a&&i.length>0?[["dictionary",i.definitions],o]:o},deserialize:function(e,t,n,i,a){var o=e,l=!n,u=l&&e&&e.length&&e[0][0]==="dictionary";if(n=n||{},Array.isArray(e)){var f=e[0],d=f==="dictionary";if(e.length==1&&/^#/.test(f))return n.dictionary[f];f=r.exports[f],o=[];for(var C=f?1:0,M=e.length;C<M;C++)o.push(r.deserialize(e[C],t,n,d,u));if(f){var P=o;t?o=t(f,P,l||a):o=new f(P)}}else if(r.isPlainObject(e)){o={},i&&(n.dictionary=o);for(var b in e)o[b]=r.deserialize(e[b],t,n)}return u?o[1]:o},exportJSON:function(e,t){var n=r.serialize(e,t);return t&&t.asString==!1?n:JSON.stringify(n)},importJSON:function(e,t){return r.deserialize(typeof e=="string"?JSON.parse(e):e,function(n,i,a){var o=a&&t&&t.constructor===n,l=o?t:r.create(n.prototype);if(i.length===1&&l instanceof $&&(o||!(l instanceof ee))){var u=i[0];r.isPlainObject(u)&&(u.insert=!1,o&&(i=i.concat([$.INSERT])))}return(o?l.set:n).apply(l,i),o&&(t=null),l})},push:function(e,t){var n=t.length;if(n<4096)e.push.apply(e,t);else{var i=e.length;e.length+=n;for(var a=0;a<n;a++)e[i+a]=t[a]}return e},splice:function(e,t,n,i){var a=t&&t.length,o=n===m;n=o?e.length:n,n>e.length&&(n=e.length);for(var l=0;l<a;l++)t[l]._index=n+l;if(o)return r.push(e,t),[];var u=[n,i];t&&r.push(u,t);for(var f=e.splice.apply(e,u),l=0,d=f.length;l<d;l++)f[l]._index=m;for(var l=n+a,d=e.length;l<d;l++)e[l]._index=l;return f},capitalize:function(e){return e.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(t,n){return n.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var c={on:function(e,t){if(typeof e!="string")r.each(e,function(o,l){this.on(l,o)},this);else{var n=this._eventTypes,i=n&&n[e],a=this._callbacks=this._callbacks||{};a=a[e]=a[e]||[],a.indexOf(t)===-1&&(a.push(t),i&&i.install&&a.length===1&&i.install.call(this,e))}return this},off:function(e,t){if(typeof e!="string"){r.each(e,function(l,u){this.off(u,l)},this);return}var n=this._eventTypes,i=n&&n[e],a=this._callbacks&&this._callbacks[e],o;return a&&(!t||(o=a.indexOf(t))!==-1&&a.length===1?(i&&i.uninstall&&i.uninstall.call(this,e),delete this._callbacks[e]):o!==-1&&a.splice(o,1)),this},once:function(e,t){return this.on(e,T(function n(){t.apply(this,arguments),this.off(e,n)},"handler"))},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var i=r.slice(arguments,1),a=t&&t.target&&!t.currentTarget;n=n.slice(),a&&(t.currentTarget=this);for(var o=0,l=n.length;o<l;o++)if(n[o].apply(this,i)==!1){t&&t.stop&&t.stop();break}return a&&delete t.currentTarget,!0},responds:function(e){return!!(this._callbacks&&this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,i=e?"install":"uninstall";if(t){for(var a in n)if(n[a].length>0){var o=t[a],l=o&&o[i];l&&l.call(this,a)}}},statics:{inject:T(function e(t){var n=t._events;if(n){var i={};r.each(n,function(a,o){var l=typeof a=="string",u=l?a:o,f=r.capitalize(u),d=u.substring(2).toLowerCase();i[d]=l?{}:a,u="_"+u,t["get"+f]=function(){return this[u]},t["set"+f]=function(C){var M=this[u];M&&this.off(d,M),C&&this.on(d,C),this[u]=C}}),t._eventTypes=i}return e.base.apply(this,arguments)},"inject")}},g=r.extend({_class:"PaperScope",initialize:T(function e(){Ve=this,this.settings=new r({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var n=tt.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:Gt.nativeModes},tt.release(n)}if(!this.agent){var i=p.navigator.userAgent.toLowerCase(),a=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],o=a==="darwin"?"mac":a,l=t.agent=t.browser={platform:o};o&&(l[o]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(u,f,d,C,M){if(!l.chrome){var P=f==="opera"?C:/^(node|trident)$/.test(f)?M:d;l.version=P,l.versionNumber=parseFloat(P),f={trident:"msie",jsdom:"node"}[f]||f,l.name=f,l[f]=!0}}),l.chrome&&delete l.webkit,l.atom&&delete l.chrome}},"PaperScope"),version:"0.12.17",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var n=Ve.PaperScript.execute(e,this,t);return Fe.updateFocus(),n},install:function(e){var t=this;r.each(["project","view","tool"],function(i){r.define(e,i,{configurable:!0,get:function(){return t[i]}})});for(var n in this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return Ve=this,this.project=new W(e),this},createCanvas:function(e,t){return tt.getCanvas(e,t)},activate:function(){Ve=this},clear:function(){for(var e=this.projects,t=this.tools,n=e.length-1;n>=0;n--)e[n].remove();for(var n=t.length-1;n>=0;n--)t[n].remove()},remove:function(){this.clear(),delete g._scopes[this._id]},statics:new function(){function e(t){return t+="Attribute",function(n,i){return n[t](i)||n[t]("data-paper-"+i)}}return T(e,"handleAttribute"),{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),h=r.extend(c,{initialize:function(e){this._scope=Ve,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(r.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),O={findItemBoundsCollisions:function(e,t,n){function i(l){for(var u=new Array(l.length),f=0;f<l.length;f++){var d=l[f].getBounds();u[f]=[d.left,d.top,d.right,d.bottom]}return u}T(i,"getBounds");var a=i(e),o=!t||t===e?a:i(t);return this.findBoundsCollisions(a,o,n||0)},findCurveBoundsCollisions:function(e,t,n,i){function a(P){for(var b=Math.min,U=Math.max,A=new Array(P.length),V=0;V<P.length;V++){var E=P[V];A[V]=[b(E[0],E[2],E[4],E[6]),b(E[1],E[3],E[5],E[7]),U(E[0],E[2],E[4],E[6]),U(E[1],E[3],E[5],E[7])]}return A}T(a,"getBounds");var o=a(e),l=!t||t===e?o:a(t);if(i){for(var u=this.findBoundsCollisions(o,l,n||0,!1,!0),f=this.findBoundsCollisions(o,l,n||0,!0,!0),d=[],C=0,M=u.length;C<M;C++)d[C]={hor:u[C],ver:f[C]};return d}return this.findBoundsCollisions(o,l,n||0)},findBoundsCollisions:function(e,t,n,i,a){var o=!t||e===t,l=o?e:e.concat(t),u=e.length,f=l.length;function d(xe,be,Te){for(var ve=0,_e=xe.length;ve<_e;){var Pe=_e+ve>>>1;l[xe[Pe]][be]<Te?ve=Pe+1:_e=Pe}return ve-1}T(d,"binarySearch");for(var C=i?1:0,M=C+2,P=i?0:1,b=P+2,U=new Array(f),A=0;A<f;A++)U[A]=A;U.sort(function(xe,be){return l[xe][C]-l[be][C]});for(var V=[],E=new Array(u),A=0;A<f;A++){var B=U[A],y=l[B],k=o?B:B-u,H=B<u,j=o||!H,z=H?[]:null;if(V.length){var G=d(V,M,y[C]-n)+1;if(V.splice(0,G),o&&a){z=z.concat(V);for(var Q=0;Q<V.length;Q++){var Y=V[Q];E[Y].push(k)}}else for(var re=y[b],Z=y[P],Q=0;Q<V.length;Q++){var Y=V[Q],ie=l[Y],se=Y<u,ue=o||Y>=u;(a||(H&&ue||j&&se)&&re>=ie[P]-n&&Z<=ie[b]+n)&&(H&&ue&&z.push(o?Y:Y-u),j&&se&&E[Y].push(k))}}if(H&&(e===t&&z.push(B),E[B]=z),V.length){var le=y[M],he=d(V,M,le);V.splice(he+1,0,B)}else V.push(B)}for(var A=0;A<E.length;A++){var ye=E[A];ye&&ye.sort(function(be,Te){return be-Te})}return E}},x=r.extend({initialize:function(e){this.precision=r.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});x.instance=new x;var I=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,a=Math.pow,o=Math.log2||function(M){return Math.log(M)*Math.LOG2E},l=1e-12,u=112e-18;function f(M,P,b){return M<P?P:M>b?b:M}T(f,"clamp");function d(M,P,b){function U(G){var Q=G*134217729,Y=G-Q,re=Y+Q,Z=G-re;return[re,Z]}T(U,"split");var A=P*P-M*b,V=P*P+M*b;if(n(A)*3<V){var E=U(M),B=U(P),y=U(b),k=P*P,H=B[0]*B[0]-k+2*B[0]*B[1]+B[1]*B[1],j=M*b,z=E[0]*y[0]-j+E[0]*y[1]+E[1]*y[0]+E[1]*y[1];A=k-j+(H-z)}return A}T(d,"getDiscriminant");function C(){var M=Math.max.apply(Math,arguments);return M&&(M<1e-8||M>1e8)?a(2,-Math.round(o(M))):0}return T(C,"getNormalizationFactor"),{EPSILON:l,MACHINE_EPSILON:u,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(i(2)-1)/3,isZero:function(M){return M>=-l&&M<=l},isMachineZero:function(M){return M>=-u&&M<=u},clamp:f,integrate:function(M,P,b,U){for(var A=e[U-2],V=t[U-2],E=(b-P)*.5,B=E+P,y=0,k=U+1>>1,H=U&1?V[y++]*M(B):0;y<k;){var j=E*A[y];H+=V[y++]*(M(B+j)+M(B-j))}return E*H},findRoot:function(M,P,b,U,A,V,E){for(var B=0;B<V;B++){var y=M(b),k=y/P(b),H=b-k;if(n(k)<E){b=H;break}y>0?(A=b,b=H<=U?(U+A)*.5:H):(U=b,b=H>=A?(U+A)*.5:H)}return f(b,U,A)},solveQuadratic:function(M,P,b,U,A,V){var E,B=1/0;if(n(M)<l){if(n(P)<l)return n(b)<l?-1:0;E=-b/P}else{P*=-.5;var y=d(M,P,b);if(y&&n(y)<u){var k=C(n(M),n(P),n(b));k&&(M*=k,P*=k,b*=k,y=d(M,P,b))}if(y>=-u){var H=y<0?0:i(y),j=P+(P<0?-H:H);j===0?(E=b/M,B=-E):(E=j/M,B=b/j)}}var z=0,G=A==null,Q=A-l,Y=V+l;return isFinite(E)&&(G||E>Q&&E<Y)&&(U[z++]=G?E:f(E,A,V)),B!==E&&isFinite(B)&&(G||B>Q&&B<Y)&&(U[z++]=G?B:f(B,A,V)),z},solveCubic:function(M,P,b,U,A,V,E){var B=C(n(M),n(P),n(b),n(U)),y,k,H,j,z;B&&(M*=B,P*=B,b*=B,U*=B);function G(he){y=he;var ye=M*y;k=ye+P,H=k*y+b,j=(ye+k)*y+H,z=H*y+U}if(T(G,"evaluate"),n(M)<l)M=P,k=b,H=U,y=1/0;else if(n(U)<l)k=P,H=b,y=0;else{G(-(P/M)/3);var Q=z/M,Y=a(n(Q),1/3),re=Q<0?-1:1,Z=-j/M,ie=Z>0?1.324717957244746*Math.max(Y,i(Z)):Y,se=y-re*ie;if(se!==y){do G(se),se=j===0?y:y-z/j/(1+u);while(re*se>re*y);n(M)*y*y>n(U/y)&&(H=-U/y,k=(H-b)/y)}}var ue=I.solveQuadratic(M,k,H,A,V,E),le=V==null;return isFinite(y)&&(ue===0||ue>0&&y!==A[0]&&y!==A[1])&&(le||y>V-l&&y<E+l)&&(A[ue++]=le?y:f(y,V,E)),ue}}},S={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}else return this._id++}},s=r.extend({_class:"Point",_readIndex:!0,initialize:T(function(t,n){var i=typeof t,a=this.__read,o=0;if(i==="number"){var l=typeof n=="number";this._set(t,l?n:t),a&&(o=l?2:1)}else if(i==="undefined"||t===null)this._set(0,0),a&&(o=t===null?1:0);else{var u=i==="string"?t.split(/[\s,]+/)||[]:t;o=1,Array.isArray(u)?this._set(+u[0],+(u.length>1?u[1]:u[0])):"x"in u?this._set(u.x||0,u.y||0):"width"in u?this._set(u.width||0,u.height||0):"angle"in u?(this._set(u.length||0,0),this.setAngle(u.angle||0)):(this._set(0,0),o=0)}return a&&(this.__read=o),this},"Point"),set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new s(this.x,this.y)},toString:function(){var e=x.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();I.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=s.read(arguments),t=this.getLength()*e.getLength();if(I.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(n<-1?-1:n>1?1:n)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=s.read(arguments);return Math.atan2(this.cross(e),this.dot(e))*180/Math.PI},getDistance:function(){var e=arguments,t=s.read(e),n=t.x-this.x,i=t.y-this.y,a=n*n+i*i,o=r.read(e);return o?a:Math.sqrt(a)},normalize:function(e){e===m&&(e=1);var t=this.getLength(),n=t!==0?e/t:0,i=new s(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(e,t){if(e===0)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,i=Math.sin(e),a=Math.cos(e);return n=new s(n.x*a-n.y*i,n.x*i+n.y*a),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=s.read(arguments);return new s(this.x+e.x,this.y+e.y)},subtract:function(){var e=s.read(arguments);return new s(this.x-e.x,this.y-e.y)},multiply:function(){var e=s.read(arguments);return new s(this.x*e.x,this.y*e.y)},divide:function(){var e=s.read(arguments);return new s(this.x/e.x,this.y/e.y)},modulo:function(){var e=s.read(arguments);return new s(this.x%e.x,this.y%e.y)},negate:function(){return new s(-this.x,-this.y)},isInside:function(){return F.read(arguments).contains(this)},isClose:function(){var e=arguments,t=s.read(e),n=r.read(e);return this.getDistance(t)<=n},isCollinear:function(){var e=s.read(arguments);return s.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=s.read(arguments);return s.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=I.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=s.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=s.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=s.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new s(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=s.read(e),n=s.read(e);return new s(Math.min(t.x,n.x),Math.min(t.y,n.y))},max:function(){var e=arguments,t=s.read(e),n=s.read(e);return new s(Math.max(t.x,n.x),Math.max(t.y,n.y))},random:function(){return new s(Math.random(),Math.random())},isCollinear:function(e,t,n,i){return Math.abs(e*i-t*n)<=Math.sqrt((e*e+t*t)*(n*n+i*i))*1e-8},isOrthogonal:function(e,t,n,i){return Math.abs(e*n+t*i)<=Math.sqrt((e*e+t*t)*(n*n+i*i))*1e-8}}},r.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new s(t(this.x),t(this.y))}},{})),w=s.extend({initialize:T(function(t,n,i,a){this._x=t,this._y=n,this._owner=i,this._setter=a},"Point"),_set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),_=r.extend({_class:"Size",_readIndex:!0,initialize:T(function(t,n){var i=typeof t,a=this.__read,o=0;if(i==="number"){var l=typeof n=="number";this._set(t,l?n:t),a&&(o=l?2:1)}else if(i==="undefined"||t===null)this._set(0,0),a&&(o=t===null?1:0);else{var u=i==="string"?t.split(/[\s,]+/)||[]:t;o=1,Array.isArray(u)?this._set(+u[0],+(u.length>1?u[1]:u[0])):"width"in u?this._set(u.width||0,u.height||0):"x"in u?this._set(u.x||0,u.y||0):(this._set(0,0),o=0)}return a&&(this.__read=o),this},"Size"),set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new _(this.width,this.height)},toString:function(){var e=x.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=_.read(arguments);return new _(this.width+e.width,this.height+e.height)},subtract:function(){var e=_.read(arguments);return new _(this.width-e.width,this.height-e.height)},multiply:function(){var e=_.read(arguments);return new _(this.width*e.width,this.height*e.height)},divide:function(){var e=_.read(arguments);return new _(this.width/e.width,this.height/e.height)},modulo:function(){var e=_.read(arguments);return new _(this.width%e.width,this.height%e.height)},negate:function(){return new _(-this.width,-this.height)},isZero:function(){var e=I.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new _(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new _(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new _(Math.random(),Math.random())}}},r.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new _(t(this.width),t(this.height))}},{})),N=_.extend({initialize:T(function(t,n,i,a){this._width=t,this._height=n,this._owner=i,this._setter=a},"Size"),_set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),F=r.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:T(function(t,n,i,a){var o=arguments,l=typeof t,u;if(l==="number"?(this._set(t,n,i,a),u=4):l==="undefined"||t===null?(this._set(0,0,0,0),u=t===null?1:0):o.length===1&&(Array.isArray(t)?(this._set.apply(this,t),u=1):t.x!==m||t.width!==m?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),u=1):t.from===m&&t.to===m&&(this._set(0,0,0,0),r.readSupported(o,this)&&(u=1))),u===m){var f=s.readNamed(o,"from"),d=r.peek(o),C=f.x,M=f.y,P,b;if(d&&d.x!==m||r.hasNamed(o,"to")){var U=s.readNamed(o,"to");P=U.x-C,b=U.y-M,P<0&&(C=U.x,P=-P),b<0&&(M=U.y,b=-b)}else{var A=_.read(o);P=A.width,b=A.height}this._set(C,M,P,b),u=o.__index}var V=o.__filtered;return V&&(this.__filtered=V),this.__read&&(this.__read=u),this},"Rectangle"),set:"#initialize",_set:function(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this},clone:function(){return new F(this.x,this.y,this.width,this.height)},equals:function(e){var t=r.isPlainValue(e)?F.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=x.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){var t=e?s:w;return new t(this.x,this.y,this,"setPoint")},setPoint:function(){var e=s.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){var t=e?_:N;return new t(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=_.read(arguments),t=this._sx,n=this._sy,i=e.width,a=e.height;t&&(this.x+=(this.width-i)*t),n&&(this.y+=(this.height-a)*n),this.width=i,this.height=a,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=this._sx===.5?t*2:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=this._sy===.5?t*2:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=this._sx===.5?t*2:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=this._sy===.5?t*2:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||this._sx===.5?this.x=e-this.width/2:(this._sx&&(this.x+=(e-this.x)*2*this._sx),this.width=(e-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||this._sy===.5?this.y=e-this.height/2:(this._sy&&(this.y+=(e-this.y)*2*this._sy),this.height=(e-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(e){var t=e?s:w;return new t(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=s.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(e){return e&&e.width!==m||(Array.isArray(e)?e:arguments).length===4?this._containsRectangle(F.read(arguments)):this._containsPoint(s.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=F.read(arguments),t=r.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=F.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),i=Math.min(this.x+this.width,e.x+e.width),a=Math.min(this.y+this.height,e.y+e.height);return new F(t,n,i-t,a-n)},unite:function(){var e=F.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x+e.width),a=Math.max(this.y+this.height,e.y+e.height);return new F(t,n,i-t,a-n)},include:function(){var e=s.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x),a=Math.max(this.y+this.height,e.y);return new F(t,n,i-t,a-n)},expand:function(){var e=_.read(arguments),t=e.width,n=e.height;return new F(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===m?e:t)-this.height)}},r.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var n=e.join(""),i=/^[RL]/.test(n);t>=4&&(e[1]+=i?"Y":"X");var a=e[i?0:1],o=e[i?1:0],l="get"+a,u="get"+o,f="set"+a,d="set"+o,C="get"+n,M="set"+n;this[C]=function(P){var b=P?s:w;return new b(this[l](),this[u](),this,M)},this[M]=function(){var P=s.read(arguments);this[f](P.x),this[d](P.y)}},{beans:!0})),K=F.extend({initialize:T(function(t,n,i,a,o,l){this._set(t,n,i,a,!0),this._owner=o,this._setter=l},"Rectangle"),_set:function(e,t,n,i,a){return this._x=e,this._y=t,this._width=n,this._height=i,a||this._owner[this._setter](this),this}},new function(){var e=F.prototype;return r.each(["x","y","width","height"],function(t){var n=r.capitalize(t),i="_"+t;this["get"+n]=function(){return this[i]},this["set"+n]=function(a){this[i]=a,this._dontNotify||this._owner[this._setter](this)}},r.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(t){var n=this._owner;n._changeSelection&&n._changeSelection(2,t)}}))}),X=r.extend({_class:"Matrix",initialize:T(function e(t,n){var i=arguments,a=i.length,o=!0;if(a>=6?this._set.apply(this,i):a===1||a===2?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,n):Array.isArray(t)?this._set.apply(this,n?t.concat([n]):t):o=!1:a?o=!1:this.reset(),!o)throw new Error("Unsupported matrix parameters");return this},"Matrix"),set:"#initialize",_set:function(e,t,n,i,a,o,l){return this._a=e,this._b=t,this._c=n,this._d=i,this._tx=a,this._ty=o,l||this._changed(),this},_serialize:function(e,t){return r.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new X(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=x.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return n?(n.transform(null,r.pick(e,!0),t),this.isIdentity()):!1},translate:function(){var e=s.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=arguments,t=s.read(e),n=s.read(e,0,{readNull:!0});return n&&this.translate(n),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=s.read(arguments,1),n=t.x,i=t.y,a=Math.cos(e),o=Math.sin(e),l=n-n*a+i*o,u=i-n*o-i*a,f=this._a,d=this._b,C=this._c,M=this._d;return this._a=a*f+o*C,this._b=a*d+o*M,this._c=-o*f+a*C,this._d=-o*d+a*M,this._tx+=l*f+u*C,this._ty+=l*d+u*M,this._changed(),this},shear:function(){var e=arguments,t=s.read(e),n=s.read(e,0,{readNull:!0});n&&this.translate(n);var i=this._a,a=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*i,this._d+=t.x*a,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var e=arguments,t=s.read(e),n=s.read(e,0,{readNull:!0}),i=Math.PI/180,a=new s(Math.tan(t.x*i),Math.tan(t.y*i));return this.shear(a,n)},append:function(e,t){if(e){var n=this._a,i=this._b,a=this._c,o=this._d,l=e._a,u=e._c,f=e._b,d=e._d,C=e._tx,M=e._ty;this._a=l*n+f*a,this._c=u*n+d*a,this._b=l*i+f*o,this._d=u*i+d*o,this._tx+=C*n+M*a,this._ty+=C*i+M*o,t||this._changed()}return this},prepend:function(e,t){if(e){var n=this._a,i=this._b,a=this._c,o=this._d,l=this._tx,u=this._ty,f=e._a,d=e._c,C=e._b,M=e._d,P=e._tx,b=e._ty;this._a=f*n+d*i,this._c=f*a+d*o,this._b=C*n+M*i,this._d=C*a+M*o,this._tx=f*l+d*u+P,this._ty=C*l+M*u+b,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,i=this._d,a=this._tx,o=this._ty,l=e*i-t*n,u=null;return l&&!isNaN(l)&&isFinite(a)&&isFinite(o)&&(this._a=i/l,this._b=-t/l,this._c=-n/l,this._d=e/l,this._tx=(n*o-i*a)/l,this._ty=(t*a-e*o)/l,u=this),u},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new X(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return arguments.length<3?this._transformPoint(s.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var i=e.x,a=e.y;return t||(t=new s),t._set(i*this._a+a*this._c+this._tx,i*this._b+a*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var i=0,a=2*n;i<a;i+=2){var o=e[i],l=e[i+1];t[i]=o*this._a+l*this._c+this._tx,t[i+1]=o*this._b+l*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,i=t+e.width,a=n+e.height,o=[t,n,i,n,i,a,t,a];return this._transformCoordinates(o,o,4)},_transformBounds:function(e,t,n){for(var i=this._transformCorners(e),a=i.slice(0,2),o=a.slice(),l=2;l<8;l++){var u=i[l],f=l&1;u<a[f]?a[f]=u:u>o[f]&&(o[f]=u)}return t||(t=new F),t._set(a[0],a[1],o[0]-a[0],o[1]-a[1],n)},inverseTransform:function(){return this._inverseTransform(s.read(arguments))},_inverseTransform:function(e,t,n){var i=this._a,a=this._b,o=this._c,l=this._d,u=this._tx,f=this._ty,d=i*l-a*o,C=null;if(d&&!isNaN(d)&&isFinite(u)&&isFinite(f)){var M=e.x-this._tx,P=e.y-this._ty;t||(t=new s),C=t._set((M*l-P*o)/d,(P*i-M*a)/d,n)}return C},decompose:function(){var e=this._a,t=this._b,n=this._c,i=this._d,a=e*i-t*n,o=Math.sqrt,l=Math.atan2,u=180/Math.PI,f,d,C;if(e!==0||t!==0){var M=o(e*e+t*t);f=Math.acos(e/M)*(t>0?1:-1),d=[M,a/M],C=[l(e*n+t*i,M*M),0]}else if(n!==0||i!==0){var P=o(n*n+i*i);f=Math.asin(n/P)*(i>0?1:-1),d=[a/P,P],C=[0,l(e*n+t*i,P*P)]}else f=0,C=d=[0,0];return{translation:this.getTranslation(),rotation:f*u,scaling:new s(d),skewing:new s(C[0]*u,C[1]*u)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new s(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},r.each(["a","b","c","d","tx","ty"],function(e){var t=r.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(i){this[n]=i,this._changed()}},{})),L=r.extend({_class:"Line",initialize:T(function(t,n,i,a,o){var l=!1;arguments.length>=4?(this._px=t,this._py=n,this._vx=i,this._vy=a,l=o):(this._px=t.x,this._py=t.y,this._vx=n.x,this._vy=n.y,l=i),l||(this._vx-=this._px,this._vy-=this._py)},"Line"),getPoint:function(){return new s(this._px,this._py)},getVector:function(){return new s(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return L.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return L.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return L.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return s.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return s.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,i,a,o,l,u,f,d){f||(n-=e,i-=t,l-=a,u-=o);var C=n*u-i*l;if(!I.isMachineZero(C)){var M=e-a,P=t-o,b=(l*P-u*M)/C,U=(n*P-i*M)/C,A=1e-12,V=-A,E=1+A;if(d||V<b&&b<E&&V<U&&U<E)return d||(b=b<=0?0:b>=1?1:b),new s(e+b*n,t+b*i)}},getSide:function(e,t,n,i,a,o,l,u){l||(n-=e,i-=t);var f=a-e,d=o-t,C=f*i-d*n;return!u&&I.isMachineZero(C)&&(C=(f*n+f*n)/(n*n+i*i),C>=0&&C<=1&&(C=0)),C<0?-1:C>0?1:0},getSignedDistance:function(e,t,n,i,a,o,l){return l||(n-=e,i-=t),n===0?i>0?a-e:e-a:i===0?n<0?o-t:t-o:((a-e)*i-(o-t)*n)/(i>n?i*Math.sqrt(1+n*n/(i*i)):n*Math.sqrt(1+i*i/(n*n)))},getDistance:function(e,t,n,i,a,o,l){return Math.abs(L.getSignedDistance(e,t,n,i,a,o,l))}}}),W=h.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:T(function(t){h.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new $t(null,null,this),this._view=Fe.create(this,t||tt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},"Project"),_serialize:function(e,t){return r.serialize(this._children,e,!0,t)},_changed:function(e,t){if(e&1){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&t){var a=this._changesById,o=t._id,l=a[o];l?l.flags|=e:i.push(a[o]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:T(function e(){return e.base.call(this)?(this._view&&this._view.remove(),!0):!1},"remove"),getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new ee({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:ne,match:function(n){var i=n._definition,a=i._id;return t[a]||(t[a]=!0,e.push(i)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var i=e[n],a=i._selection;a&1&&i.isInserted()?t.push(i):a||this._updateSelection(i)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(m,e)},insertLayer:function(e,t){if(t instanceof ee){t._remove(!1,!0),r.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,n){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(m,new ee($.NO_INSERT),!0)).insertChild(e,t),n&&t.activate&&t.activate(),t},getItems:function(e){return $._getItems(this,e)},getItem:function(e){return $._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return r.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){e==="mouseup"&&(t.mousedrag=null);var n=t[e];if(n){for(var i in n){var a=n[i];for(var o in t){var l=t[o];l&&l!=n&&delete l[a._id]}a.remove()}t[e]=null}}},draw:function(e,t,n){this._updateVersion++,e.save(),t.applyToContext(e);for(var i=this._children,a=new r({offset:new s(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new X],updateMatrix:!0}),o=0,l=i.length;o<l;o++)i[o].draw(e,a);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var u=this._selectionItems,f=this._scope.settings.handleSize,d=this._updateVersion;for(var C in u)u[C]._drawSelection(e,t,f,u,d);e.restore()}}}),$=r.extend(c,{statics:{extend:T(function e(t){return t._serializeFields&&(t._serializeFields=r.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},"extend"),INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new X,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return r.each(e,function(t){this._events[t]={install:function(n){this.getView()._countItemEvent(n,1)},uninstall:function(n){this.getView()._countItemEvent(n,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:T(function(){},"Item"),_initialize:function(e,t){var n=e&&r.isPlainObject(e),i=n&&e.internal===!0,a=this._matrix=new X,o=n&&e.project||Ve.project,l=Ve.settings;return this._id=i?null:S.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&l.applyMatrix,t&&a.translate(t),a._owner=this,this._style=new $t(o._currentStyle,this,o),i||n&&e.insert==!1||!l.insertItems&&!(n&&e.insert==!0)?this._setProject(o):(n&&e.parent||o)._insertItem(m,this,!0),n&&e!==$.NO_INSERT&&e!==$.INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(e,t){var n={},i=this;function a(o){for(var l in o){var u=i[l];r.equals(u,l==="leading"?o.fontSize*1.2:o[l])||(n[l]=r.serialize(u,e,l!=="data",t))}}return T(a,"serialize"),a(this._serializeFields),this instanceof q||a(this._style._defaults),[this._class,n]},_changed:function(e){var t=this._symbol,n=this._parent||t,i=this._project;e&8&&(this._bounds=this._position=this._decomposed=m),e&16&&(this._globalMatrix=m),n&&e&72&&$._clearBoundsCache(n),e&2&&$._clearBoundsCache(this),i&&i._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var n=t._children,i=t._namedChildren;(i[e]=i[e]||[]).push(this),e in n||(n[e]=this)}this._name=e||m,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},r.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=r.capitalize(e),n="_"+e,i={locked:256,visible:265};this["get"+t]=function(){return this[n]},this["set"+t]=function(a){a!=this[n]&&(this[n]=a,this._changed(i[e]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren){for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0}return!!(this._selection&1)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,i=t.length;n<i;n++)t[n].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(this._selection&1);if(e&&t){for(var n=0,i=e.length;n<i;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,i=t.length;n<i;n++)t[n].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?s:w,n=this._position||(this._position=this._getPositionFromBounds());return new t(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(s.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new w(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=s.read(arguments,0,{clone:!0,readNull:!0}),this._position=m}},r.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(n){return this.getBounds(n,e)}},{beans:!0,getBounds:function(e,t){var n=t||e instanceof X,i=r.set({},n?t:e,this._boundsOptions);(!i.stroke||this.getStrokeScaling())&&(i.cacheItem=this);var a=this._getCachedBounds(n&&e,i).rect;return arguments.length?a:new K(a.x,a.y,a.width,a.height,this,"setBounds")},setBounds:function(){var e=F.read(arguments),t=this.getBounds(),n=this._matrix,i=new X,a=e.getCenter();i.translate(a),(e.width!=t.width||e.height!=t.height)&&(n.isInvertible()||(n.set(n._backup||new X().translate(n.getTranslation())),t=this.getBounds()),i.scale(t.width!==0?e.width/t.width:0,t.height!==0?e.height/t.height:0)),a=t.getCenter(),i.translate(-a.x,-a.y),this.transform(i)},_getBounds:function(e,t){var n=this._children;return!n||!n.length?new F:($._updateBoundsCache(this,t.cacheItem),$._getBounds(n,e,t))},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,n){e=e&&e._orNullIfIdentity();var i=t.internal&&!n,a=t.cacheItem,o=i?null:this._matrix._orNullIfIdentity(),l=a&&(!e||e.equals(o))&&this._getBoundsCacheKey(t,i),u=this._bounds;if($._updateBoundsCache(this._parent||this._symbol,a),l&&u&&l in u){var f=u[l];return{rect:f.rect.clone(),nonscaling:f.nonscaling}}var d=this._getBounds(e||o,t),C=d.rect||d,M=this._style,P=d.nonscaling||M.hasStroke()&&!M.getStrokeScaling();if(l){u||(this._bounds=u={});var f=u[l]={rect:C.clone(),nonscaling:P,internal:i}}return{rect:C,nonscaling:P}},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():e;return i&&i._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,i=e._boundsCache=e._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(t),i.ids[n]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=m;for(var n=0,i=t.list,a=i.length;n<a;n++){var o=i[n];o!==e&&(o._bounds=o._position=m,o._boundsCache&&$._clearBoundsCache(o))}}},_getBounds:function(e,t,n){var i=1/0,a=-i,o=i,l=a,u=!1;n=n||{};for(var f=0,d=e.length;f<d;f++){var C=e[f];if(C._visible&&!C.isEmpty(!0)){var M=C._getCachedBounds(t&&t.appended(C._matrix),n,!0),P=M.rect;i=Math.min(P.x,i),o=Math.min(P.y,o),a=Math.max(P.x+P.width,a),l=Math.max(P.y+P.height,l),M.nonscaling&&(u=!0)}}return{rect:isFinite(i)?new F(i,o,a-i,l-o):new F,nonscaling:u}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(t!=null&&e!=null){var n=this._decomposed;this.rotate(e-t),n&&(n.rotation=e,this._decomposed=n)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new w(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=s.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var n=this.getRotation(),i=this._decomposed,a=new X,o=I.isZero;if(o(e.x)||o(e.y))a.translate(i.translation),n&&a.rotate(n),a.scale(t.x,t.y),this._matrix.set(a);else{var l=this.getPosition(!0);a.translate(l),n&&a.rotate(n),a.scale(t.x/e.x,t.y/e.y),n&&a.rotate(-n),a.translate(l.negate()),this.transform(a)}i&&(i.scaling=t,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var n=this._parent,i=[];n;){if(!n._globalMatrix){t=null;for(var a=0,o=i.length;a<o;a++)i[a]._globalMatrix=null;break}i.push(n),n=n._parent}if(!t){t=this._globalMatrix=this._matrix.clone();var n=this._parent;n&&t.prepend(n.getGlobalMatrix(!0))}return e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,i=0,a=n&&n.length;i<a;i++)n[i]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:T(function e(t){e.base.call(this,t);for(var n=this._children,i=0,a=n&&n.length;i<a;i++)n[i]._installEvents(t)},"_installEvents"),getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof ee)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return r.equals(this._children,e._children)},clone:function(e){var t=new this.constructor($.NO_INSERT),n=this._children,i=r.pick(e?e.insert:m,e===m||e===!0),a=r.pick(e?e.deep:m,!0);n&&t.copyAttributes(this),(!n||a)&&t.copyContent(this),n||t.copyAttributes(this),i&&t.insertAbove(this);var o=this._name,l=this._parent;if(o&&l){for(var n=l._children,u=o,f=1;n[o];)o=u+" "+f++;o!==u&&t.setName(o)}return t},copyContent:function(e){for(var t=e._children,n=0,i=t&&t.length;n<i;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,a=n.length;i<a;i++){var o=n[i];e.hasOwnProperty(o)&&(this[o]=e[o])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var l=e._data,u=e._name;this._data=l?r.clone(l):null,u&&this.setName(u)},rasterize:function(e,t){var n,i,a;r.isPlainObject(e)?(n=e.resolution,i=e.insert,a=e.raster):(n=e,i=t),a||(a=new ae($.NO_INSERT));var o=this.getStrokeBounds(),l=(n||this.getView().getResolution())/72,u=o.getTopLeft().floor(),f=o.getBottomRight().ceil(),d=new _(f.subtract(u)),C=d.multiply(l);if(a.setSize(C,!0),!C.isZero()){var M=a.getContext(!0),P=new X().scale(l).translate(u.negate());M.save(),P.applyToContext(M),this.draw(M,new r({matrices:[P]})),M.restore()}return a._matrix.set(new X().translate(u.add(d.divide(2))).scale(1/l)),(i===m||i)&&a.insertAbove(this),a},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(s.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return F.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new we.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof $?this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0:!1}},new function(){function e(){var i=arguments;return this._hitTest(s.read(i),pe.getOptions(i))}T(e,"hitTest");function t(){var i=arguments,a=s.read(i),o=pe.getOptions(i),l=[];return this._hitTest(a,new r({all:l},o)),l}T(t,"hitTestAll");function n(i,a,o,l){var u=this._children;if(u)for(var f=u.length-1;f>=0;f--){var d=u[f],C=d!==l&&d._hitTest(i,a,o);if(C&&!a.all)return C}return null}return T(n,"hitTestChildren"),W.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var i=this._matrix,a=n?n.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),o=Math.max(t.tolerance,1e-12),l=t._tolerancePadding=new _(we._getStrokePadding(o,i._shiftless().invert()));if(e=i._inverseTransform(e),!e||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(l.multiply(2))._containsPoint(e))return null;var u=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==r.hyphenate(this._class)||t.class&&!(this instanceof t.class)),f=t.match,d=this,C,M;function P(y){return y&&f&&!f(y)&&(y=null),y&&t.all&&t.all.push(y),y}T(P,"filter");function b(y,k){var H=k?C["get"+k]():d.getPosition();if(e.subtract(H).divide(l).length<=1)return new pe(y,d,{name:k?r.hyphenate(k):y,point:H})}T(b,"checkPoint");var U=t.position,A=t.center,V=t.bounds;if(u&&this._parent&&(U||A||V)){if((A||V)&&(C=this.getInternalBounds()),M=U&&b("position")||A&&b("center","Center"),!M&&V)for(var E=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],B=0;B<8&&!M;B++)M=b("bounds",E[B]);M=P(M)}return M||(M=this._hitTestChildren(e,t,a)||u&&P(this._hitTestSelf(e,t,a,this.getStrokeScaling()?null:a._shiftless().invert()))||null),M&&M.point&&(M.point=i.transform(M.point)),M},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new pe("fill",this)},matches:function(e,t){function n(l,u){for(var f in l)if(l.hasOwnProperty(f)){var d=l[f],C=u[f];if(r.isPlainObject(d)&&r.isPlainObject(C)){if(!n(d,C))return!1}else if(!r.equals(d,C))return!1}return!0}T(n,"matchObject");var i=typeof e;if(i==="object"){for(var a in e)if(e.hasOwnProperty(a)&&!this.matches(a,e[a]))return!1;return!0}else{if(i==="function")return e(this);if(e==="match")return t(this);var o=/^(empty|editable)$/.test(e)?this["is"+r.capitalize(e)]():e==="type"?r.hyphenate(this._class):this[e];if(e==="class"){if(typeof t=="function")return this instanceof t;o=this._class}if(typeof t=="function")return!!t(o);if(t){if(t.test)return t.test(o);if(r.isPlainObject(t))return n(t,o)}return r.equals(o,t)}},getItems:function(e){return $._getItems(this,e,this._matrix)},getItem:function(e){return $._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:T(function e(t,n,i,a,o){if(!a){var l=typeof n=="object"&&n,u=l&&l.overlapping,f=l&&l.inside,d=u||f,P=d&&F.read([d]);a={items:[],recursive:l&&l.recursive!==!1,inside:!!f,overlapping:!!u,rect:P,path:u&&new we.Rectangle({rectangle:P,insert:!1})},l&&(n=r.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var C=t._children,M=a.items,P=a.rect;i=P&&(i||new X);for(var b=0,U=C&&C.length;b<U;b++){var A=C[b],V=i&&i.appended(A._matrix),E=!0;if(P){var d=A.getBounds(V);if(!P.intersects(d))continue;P.contains(d)||a.overlapping&&(d.contains(P)||a.path.intersects(A,V))||(E=!1)}if(E&&A.matches(n)&&(M.push(A),o)||(a.recursive!==!1&&e(A,n,V,a,o),o&&M.length>0))break}return M},"_getItems")}},{importJSON:function(e){var t=r.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(m,e)},insertChild:function(e,t){var n=t?this.insertChildren(e,[t]):null;return n&&n[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var n=this._children;if(n&&t&&t.length>0){t=r.slice(t);for(var i={},a=t.length-1;a>=0;a--){var o=t[a],l=o&&o._id;!o||i[l]?t.splice(a,1):(o._remove(!1,!0),i[l]=!0)}r.splice(n,t,e,0);for(var u=this._project,f=u._changes,a=0,d=t.length;a<d;a++){var o=t[a],C=o._name;o._parent=this,o._setProject(u,!0),C&&o.setName(C),f&&o._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var n=e&&e._getOwner(),i=e!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(e._index+t,i)),i},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(m,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(m,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&t.length===1){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,i=this._name,a=n[i],o=a?a.indexOf(this):-1;o!==-1&&(t[i]==this&&delete t[i],a.splice(o,1),a.length?t[i]=a[0]:delete n[i])}},_remove:function(e,t){var n=this._getOwner(),i=this._project,a=this._index;return this._style&&this._style._dispose(),n?(this._name&&this._removeNamed(),a!=null&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),r.splice(n._children,null,a,1)),this._installEvents(!1),e&&i._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=r.pick(t,this._children.length);for(var n=r.splice(this._children,null,e,t-e),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,n=t?t.length:0;if(e){for(var i=0;i<n;i++)if(!t[i].isEmpty(e))return!1;return!0}return!n},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(l){var u=[];do u.unshift(l);while(l=l._parent);return u}T(t,"getList");for(var n=t(this),i=t(e),a=0,o=Math.min(n.length,i.length);a<o;a++)if(n[a]!=i[a])return n[a]._index<i[a]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(e){return this._getOrder(e)===-1},isBelow:function(e){return this._getOrder(e)===1},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return e?e.isDescendant(this):!1},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},r.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var n=arguments,i=(t?r:s).read(n),a=s.read(n,0,{readNull:!0});return this.transform(new X()[e](i,a||this.getPosition(!0)))}},{translate:function(){var e=new X;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n){var i=this._matrix,a=e&&!e.isIdentity(),o=n&&this._canApplyMatrix||this._applyMatrix&&(a||!i.isIdentity()||t&&this._children);if(!a&&!o)return this;if(a){!e.isInvertible()&&i.isInvertible()&&(i._backup=i.getValues()),i.prepend(e,!0);var l=this._style,u=l.getFillColor(!0),f=l.getStrokeColor(!0);u&&u.transform(e),f&&f.transform(e)}if(o&&(o=this._transformContent(i,t,n))){var d=this._pivot;d&&i._transformPoint(d,d,!0),i.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var C=this._bounds,M=this._position;(a||o)&&this._changed(25);var P=a&&C&&e.decompose();if(P&&P.skewing.isZero()&&P.rotation%90===0){for(var b in C){var U=C[b];if(U.nonscaling)delete C[b];else if(o||!U.internal){var A=U.rect;e._transformBounds(A,A)}}this._bounds=C;var V=C[this._getBoundsCacheKey(this._boundsOptions||{})];V&&(this._position=this._getPositionFromBounds(V.rect))}else a&&M&&this._pivot&&(this._position=e._transformPoint(M,M));return this},_transformContent:function(e,t,n){var i=this._children;if(i){for(var a=0,o=i.length;a<o;a++)i[a].transform(e,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(s.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(s.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(s.read(arguments))},localToParent:function(){return this._matrix._transformPoint(s.read(arguments))},fitBounds:function(e,t){e=F.read(arguments);var n=this.getBounds(),i=n.height/n.width,a=e.height/e.width,o=(t?i>a:i<a)?e.width/n.width:e.height/n.height,l=new F(new s,new _(n.width*o,n.height*o));l.setCenter(e.getCenter()),this.setBounds(l)}}),{_setStyles:function(e,t,n){var i=this._style,a=this._matrix;if(i.hasFill()&&(e.fillStyle=i.getFillColor().toCanvasStyle(e,a)),i.hasStroke()){e.strokeStyle=i.getStrokeColor().toCanvasStyle(e,a),e.lineWidth=i.getStrokeWidth();var o=i.getStrokeJoin(),l=i.getStrokeCap(),u=i.getMiterLimit();if(o&&(e.lineJoin=o),l&&(e.lineCap=l),u&&(e.miterLimit=u),Ve.support.nativeDash){var f=i.getDashArray(),d=i.getDashOffset();f&&f.length&&("setLineDash"in e?(e.setLineDash(f),e.lineDashOffset=d):(e.mozDash=f,e.mozDashOffset=d))}}if(i.hasShadow()){var C=t.pixelRatio||1,M=n._shiftless().prepend(new X().scale(C,C)),P=M.transform(new s(i.getShadowBlur(),0)),b=M.transform(this.getShadowOffset());e.shadowColor=i.getShadowColor().toCanvasStyle(e),e.shadowBlur=P.getLength(),e.shadowOffsetX=b.x,e.shadowOffsetY=b.y}},draw:function(e,t,n){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var i=t.matrices,a=t.viewMatrix,o=this._matrix,l=i[i.length-1].appended(o);if(!!l.isInvertible()){a=a?a.appended(l):l,i.push(l),t.updateMatrix&&(this._globalMatrix=l);var u=this._blendMode,f=I.clamp(this._opacity,0,1),d=u==="normal",C=Gt.nativeModes[u],M=d&&f===1||t.dontStart||t.clip||(C||d&&f<1)&&this._canComposite(),P=t.pixelRatio||1,b,U,A;if(!M){var V=this.getStrokeBounds(a);if(!V.width||!V.height){i.pop();return}A=t.offset,U=t.offset=V.getTopLeft().floor(),b=e,e=tt.getContext(V.getSize().ceil().add(1).multiply(P)),P!==1&&e.scale(P,P)}e.save();var E=n?n.appended(o):this._canScaleStroke&&!this.getStrokeScaling(!0)&&a,B=!M&&t.clipItem,y=!E||B;if(M?(e.globalAlpha=f,C&&(e.globalCompositeOperation=u)):y&&e.translate(-U.x,-U.y),y&&(M?o:a).applyToContext(e),B&&t.clipItem.draw(e,t.extend({clip:!0})),E){e.setTransform(P,0,0,P,0,0);var k=t.offset;k&&e.translate(-k.x,-k.y)}this._draw(e,t,a,E),e.restore(),i.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),M||(Gt.process(u,e,b,f,U.subtract(A).multiply(P)),tt.release(e),t.offset=A)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof Me)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,i,a){var o=this._selection,l=o&1,u=o&2||l&&this._selectBounds,f=o&4;if(this._drawSelected||(l=!1),(l||u||f)&&this._isUpdated(a)){var d,C=this.getSelectedColor(!0)||(d=this.getLayer())&&d.getSelectedColor(!0),M=t.appended(this.getGlobalMatrix(!0)),P=n/2;if(e.strokeStyle=e.fillStyle=C?C.toCanvasStyle(e):"#009dec",l&&this._drawSelected(e,M,i),f){var b=this.getPosition(!0),U=this._parent,A=U?U.localToGlobal(b):b,V=A.x,E=A.y;e.beginPath(),e.arc(V,E,P,0,Math.PI*2,!0),e.stroke();for(var B=[[0,-1],[1,0],[0,1],[-1,0]],y=P,k=n+1,H=0;H<4;H++){var j=B[H],z=j[0],G=j[1];e.moveTo(V+z*y,E+G*y),e.lineTo(V+z*k,E+G*k),e.stroke()}}if(u){var Q=M._transformCorners(this.getInternalBounds());e.beginPath();for(var H=0;H<8;H++)e[H?"lineTo":"moveTo"](Q[H],Q[++H]);e.closePath(),e.stroke();for(var H=0;H<8;H++)e.fillRect(Q[H]-P,Q[++H]-P,n,n)}}},_canComposite:function(){return!1}},r.each(["down","drag","up","move"],function(e){this["removeOn"+r.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,i=this._project,a=i._removeSets=i._removeSets||{};a[n]=a[n]||{},a[n][this._id]=this}return this}}),{tween:function(e,t,n){n||(n=t,t=e,e=null,n||(n=t,t=null));var i=n&&n.easing,a=n&&n.start,o=n!=null&&(typeof n=="number"?n:n.duration),l=new vn(this,e,t,o,i,a);function u(f){l._handleFrame(f.time*1e3),l.running||this.off("frame",u)}return T(u,"onFrame"),o&&this.on("frame",u),l},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),q=$.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:T(function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},"Group"),_changed:T(function e(t){e.base.call(this,t),t&2050&&(this._clipItem=m)},"_changed"),_getClipItem:function(){var e=this._clipItem;if(e===m){e=null;for(var t=this._children,n=0,i=t.length;n<i;n++)if(t[n]._clipMask){e=t[n];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:T(function e(t,n){var i=this._getClipItem();return i?i._getCachedBounds(i._matrix.prepended(t),r.set({},n,{stroke:!1})):e.base.call(this,t,n)},"_getBounds"),_hitTestChildren:T(function e(t,n,i){var a=this._getClipItem();return(!a||a.contains(t))&&e.base.call(this,t,n,i,a)},"_hitTestChildren"),_draw:function(e,t){var n=t.clip,i=!n&&this._getClipItem();t=t.extend({clipItem:i,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):i&&i.draw(e,t.extend({clip:!0}));for(var a=this._children,o=0,l=a.length;o<l;o++){var u=a[o];u!==i&&u.draw(e,t)}}}),ee=q.extend({_class:"Layer",initialize:T(function(){q.apply(this,arguments)},"Layer"),_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:T(function e(){return this._parent?e.base.call(this):this._index!=null},"isInserted"),activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),J=$.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:T(function(t,n){this._initialize(t,n)},"Shape"),_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&r.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new N(e.width,e.height,this,"setSize")},setSize:function(){var e=_.read(arguments);if(!this._size)this._size=e.clone();else if(!this._size.equals(e)){var t=this._type,n=e.width,i=e.height;t==="rectangle"?this._radius.set(_.min(this._radius,e.divide(2).abs())):t==="circle"?(n=i=(n+i)/2,this._radius=n/2):t==="ellipse"&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}},getRadius:function(){var e=this._radius;return this._type==="circle"?e:new N(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if(t==="circle"){if(e===this._radius)return;var n=e*2;this._radius=e,this._size._set(n,n)}else if(e=_.read(arguments),!this._radius)this._radius=e.clone();else{if(this._radius.equals(e))return;if(this._radius.set(e),t==="rectangle"){var n=_.max(this._size,e.multiply(2));this._size.set(n)}else t==="ellipse"&&this._size._set(e.width*2,e.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new we[r.capitalize(this._type)]({center:new s,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),Ve.settings.applyMatrix&&t.setApplyMatrix(!0),(e===m||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,n,i){var a=this._style,o=a.hasFill(),l=a.hasStroke(),u=t.dontFinish||t.clip,f=!i;if(o||l||u){var d=this._type,C=this._radius,M=d==="circle";if(t.dontStart||e.beginPath(),f&&M)e.arc(0,0,C,0,Math.PI*2,!0);else{var P=M?C:C.width,b=M?C:C.height,U=this._size,A=U.width,V=U.height;if(f&&d==="rectangle"&&P===0&&b===0)e.rect(-A/2,-V/2,A,V);else{var E=A/2,B=V/2,y=1-.5522847498307936,k=P*y,H=b*y,j=[-E,-B+b,-E,-B+H,-E+k,-B,-E+P,-B,E-P,-B,E-k,-B,E,-B+H,E,-B+b,E,B-b,E,B-H,E-k,B,E-P,B,-E+P,B,-E+k,B,-E,B-H,-E,B-b];i&&i.transform(j,j,32),e.moveTo(j[0],j[1]),e.bezierCurveTo(j[2],j[3],j[4],j[5],j[6],j[7]),E!==P&&e.lineTo(j[8],j[9]),e.bezierCurveTo(j[10],j[11],j[12],j[13],j[14],j[15]),B!==b&&e.lineTo(j[16],j[17]),e.bezierCurveTo(j[18],j[19],j[20],j[21],j[22],j[23]),E!==P&&e.lineTo(j[24],j[25]),e.bezierCurveTo(j[26],j[27],j[28],j[29],j[30],j[31])}}e.closePath()}!u&&(o||l)&&(this._setStyles(e,t,n),o&&(e.fill(a.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),l&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new F(this._size).setCenter(0,0),i=this._style,a=t.stroke&&i.hasStroke()&&i.getStrokeWidth();return e&&(n=e._transformBounds(n)),a?n.expand(we._getStrokePadding(a,this._getStrokeMatrix(e,t))):n}},new function(){function e(n,i,a){var o=n._radius;if(!o.isZero())for(var l=n._size.divide(2),u=1;u<=4;u++){var f=new s(u>1&&u<4?-1:1,u>2?-1:1),d=f.multiply(l),C=d.subtract(f.multiply(o)),M=new F(a?d.add(f.multiply(a)):d,C);if(M.contains(i))return{point:C,quadrant:u}}}T(e,"getCornerCenter");function t(n,i,a,o){var l=n.divide(i);return(!o||l.isInQuadrant(o))&&l.subtract(l.normalize()).multiply(i).divide(a).length<=1}return T(t,"isOnEllipseStroke"),{_contains:T(function n(i){if(this._type==="rectangle"){var a=e(this,i);return a?i.subtract(a.point).divide(this._radius).getLength()<=1:n.base.call(this,i)}else return i.divide(this.size).getLength()<=.5},"_contains"),_hitTestSelf:T(function n(i,a,o,l){var u=!1,f=this._style,d=a.stroke&&f.hasStroke(),C=a.fill&&f.hasFill();if(d||C){var M=this._type,P=this._radius,b=d?f.getStrokeWidth()/2:0,U=a._tolerancePadding.add(we._getStrokePadding(b,!f.getStrokeScaling()&&l));if(M==="rectangle"){var A=U.multiply(2),V=e(this,i,A);if(V)u=t(i.subtract(V.point),P,U,V.quadrant);else{var E=new F(this._size).setCenter(0,0),B=E.expand(A),y=E.expand(A.negate());u=B._containsPoint(i)&&!y._containsPoint(i)}}else u=t(i,P,U)}return u?new pe(d?"stroke":"fill",this):n.base.apply(this,arguments)},"_hitTestSelf")}},{statics:new function(){function e(t,n,i,a,o){var l=r.create(J.prototype);return l._type=t,l._size=i,l._radius=a,l._initialize(r.getNamed(o),n),l}return T(e,"createShape"),{Circle:function(){var t=arguments,n=s.readNamed(t,"center"),i=r.readNamed(t,"radius");return e("circle",n,new _(i*2),i,t)},Rectangle:function(){var t=arguments,n=F.readNamed(t,"rectangle"),i=_.min(_.readNamed(t,"radius"),n.getSize(!0).divide(2));return e("rectangle",n.getCenter(!0),n.getSize(!0),i,t)},Ellipse:function(){var t=arguments,n=J._readEllipse(t),i=n.radius;return e("ellipse",n.center,i.multiply(2),i,t)},_readEllipse:function(t){var n,i;if(r.hasNamed(t,"radius"))n=s.readNamed(t,"center"),i=_.readNamed(t,"radius");else{var a=F.readNamed(t,"rectangle");n=a.getCenter(!0),i=a.getSize(!0).divide(2)}return{center:n,radius:i}}}}}),ae=$.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:T(function(t,n){if(!this._initialize(t,n!==m&&s.read(arguments))){var i,a=typeof t,o=a==="string"?v.getElementById(t):a==="object"?t:null;if(o&&o!==$.NO_INSERT){if(o.getContext||o.naturalHeight!=null)i=o;else if(o){var l=_.read(arguments);l.isZero()||(i=tt.getCanvas(l))}}i?this.setImage(i):this.setSource(t)}this._size||(this._size=new _,this._loaded=!1)},"Raster"),_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var i=tt.getCanvas(e._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new N(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var n=_.read(arguments);if(n.equals(this._size))t&&this.clear();else if(n.width>0&&n.height>0){var i=!t&&this.getElement();this._setImage(tt.getCanvas(n)),i&&this.getContext(!0).drawImage(i,0,0,n.width,n.height)}else this._canvas&&tt.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||e.width===0&&e.height===0},getResolution:function(){var e=this._matrix,t=new s(0,0).transform(e),n=new s(1,0).transform(e).subtract(t),i=new s(0,1).transform(e).subtract(t);return new _(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function n(i){var a=t.getView(),o=i&&i.type||"load";a&&t.responds(o)&&(Ve=a._scope,t.emit(o,new Ct(i)))}T(n,"emit"),this._setImage(e),this._loaded?setTimeout(n,0):e&&$e.add(e,{load:function(i){t._setImage(e),n(i)},error:n})},_setImage:function(e){this._canvas&&tt.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new _(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=tt.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch{tt.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new p.Image,n=this._crossOrigin;n&&(t.crossOrigin=n),e&&(t.src=e),this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing=typeof e=="string"?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=F.read(arguments),t=tt.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=F.read(arguments),t=new ae($.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=s.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof Se?(n=e,t=e.getBounds()):typeof e=="object"&&("width"in e?t=new F(e):"x"in e&&(t=new F(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var i=32,a=Math.min(t.width,i),o=Math.min(t.height,i),l=ae._sampleContext;l?l.clearRect(0,0,i+1,i+1):l=ae._sampleContext=tt.getContext(new _(i)),l.save();var u=new X().scale(a/t.width,o/t.height).translate(-t.x,-t.y);u.applyToContext(l),n&&n.draw(l,new r({clip:!0,matrices:[u]})),this._matrix.applyToContext(l);var f=this.getElement(),d=this._size;f&&l.drawImage(f,-d.width/2,-d.height/2),l.restore();for(var C=l.getImageData(.5,.5,Math.ceil(a),Math.ceil(o)).data,M=[0,0,0],P=0,b=0,U=C.length;b<U;b+=4){var A=C[b+3];P+=A,A/=255,M[0]+=C[b]*A,M[1]+=C[b+1]*A,M[2]+=C[b+2]*A}for(var b=0;b<3;b++)M[b]/=P;return P?We.read(M):null},getPixel:function(){var e=s.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new We("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=s.read(e),n=We.read(e),i=n._convert("rgb"),a=n._alpha,o=this.getContext(!0),l=o.createImageData(1,1),u=l.data;u[0]=i[0]*255,u[1]=i[1]*255,u[2]=i[2]*255,u[3]=a!=null?a*255:255,o.putImageData(l,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=_.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=F.read(arguments);return e.isEmpty()&&(e=new F(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},putImageData:function(e){var t=s.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},setImageData:function(e){this.setSize(e),this.getContext(!0).putImageData(e,0,0)},_getBounds:function(e,t){var n=new F(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new pe("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,n){var i=this.getElement();if(i&&i.width>0&&i.height>0){e.globalAlpha=I.clamp(this._opacity,0,1),this._setStyles(e,t,n);var a=this._smoothing,o=a==="off";Qe.setPrefixed(e,o?"imageSmoothingEnabled":"imageSmoothingQuality",o?!1:a),e.drawImage(i,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),ne=$.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:T(function(t,n){this._initialize(t,n!==m&&s.read(arguments,1))||this.setDefinition(t instanceof fe?t:new fe(t))},"SymbolItem"),_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n){var i=t.extend({all:!1}),a=this._definition._item._hitTest(e,i,n);return a&&(a.item=this),a},_draw:function(e,t){this._definition._item.draw(e,t)}}),fe=r.extend({_class:"SymbolDefinition",initialize:T(function(t,n){this._id=S.get(),this.project=Ve.project,t&&this.setItem(t,n)},"SymbolDefinition"),_serialize:function(e,t){return t.add(this,function(){return r.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){e&8&&$._clearBoundsCache(this),e&1&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new s),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new ne(this,e)},clone:function(){return new fe(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),pe=r.extend({_class:"HitResult",initialize:T(function(t,n,i){this.type=t,this.item=n,i&&this.inject(i)},"HitResult"),statics:{getOptions:function(e){var t=e&&r.read(e);return new r({type:null,tolerance:Ve.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),ce=r.extend({_class:"Segment",beans:!0,_selection:0,initialize:T(function(t,n,i,a,o,l){var u=arguments.length,f,d,C,M;u>0&&(t==null||typeof t=="object"?u===1&&t&&"point"in t?(f=t.point,d=t.handleIn,C=t.handleOut,M=t.selection):(f=t,d=n,C=i,M=a):(f=[t,n],d=i!==m?[i,a]:null,C=o!==m?[o,l]:null)),new Ce(f,this,"_point"),new Ce(d,this,"_handleIn"),new Ce(C,this,"_handleOut"),M&&this.setSelection(M)},"Segment"),_serialize:function(e,t){var n=this._point,i=this._selection,a=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&a.push(i),r.serialize(a,e,!0,t)},_changed:function(e){var t=this._path;if(!!t){var n=t._curves,i=this._index,a;n&&((!e||e===this._point||e===this._handleIn)&&(a=i>0?n[i-1]:t._closed?n[n.length-1]:null)&&a._changed(),(!e||e===this._point||e===this._handleOut)&&(a=n[i])&&a._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(s.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(s.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(s.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(257))},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(this._selection&7)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==m?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new Oe(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,n){var i=e||{},a=i.type,o=i.factor,l=this.getPrevious(),u=this.getNext(),f=(l||this)._point,d=this._point,C=(u||this)._point,M=f.getDistance(d),P=d.getDistance(C);if(!a||a==="catmull-rom"){var b=o===m?.5:o,U=Math.pow(M,b),A=U*U,V=Math.pow(P,b),E=V*V;if(!t&&l){var B=2*E+3*V*U+A,y=3*V*(V+U);this.setHandleIn(y!==0?new s((E*f._x+B*d._x-A*C._x)/y-d._x,(E*f._y+B*d._y-A*C._y)/y-d._y):new s)}if(!n&&u){var B=2*A+3*U*V+E,y=3*U*(U+V);this.setHandleOut(y!==0?new s((A*C._x+B*d._x-E*f._x)/y-d._x,(A*C._y+B*d._y-E*f._y)/y-d._y):new s)}}else if(a==="geometric"){if(l&&u){var k=f.subtract(C),H=o===m?.4:o,j=H*M/(M+P);t||this.setHandleIn(k.multiply(j)),n||this.setHandleOut(k.multiply(j-H))}}else throw new Error("Smoothing method '"+a+"' not supported.")},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e.clone();e.set(t),t.set(n)},reversed:function(){return new ce(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new ce(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,n){var i=1-n,a=n,o=e._point,l=t._point,u=e._handleIn,f=t._handleIn,d=t._handleOut,C=e._handleOut;this._point._set(i*o._x+a*l._x,i*o._y+a*l._y,!0),this._handleIn._set(i*u._x+a*f._x,i*u._y+a*f._y,!0),this._handleOut._set(i*C._x+a*d._x,i*C._y+a*d._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var i=this._point,a=!n||!this._handleIn.isZero()?this._handleIn:null,o=!n||!this._handleOut.isZero()?this._handleOut:null,l=i._x,u=i._y,f=2;return t[0]=l,t[1]=u,a&&(t[f++]=a._x+l,t[f++]=a._y+u),o&&(t[f++]=o._x+l,t[f++]=o._y+u),e&&(e._transformCoordinates(t,t,f/2),l=t[0],u=t[1],n?(i._x=l,i._y=u,f=2,a&&(a._x=t[f++]-l,a._y=t[f++]-u),o&&(o._x=t[f++]-l,o._y=t[f++]-u)):(a||(t[f++]=l,t[f++]=u),o||(t[f++]=l,t[f++]=u))),t}}),Ce=s.extend({initialize:T(function(t,n,i){var a,o,l;if(!t)a=o=0;else if((a=t[0])!==m)o=t[1];else{var u=t;(a=u.x)===m&&(u=s.read(arguments),a=u.x),o=u.y,l=u.selected}this._x=a,this._y=o,this._owner=n,n[i]=this,l&&this.setSelected(!0)},"SegmentPoint"),_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=I.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),de=r.extend({_class:"Curve",beans:!0,initialize:T(function(t,n,i,a,o,l,u,f){var d=arguments.length,C,M,P,b,U,A;d===3?(this._path=t,C=n,M=i):d?d===1?"segment1"in t?(C=new ce(t.segment1),M=new ce(t.segment2)):"point1"in t?(P=t.point1,U=t.handle1,A=t.handle2,b=t.point2):Array.isArray(t)&&(P=[t[0],t[1]],b=[t[6],t[7]],U=[t[2]-t[0],t[3]-t[1]],A=[t[4]-t[6],t[5]-t[7]]):d===2?(C=new ce(t),M=new ce(n)):d===4?(P=t,U=n,A=i,b=a):d===8&&(P=[t,n],b=[u,f],U=[i-t,a-n],A=[o-u,l-f]):(C=new ce,M=new ce),this._segment1=C||new ce(P,null,U),this._segment2=M||new ce(b,A,null)},"Curve"),_serialize:function(e,t){return r.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=m},clone:function(){return new de(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return de.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;e=t.remove(),e&&this._segment1._handleOut.set(n)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(s.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(s.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(s.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(s.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return de.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;n<8;n+=2)t.push(new s(e[n],e[n+1]));return t}},{getLength:function(){return this._length==null&&(this._length=de.getLength(this.getValues(),0,1)),this._length},getArea:function(){return de.getArea(this.getValues())},getLine:function(){return new L(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new de(de.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return de.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var n=1e-8,i=1-n,a=null;if(e>=n&&e<=i){var o=de.subdivide(this.getValues(),e),l=o[0],u=o[1],f=t||this.hasHandles(),d=this._segment1,C=this._segment2,M=this._path;f&&(d._handleOut._set(l[2]-l[0],l[3]-l[1]),C._handleIn._set(u[4]-u[6],u[5]-u[7]));var P=l[6],b=l[7],U=new ce(new s(P,b),f&&new s(l[4]-P,l[5]-b),f&&new s(u[2]-P,u[3]-b));M?(M.insert(d._index+1,U),a=this.getNext()):(this._segment2=U,this._changed(),a=new de(U,C))}return a},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===m?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===m?.5:t?e:this.getTimeAt(e))},reversed:function(){return new de(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,n,i){var a=e._point,o=e._handleOut,l=t._handleIn,u=t._point,f=a.x,d=a.y,C=u.x,M=u.y,P=i?[f,d,f,d,C,M,C,M]:[f,d,f+o._x,d+o._y,C+l._x,M+l._y,C,M];return n&&n._transformCoordinates(P,P,4),P},subdivide:function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],l=e[4],u=e[5],f=e[6],d=e[7];t===m&&(t=.5);var C=1-t,M=C*n+t*a,P=C*i+t*o,b=C*a+t*l,U=C*o+t*u,A=C*l+t*f,V=C*u+t*d,E=C*M+t*b,B=C*P+t*U,y=C*b+t*A,k=C*U+t*V,H=C*E+t*y,j=C*B+t*k;return[[n,i,M,P,E,B,H,j],[H,j,y,k,A,V,f,d]]},getMonoCurves:function(e,t){var n=[],i=t?0:1,a=e[i+0],o=e[i+2],l=e[i+4],u=e[i+6];if(a>=o==o>=l&&o>=l==l>=u||de.isStraight(e))n.push(e);else{var f=3*(o-l)-a+u,d=2*(a+l)-4*o,C=o-a,M=1e-8,P=1-M,b=[],U=I.solveQuadratic(f,d,C,b,M,P);if(!U)n.push(e);else{b.sort();var A=b[0],V=de.subdivide(e,A);n.push(V[0]),U>1&&(A=(b[1]-A)/(1-A),V=de.subdivide(V[1],A),n.push(V[0])),n.push(V[1])}}return n},solveCubic:function(e,t,n,i,a,o){var l=e[t],u=e[t+2],f=e[t+4],d=e[t+6],C=0;if(!(l<n&&d<n&&u<n&&f<n||l>n&&d>n&&u>n&&f>n)){var M=3*(u-l),P=3*(f-u)-M,b=d-l-M-P;C=I.solveCubic(b,P,M,l-n,i,a,o)}return C},getTimeOf:function(e,t){var n=new s(e[0],e[1]),i=new s(e[6],e[7]),a=1e-12,o=1e-7,l=t.isClose(n,a)?0:t.isClose(i,a)?1:null;if(l===null)for(var u=[t.x,t.y],f=[],d=0;d<2;d++)for(var C=de.solveCubic(e,d,u[d],f,0,1),M=0;M<C;M++){var P=f[M];if(t.isClose(de.getPoint(e,P),o))return P}return t.isClose(n,o)?0:t.isClose(i,o)?1:null},getNearestTime:function(e,t){if(de.isStraight(e)){var n=e[0],i=e[1],a=e[6],o=e[7],l=a-n,u=o-i,f=l*l+u*u;if(f===0)return 0;var d=((t.x-n)*l+(t.y-i)*u)/f;return d<1e-12?0:d>.999999999999?1:de.getTimeOf(e,new s(n+d*l,i+d*u))}var C=100,M=1/0,P=0;function b(V){if(V>=0&&V<=1){var E=t.getDistance(de.getPoint(e,V),!0);if(E<M)return M=E,P=V,!0}}T(b,"refine");for(var U=0;U<=C;U++)b(U/C);for(var A=1/(C*2);A>1e-8;)!b(P-A)&&!b(P+A)&&(A/=2);return P},getPart:function(e,t,n){var i=t>n;if(i){var a=t;t=n,n=a}return t>0&&(e=de.subdivide(e,t)[1]),n<1&&(e=de.subdivide(e,(n-t)/(1-t))[0]),i?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],l=e[4],u=e[5],f=e[6],d=e[7],C=3*a-2*n-f,M=3*o-2*i-d,P=3*l-2*f-n,b=3*u-2*d-i;return Math.max(C*C,P*P)+Math.max(M*M,b*b)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],l=e[5],u=e[6],f=e[7];return 3*((f-n)*(i+o)-(u-t)*(a+l)+a*(t-o)-i*(n-l)+f*(o+t/3)-u*(l+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),i=[0,0],a=0;a<2;a++)de._addBounds(e[a],e[a+2],e[a+4],e[a+6],a,0,t,n,i);return new F(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,i,a,o,l,u,f){function d(H,j){var z=H-j,G=H+j;z<l[a]&&(l[a]=z),G>u[a]&&(u[a]=G)}T(d,"add"),o/=2;var C=l[a]+o,M=u[a]-o;if(e<C||t<C||n<C||i<C||e>M||t>M||n>M||i>M)if(t<e!=t<i&&n<e!=n<i)d(e,0),d(i,0);else{var P=3*(t-n)-e+i,b=2*(e+n)-4*t,U=t-e,A=I.solveQuadratic(P,b,U,f),V=1e-8,E=1-V;d(i,0);for(var B=0;B<A;B++){var y=f[B],k=1-y;V<=y&&y<=E&&d(k*k*k*e+3*k*k*y*t+3*k*y*y*n+y*y*y*i,o)}}}}},r.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=we[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),r.each({isStraight:function(e,t,n,i){if(t.isZero()&&n.isZero())return!0;var a=i.subtract(e);if(a.isZero())return!1;if(a.isCollinear(t)&&a.isCollinear(n)){var o=new L(e,i),l=1e-7;if(o.getDistance(e.add(t))<l&&o.getDistance(i.add(n))<l){var u=a.dot(a),f=a.dot(t)/u,d=a.dot(n)/u;return f>=0&&f<=1&&d<=0&&d>=-1}}return!1},isLinear:function(e,t,n,i){var a=i.subtract(e).divide(3);return t.equals(a)&&n.negate().equals(a)}},function(e,t){this[t]=function(n){var i=this._segment1,a=this._segment2;return e(i._point,i._handleOut,a._handleIn,a._point,n)},this.statics[t]=function(n,i){var a=n[0],o=n[1],l=n[6],u=n[7];return e(new s(a,o),new s(n[2]-a,n[3]-o),new s(n[4]-l,n[5]-u),new s(l,u),i)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return e!=null&&e>=0&&e<=1?new Oe(this,e):null},getTimeAt:function(e,t){return de.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=s.read(arguments);return e.isZero()?[]:de.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(s.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return de.getTimeOf(this.getValues(),s.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=s.read(arguments),t=this.getValues(),n=de.getNearestTime(t,e),i=de.getPoint(t,n);return new Oe(this,n,i,null,e.getDistance(i))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return r.each(e,function(t){this[t+"At"]=function(n,i){var a=this.getValues();return de[t](a,i?n:de.getTimeAt(a,n))},this[t+"AtTime"]=function(n){return de[t](this.getValues(),n)}},{statics:{_evaluateMethods:e}})},new function(){function e(i){var a=i[0],o=i[1],l=i[2],u=i[3],f=i[4],d=i[5],C=i[6],M=i[7],P=9*(l-f)+3*(C-a),b=6*(a+f)-12*l,U=3*(l-a),A=9*(u-d)+3*(M-o),V=6*(o+d)-12*u,E=3*(u-o);return function(B){var y=(P*B+b)*B+U,k=(A*B+V)*B+E;return Math.sqrt(y*y+k*k)}}T(e,"getLengthIntegrand");function t(i,a){return Math.max(2,Math.min(16,Math.ceil(Math.abs(a-i)*32)))}T(t,"getIterations");function n(i,a,o,l){if(a==null||a<0||a>1)return null;var u=i[0],f=i[1],d=i[2],C=i[3],M=i[4],P=i[5],b=i[6],U=i[7],A=I.isZero;A(d-u)&&A(C-f)&&(d=u,C=f),A(M-b)&&A(P-U)&&(M=b,P=U);var V=3*(d-u),E=3*(M-d)-V,B=b-u-V-E,y=3*(C-f),k=3*(P-C)-y,H=U-f-y-k,j,z;if(o===0)j=a===0?u:a===1?b:((B*a+E)*a+V)*a+u,z=a===0?f:a===1?U:((H*a+k)*a+y)*a+f;else{var G=1e-8,Q=1-G;if(a<G?(j=V,z=y):a>Q?(j=3*(b-M),z=3*(U-P)):(j=(3*B*a+2*E)*a+V,z=(3*H*a+2*k)*a+y),l){j===0&&z===0&&(a<G||a>Q)&&(j=M-d,z=P-C);var Y=Math.sqrt(j*j+z*z);Y&&(j/=Y,z/=Y)}if(o===3){var M=6*B*a+2*E,P=6*H*a+2*k,re=Math.pow(j*j+z*z,3/2);j=re!==0?(j*P-z*M)/re:0,z=0}}return o===2?new s(z,-j):new s(j,z)}return T(n,"evaluate"),{statics:{classify:function(i){var a=i[0],o=i[1],l=i[2],u=i[3],f=i[4],d=i[5],C=i[6],M=i[7],P=a*(M-d)+o*(f-C)+C*d-M*f,b=l*(o-M)+u*(C-a)+a*M-o*C,U=f*(u-o)+d*(a-l)+l*o-u*a,A=3*U,V=A-b,E=V-b+P,B=Math.sqrt(E*E+V*V+A*A),y=B!==0?1/B:0,k=I.isZero,H="serpentine";E*=y,V*=y,A*=y;function j(Y,re,Z){var ie=re!==m,se=ie&&re>0&&re<1,ue=ie&&Z>0&&Z<1;return ie&&(!(se||ue)||Y==="loop"&&!(se&&ue))&&(Y="arch",se=ue=!1),{type:Y,roots:se||ue?se&&ue?re<Z?[re,Z]:[Z,re]:[se?re:Z]:null}}if(T(j,"type"),k(E))return k(V)?j(k(A)?"line":"quadratic"):j(H,A/(3*V));var z=3*V*V-4*E*A;if(k(z))return j("cusp",V/(2*E));var G=z>0?Math.sqrt(z/3):Math.sqrt(-z),Q=2*E;return j(z>0?H:"loop",(V+G)/Q,(V-G)/Q)},getLength:function(i,a,o,l){if(a===m&&(a=0),o===m&&(o=1),de.isStraight(i)){var u=i;o<1&&(u=de.subdivide(u,o)[0],a/=o),a>0&&(u=de.subdivide(u,a)[1]);var f=u[6]-u[0],d=u[7]-u[1];return Math.sqrt(f*f+d*d)}return I.integrate(l||e(i),a,o,t(a,o))},getTimeAt:function(i,a,o){if(o===m&&(o=a<0?1:0),a===0)return o;var l=Math.abs,u=1e-12,f=a>0,d=f?o:0,C=f?1:o,M=e(i),P=de.getLength(i,d,C,M),b=l(a)-P;if(l(b)<u)return f?C:d;if(b>u)return null;var U=a/P,A=0;function V(E){return A+=I.integrate(M,o,E,t(o,E)),o=E,A-a}return T(V,"f"),I.findRoot(V,M,o+U,d,C,32,1e-12)},getPoint:function(i,a){return n(i,a,0,!1)},getTangent:function(i,a){return n(i,a,1,!0)},getWeightedTangent:function(i,a){return n(i,a,1,!1)},getNormal:function(i,a){return n(i,a,2,!0)},getWeightedNormal:function(i,a){return n(i,a,2,!1)},getCurvature:function(i,a){return n(i,a,3,!1).x},getPeaks:function(i){var a=i[0],o=i[1],l=i[2],u=i[3],f=i[4],d=i[5],C=i[6],M=i[7],P=-a+3*l-3*f+C,b=3*a-6*l+3*f,U=-3*a+3*l,A=-o+3*u-3*d+M,V=3*o-6*u+3*d,E=-3*o+3*u,B=1e-8,y=1-B,k=[];return I.solveCubic(9*(P*P+A*A),9*(P*b+V*A),2*(b*b+V*V)+3*(U*P+E*A),U*b+V*E,k,B,y),k.sort()}}}},new function(){function e(b,U,A,V,E,B,y){var k=!y&&A.getPrevious()===E,H=!y&&A!==E&&A.getNext()===E,j=1e-8,z=1-j;if(V!==null&&V>=(k?j:0)&&V<=(H?z:1)&&B!==null&&B>=(H?j:0)&&B<=(k?z:1)){var G=new Oe(A,V,null,y),Q=new Oe(E,B,null,y);G._intersection=Q,Q._intersection=G,(!U||U(G))&&Oe.insert(b,G,!0)}}T(e,"addLocation");function t(b,U,A,V,E,B,y,k,H,j,z,G,Q){if(++H>=4096||++k>=40)return H;var Y=1e-9,re=U[0],Z=U[1],ie=U[6],se=U[7],ue=L.getSignedDistance,le=ue(re,Z,ie,se,U[2],U[3]),he=ue(re,Z,ie,se,U[4],U[5]),ye=le*he>0?3/4:4/9,xe=ye*Math.min(0,le,he),be=ye*Math.max(0,le,he),Te=ue(re,Z,ie,se,b[0],b[1]),ve=ue(re,Z,ie,se,b[2],b[3]),_e=ue(re,Z,ie,se,b[4],b[5]),Pe=ue(re,Z,ie,se,b[6],b[7]),Ee=n(Te,ve,_e,Pe),Ie=Ee[0],Re=Ee[1],Ae,Be;if(le===0&&he===0&&Te===0&&ve===0&&_e===0&&Pe===0||(Ae=i(Ie,Re,xe,be))==null||(Be=i(Ie.reverse(),Re.reverse(),xe,be))==null)return H;var He=j+(z-j)*Ae,Ne=j+(z-j)*Be;if(Math.max(Q-G,Ne-He)<Y){var ut=(He+Ne)/2,lt=(G+Q)/2;e(E,B,y?V:A,y?lt:ut,y?A:V,y?ut:lt)}else{b=de.getPart(b,Ae,Be);var vt=Q-G;if(Be-Ae>.8)if(Ne-He>vt){var nt=de.subdivide(b,.5),ut=(He+Ne)/2;H=t(U,nt[0],V,A,E,B,!y,k,H,G,Q,He,ut),H=t(U,nt[1],V,A,E,B,!y,k,H,G,Q,ut,Ne)}else{var nt=de.subdivide(U,.5),lt=(G+Q)/2;H=t(nt[0],b,V,A,E,B,!y,k,H,G,lt,He,Ne),H=t(nt[1],b,V,A,E,B,!y,k,H,lt,Q,He,Ne)}else vt===0||vt>=Y?H=t(U,b,V,A,E,B,!y,k,H,G,Q,He,Ne):H=t(b,U,A,V,E,B,y,k,H,He,Ne,G,Q)}return H}T(t,"addCurveIntersections");function n(b,U,A,V){var E=[0,b],B=[1/3,U],y=[2/3,A],k=[1,V],H=U-(2*b+V)/3,j=A-(b+2*V)/3,z;if(H*j<0)z=[[E,B,k],[E,y,k]];else{var G=H/j;z=[G>=2?[E,B,k]:G<=.5?[E,y,k]:[E,B,y,k],[E,k]]}return(H||j)<0?z.reverse():z}T(n,"getConvexHull");function i(b,U,A,V){return b[0][1]<A?a(b,!0,A):U[0][1]>V?a(U,!1,V):b[0][0]}T(i,"clipConvexHull");function a(b,U,A){for(var V=b[0][0],E=b[0][1],B=1,y=b.length;B<y;B++){var k=b[B][0],H=b[B][1];if(U?H>=A:H<=A)return H===A?k:V+(A-E)*(k-V)/(H-E);V=k,E=H}return null}T(a,"clipConvexHullPart");function o(b,U,A,V,E){var B=I.isZero;if(B(V)&&B(E)){var y=de.getTimeOf(b,new s(U,A));return y===null?[]:[y]}for(var k=Math.atan2(-E,V),H=Math.sin(k),j=Math.cos(k),z=[],G=[],Q=0;Q<8;Q+=2){var Y=b[Q]-U,re=b[Q+1]-A;z.push(Y*j-re*H,Y*H+re*j)}return de.solveCubic(z,1,0,G,0,1),G}T(o,"getCurveLineIntersections");function l(b,U,A,V,E,B,y){for(var k=U[0],H=U[1],j=U[6],z=U[7],G=o(b,k,H,j-k,z-H),Q=0,Y=G.length;Q<Y;Q++){var re=G[Q],Z=de.getPoint(b,re),ie=de.getTimeOf(U,Z);ie!==null&&e(E,B,y?V:A,y?ie:re,y?A:V,y?re:ie)}}T(l,"addCurveLineIntersections");function u(b,U,A,V,E,B){var y=L.intersect(b[0],b[1],b[6],b[7],U[0],U[1],U[6],U[7]);y&&e(E,B,A,de.getTimeOf(b,y),V,de.getTimeOf(U,y))}T(u,"addLineIntersection");function f(b,U,A,V,E,B){var y=1e-12,k=Math.min,H=Math.max;if(H(b[0],b[2],b[4],b[6])+y>k(U[0],U[2],U[4],U[6])&&k(b[0],b[2],b[4],b[6])-y<H(U[0],U[2],U[4],U[6])&&H(b[1],b[3],b[5],b[7])+y>k(U[1],U[3],U[5],U[7])&&k(b[1],b[3],b[5],b[7])-y<H(U[1],U[3],U[5],U[7])){var j=M(b,U);if(j)for(var z=0;z<2;z++){var G=j[z];e(E,B,A,G[0],V,G[1],!0)}else{var Q=de.isStraight(b),Y=de.isStraight(U),re=Q&&Y,Z=Q&&!Y,ie=E.length;if((re?u:Q||Y?l:t)(Z?U:b,Z?b:U,Z?V:A,Z?A:V,E,B,Z,0,0,0,1,0,1),!re||E.length===ie)for(var z=0;z<4;z++){var se=z>>1,ue=z&1,le=se*6,he=ue*6,ye=new s(b[le],b[le+1]),xe=new s(U[he],U[he+1]);ye.isClose(xe,y)&&e(E,B,A,se,V,ue)}}}return E}T(f,"getCurveIntersections");function d(b,U,A,V){var E=de.classify(b);if(E.type==="loop"){var B=E.roots;e(A,V,U,B[0],U,B[1])}return A}T(d,"getSelfIntersection");function C(b,U,A,V,E,B){var y=1e-7,k=!U;k&&(U=b);for(var H=b.length,j=U.length,z=new Array(H),G=k?z:new Array(j),Q=[],Y=0;Y<H;Y++)z[Y]=b[Y].getValues(V);if(!k)for(var Y=0;Y<j;Y++)G[Y]=U[Y].getValues(E);for(var re=O.findCurveBoundsCollisions(z,G,y),Z=0;Z<H;Z++){var ie=b[Z],se=z[Z];k&&d(se,ie,Q,A);var ue=re[Z];if(ue)for(var le=0;le<ue.length;le++){if(B&&Q.length)return Q;var he=ue[le];if(!k||he>Z){var ye=U[he],xe=G[he];f(se,xe,ie,ye,Q,A)}}}return Q}T(C,"getIntersections");function M(b,U){function A(Pe){var Ee=Pe[6]-Pe[0],Ie=Pe[7]-Pe[1];return Ee*Ee+Ie*Ie}T(A,"getSquaredLineLength");var V=Math.abs,E=L.getDistance,B=1e-8,y=1e-7,k=de.isStraight(b),H=de.isStraight(U),j=k&&H,z=A(b)<A(U),G=z?U:b,Q=z?b:U,Y=G[0],re=G[1],Z=G[6]-Y,ie=G[7]-re;if(E(Y,re,Z,ie,Q[0],Q[1],!0)<y&&E(Y,re,Z,ie,Q[6],Q[7],!0)<y)!j&&E(Y,re,Z,ie,G[2],G[3],!0)<y&&E(Y,re,Z,ie,G[4],G[5],!0)<y&&E(Y,re,Z,ie,Q[2],Q[3],!0)<y&&E(Y,re,Z,ie,Q[4],Q[5],!0)<y&&(k=H=j=!0);else if(j)return null;if(k^H)return null;for(var se=[b,U],ue=[],le=0;le<4&&ue.length<2;le++){var he=le&1,ye=he^1,xe=le>>1,be=de.getTimeOf(se[he],new s(se[ye][xe?6:0],se[ye][xe?7:1]));if(be!=null){var Te=he?[xe,be]:[be,xe];(!ue.length||V(Te[0]-ue[0][0])>B&&V(Te[1]-ue[0][1])>B)&&ue.push(Te)}if(le>2&&!ue.length)break}if(ue.length!==2)ue=null;else if(!j){var ve=de.getPart(b,ue[0][0],ue[1][0]),_e=de.getPart(U,ue[0][1],ue[1][1]);(V(_e[2]-ve[2])>y||V(_e[3]-ve[3])>y||V(_e[4]-ve[4])>y||V(_e[5]-ve[5])>y)&&(ue=null)}return ue}T(M,"getOverlaps");function P(b,U){var A=b[0],V=b[1],E=b[2],B=b[3],y=b[4],k=b[5],H=b[6],j=b[7],z=U.normalize(),G=z.x,Q=z.y,Y=3*H-9*y+9*E-3*A,re=3*j-9*k+9*B-3*V,Z=6*y-12*E+6*A,ie=6*k-12*B+6*V,se=3*E-3*A,ue=3*B-3*V,le=2*Y*Q-2*re*G,he=[];if(Math.abs(le)<I.CURVETIME_EPSILON){var ye=Y*ue-re*se,le=Y*ie-re*Z;if(le!=0){var xe=-ye/le;xe>=0&&xe<=1&&he.push(xe)}}else{var be=(Z*Z-4*Y*se)*Q*Q+(-2*Z*ie+4*re*se+4*Y*ue)*G*Q+(ie*ie-4*re*ue)*G*G,Te=Z*Q-ie*G;if(be>=0&&le!=0){var ve=Math.sqrt(be),_e=-(Te+ve)/le,Pe=(-Te+ve)/le;_e>=0&&_e<=1&&he.push(_e),Pe>=0&&Pe<=1&&he.push(Pe)}}return he}return T(P,"getTimesWithTangent"),{getIntersections:function(b){var U=this.getValues(),A=b&&b!==this&&b.getValues();return A?f(U,A,this,b,[]):d(U,this,[])},statics:{getOverlaps:M,getIntersections:C,getCurveLineIntersections:o,getTimesWithTangent:P}}}),Oe=r.extend({_class:"CurveLocation",initialize:T(function(t,n,i,a,o){if(n>=.99999999){var l=t.getNext();l&&(n=0,t=l)}this._setCurve(t),this._time=n,this._point=i||t.getPointAtTime(n),this._overlap=a,this._distance=o,this._intersection=this._next=this._previous=null},"CurveLocation"),_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),n=this.getTime();n===0?e=t._segment1:n===1?e=t._segment2:n!=null&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function n(i){var a=i&&i.getCurve();if(a&&(t._time=a.getTimeOf(t._point))!=null)return t._setCurve(a),a}return T(n,"trySegment"),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&t==null?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(e==null){e=0;var t=this.getPath(),n=this.getIndex();if(t&&n!=null)for(var i=t.getCurves(),a=0;a<n;a++)e+=i[a].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(e==null){var t=this.getCurve(),n=this.getTime();this._curveOffset=e=n!=null&&t&&t.getPartLength(0,n)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,n=e&&e.splitAtTime(this.getTime());return n&&this._setSegment(t.getLastSegment()),n},equals:function(e,t){var n=this===e;if(!n&&e instanceof Oe){var i=this.getCurve(),a=e.getCurve(),o=i._path,l=a._path;if(o===l){var u=Math.abs,f=1e-7,d=u(this.getOffset()-e.getOffset()),C=!t&&this._intersection,M=!t&&e._intersection;n=(d<f||o&&u(o.getLength()-d)<f)&&(!C&&!M||C&&M&&C.equals(M,!0))}}return n},toString:function(){var e=[],t=this.getPoint(),n=x.instance;t&&e.push("point: "+t);var i=this.getIndex();i!=null&&e.push("index: "+i);var a=this.getTime();return a!=null&&e.push("time: "+n.number(a)),this._distance!=null&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),n=e.getTime(),i=1e-8,a=1-i,o=t>=i&&t<=a,l=n>=i&&n<=a;if(o&&l)return!this.isTouching();var u=this.getCurve(),f=u&&t<i?u.getPrevious():u,d=e.getCurve(),C=d&&n<i?d.getPrevious():d;if(t>a&&(u=u.getNext()),n>a&&(d=d.getNext()),!f||!u||!C||!d)return!1;var M=[];function P(G,Q){var Y=G.getValues(),re=de.classify(Y).roots||de.getPeaks(Y),Z=re.length,ie=de.getLength(Y,Q&&Z?re[Z-1]:0,!Q&&Z?re[0]:1);M.push(Z?ie:ie/32)}T(P,"addOffsets");function b(G,Q,Y){return Q<Y?G>Q&&G<Y:G>Q||G<Y}T(b,"isInRange"),o||(P(f,!0),P(u,!1)),l||(P(C,!0),P(d,!1));var U=this.getPoint(),A=Math.min.apply(Math,M),V=o?u.getTangentAtTime(t):u.getPointAt(A).subtract(U),E=o?V.negate():f.getPointAt(-A).subtract(U),B=l?d.getTangentAtTime(n):d.getPointAt(A).subtract(U),y=l?B.negate():C.getPointAt(-A).subtract(U),k=E.getAngle(),H=V.getAngle(),j=y.getAngle(),z=B.getAngle();return!!(o?b(k,j,z)^b(H,j,z)&&b(k,z,j)^b(H,z,j):b(j,k,H)^b(z,k,H)&&b(j,H,k)^b(z,H,k))},hasOverlap:function(){return!!this._overlap}},r.each(de._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var n=this.getCurve(),i=this.getTime();return i!=null&&n&&n[t](i,!0)}},{preserve:!0}),new function(){function e(t,n,i){var a=t.length,o=0,l=a-1;function u(U,A){for(var V=U+A;V>=-1&&V<=a;V+=A){var E=t[(V%a+a)%a];if(!n.getPoint().isClose(E.getPoint(),1e-7))break;if(n.equals(E))return E}return null}for(T(u,"search");o<=l;){var f=o+l>>>1,d=t[f],C;if(i&&(C=n.equals(d)?d:u(f,-1)||u(f,1)))return n._overlap&&(C._overlap=C._intersection._overlap=!0),C;var M=n.getPath(),P=d.getPath(),b=M!==P?M._id-P._id:n.getIndex()+n.getTime()-(d.getIndex()+d.getTime());b<0?l=f-1:o=f+1}return t.splice(o,0,n),n}return T(e,"insert"),{statics:{insert:e,expand:function(t){for(var n=t.slice(),i=t.length-1;i>=0;i--)e(n,t[i]._intersection,!1);return n}}}}),Se=$.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:T(function(){},"PathItem"),statics:{create:function(e){var t,n,i;if(r.isPlainObject(e)?(n=e.segments,t=e.pathData):Array.isArray(e)?n=e:typeof e=="string"&&(t=e),n){var a=n[0];i=a&&Array.isArray(a[0])}else t&&(i=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));var o=i?Me:we;return new o(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),n,i=!1,a,o,l=new s,u=new s;function f(y,k){var H=+n[y];return i&&(H+=l[k]),H}T(f,"getCoord");function d(y){return new s(f(y,"x"),f(y+1,"y"))}T(d,"getPoint"),this.clear();for(var C=0,M=t&&t.length;C<M;C++){var P=t[C],b=P[0],U=b.toLowerCase();n=P.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var A=n&&n.length;switch(i=b===U,a==="z"&&!/[mz]/.test(U)&&this.moveTo(l),U){case"m":case"l":for(var V=U==="m",E=0;E<A;E+=2)this[V?"moveTo":"lineTo"](l=d(E)),V&&(u=l,V=!1);o=l;break;case"h":case"v":var B=U==="h"?"x":"y";l=l.clone();for(var E=0;E<A;E++)l[B]=f(E,B),this.lineTo(l);o=l;break;case"c":for(var E=0;E<A;E+=6)this.cubicCurveTo(d(E),o=d(E+2),l=d(E+4));break;case"s":for(var E=0;E<A;E+=4)this.cubicCurveTo(/[cs]/.test(a)?l.multiply(2).subtract(o):l,o=d(E),l=d(E+2)),a=U;break;case"q":for(var E=0;E<A;E+=4)this.quadraticCurveTo(o=d(E),l=d(E+2));break;case"t":for(var E=0;E<A;E+=2)this.quadraticCurveTo(o=/[qt]/.test(a)?l.multiply(2).subtract(o):l,l=d(E)),a=U;break;case"a":for(var E=0;E<A;E+=7)this.arcTo(l=d(E+5),new _(+n[E],+n[E+1]),+n[E+2],+n[E+4],+n[E+3]);break;case"z":this.closePath(1e-12),l=u;break}a=U}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!(this.getFillRule()==="evenodd"?t.windingL&1||t.windingR&1:t.winding)},getIntersections:function(e,t,n,i){var a=this===e||!e,o=this._matrix._orNullIfIdentity(),l=a?o:(n||e._matrix)._orNullIfIdentity();return a||this.getBounds(o).intersects(e.getBounds(l),1e-12)?de.getIntersections(this.getCurves(),!a&&e.getCurves(),t,o,l,i):[]},getCrossings:function(e){return this.getIntersections(e,function(t){return t.isCrossing()})},getNearestLocation:function(){for(var e=s.read(arguments),t=this.getCurves(),n=1/0,i=null,a=0,o=t.length;a<o;a++){var l=t[a].getNearestLocation(e);l._distance<n&&(n=l._distance,i=l)}return i},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()},interpolate:function(e,t,n){var i=!this._children,a=i?"_segments":"_children",o=e[a],l=t[a],u=this[a];if(!o||!l||o.length!==l.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var f=u.length,d=l.length;if(f<d)for(var C=i?ce:we,M=f;M<d;M++)this.add(new C);else f>d&&this[i?"removeSegments":"removeChildren"](d,f);for(var M=0;M<d;M++)u[M].interpolate(o[M],l[M],n);i&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var n=this._children||[this],i=e._children?e._children.slice():[e],a=n.length,o=i.length,l=[],u=0;t=!0;for(var f=O.findItemBoundsCollisions(n,i,I.GEOMETRIC_EPSILON),d=a-1;d>=0&&t;d--){var C=n[d];t=!1;var M=f[d];if(M)for(var P=M.length-1;P>=0&&!t;P--)C.compare(i[M[P]])&&(l[M[P]]||(l[M[P]]=!0,u++),t=!0)}t=t&&u===o}return t}}),we=Se.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:T(function(t){this._closed=!1,this._segments=[],this._version=0;var n=arguments,i=Array.isArray(t)?typeof t[0]=="object"?t:n:t&&t.size===m&&(t.x!==m||t.point!==m)?n:null;i&&i.length>0?this.setSegments(i):(this._curves=m,this._segmentSelection=0,!i&&typeof t=="string"&&(this.setPathData(t),t=null)),this._initialize(!i&&t)},"Path"),_equals:function(e){return this._closed===e._closed&&r.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:T(function e(t){if(e.base.call(this,t),t&8){if(this._length=this._area=m,t&32)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else t&64&&(this._bounds=m)},"_changed"),getStyle:function(){var e=this._parent;return(e instanceof Me?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),n=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=m,n){var i=e[n-1];typeof i=="boolean"&&(this.setClosed(i),n--),this._add(ce.readList(e,0,{},n))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var i=0;i<n;i++)e[i]=new de(this,t[i],t[i+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new de(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var n=this._segments,i=n.length,a=new x(t),o=new Array(6),l=!0,u,f,d,C,M,P,b,U,A=[];function V(B,y){if(B._transformCoordinates(e,o),u=o[0],f=o[1],l)A.push("M"+a.pair(u,f)),l=!1;else if(M=o[2],P=o[3],M===u&&P===f&&b===d&&U===C){if(!y){var k=u-d,H=f-C;A.push(k===0?"v"+a.number(H):H===0?"h"+a.number(k):"l"+a.pair(k,H))}}else A.push("c"+a.pair(b-d,U-C)+" "+a.pair(M-d,P-C)+" "+a.pair(u-d,f-C));d=u,C=f,b=o[4],U=o[5]}if(T(V,"addSegment"),!i)return"";for(var E=0;E<i;E++)V(n[E]);return this._closed&&i>0&&(V(n[0],!0),A.push("z")),A.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,n=new Array(6),i=0,a=t.length;i<a;i++)t[i]._transformCoordinates(e,n,!0);return!0},_add:function(e,l){for(var n=this._segments,i=this._curves,a=e.length,o=l==null,l=o?n.length:l,u=0;u<a;u++){var f=e[u];f._path&&(f=e[u]=f.clone()),f._path=this,f._index=l+u,f._selection&&this._updateSelection(f,0,f._selection)}if(o)r.push(n,e);else{n.splice.apply(n,[l,0].concat(e));for(var u=l+a,d=n.length;u<d;u++)n[u]._index=u}if(i){var C=this._countCurves(),M=l>0&&l+a-1===C?l-1:l,P=M,b=Math.min(M+a,C);e._curves&&(i.splice.apply(i,[M,0].concat(e._curves)),P+=e._curves.length);for(var u=P;u<b;u++)i.splice(u,0,new de(this,null,null));this._adjustCurves(M,b)}return this._changed(41),e},_adjustCurves:function(e,t){for(var n=this._segments,i=this._curves,a,o=e;o<t;o++)a=i[o],a._path=this,a._segment1=n[o],a._segment2=n[o+1]||n[0],a._changed();(a=i[this._closed&&!e?n.length-1:e-1])&&(a._segment2=n[e]||n[0],a._changed()),(a=i[t])&&(a._segment1=n[t],a._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&typeof e!="number"?this._add(ce.readList(t)):this._add([ce.read(t)])[0]},insert:function(e,t){var n=arguments;return n.length>2&&typeof t!="number"?this._add(ce.readList(n,1),e):this._add([ce.read(n,1)],e)[0]},addSegment:function(){return this._add([ce.read(arguments)])[0]},insertSegment:function(e){return this._add([ce.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(ce.readList(e))},insertSegments:function(e,t){return this._add(ce.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=r.pick(t,this._segments.length);var i=this._segments,a=this._curves,o=i.length,l=i.splice(e,t-e),u=l.length;if(!u)return l;for(var f=0;f<u;f++){var d=l[f];d._selection&&this._updateSelection(d,d._selection,0),d._index=d._path=null}for(var f=e,C=i.length;f<C;f++)i[f]._index=f;if(a){for(var M=e>0&&t===o+(this._closed?1:0)?e-1:e,a=a.splice(M,u),f=a.length-1;f>=0;f--)a[f]._path=null;n&&(l._curves=a.slice(1)),this._adjustCurves(M,M)}return this._changed(41),l},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(this._length==null){for(var e=this.getCurves(),t=0,n=0,i=e.length;n<i;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(e==null){var t=this._segments,n=this._closed;e=0;for(var i=0,a=t.length;i<a;i++){var o=i+1===a;e+=de.getArea(de.getValues(t[i],t[o?0:i+1],null,o&&!n))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===e*7},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:T(function e(t){t&1||this._selectSegments(!1),e.base.call(this,t)},"setSelection"),_selectSegments:function(e){var t=this._segments,n=t.length,i=e?7:0;this._segmentSelection=i*n;for(var a=0;a<n;a++)t[a]._selection=i},_updateSelection:function(e,t,n){e._selection=n;var i=this._segmentSelection+=n-t;i>0&&this.setSelected(!0)},divideAt:function(e){var t=this.getLocationAt(e),n;return t&&(n=t.getCurve().divideAt(t.getCurveOffset()))?n._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),n=t&&t.index,i=t&&t.time,a=1e-8,o=1-a;i>o&&(n++,i=0);var l=this.getCurves();if(n>=0&&n<l.length){i>=a&&l[n++].divideAtTime(i);var u=this.removeSegments(n,this._segments.length,!0),f;return this._closed?(this.setClosed(!1),f=this):(f=new we($.NO_INSERT),f.insertAbove(this),f.copyAttributes(this)),f._add(u,0),this.addSegment(u[0]),f}return null},split:function(e,t){var n,i=t===m?e:(n=this.getCurves()[e])&&n.getLocationAtTime(t);return i!=null?this.splitAt(i):null},join:function(e,t){var n=t||0;if(e&&e!==this){var i=e._segments,a=this.getLastSegment(),o=e.getLastSegment();if(!o)return this;a&&a._point.isClose(o._point,n)&&e.reverse();var l=e.getFirstSegment();if(a&&a._point.isClose(l._point,n))a.setHandleOut(l._handleOut),this._add(i.slice(1));else{var u=this.getFirstSegment();u&&u._point.isClose(l._point,n)&&e.reverse(),o=e.getLastSegment(),u&&u._point.isClose(o._point,n)?(u.setHandleIn(o._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}e._closed&&this._add([i[0]]),e.remove()}var f=this.getFirstSegment(),d=this.getLastSegment();return f!==d&&f._point.isClose(d._point,n)&&(f.setHandleIn(d._handleIn),d.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,i=n?1e-7:0,a=t.length-1;a>=0;a--){var o=t[a];!o.hasHandles()&&(!o.hasLength(i)||n&&o.isCollinear(o.getNext()))&&o.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new je(this,e||.25,256,!0),n=t.parts,i=n.length,a=[],o=0;o<i;o++)a.push(new ce(n[o].curve.slice(0,2)));!this._closed&&i>0&&a.push(new ce(n[i-1].curve.slice(6))),this.setSegments(a)},simplify:function(e){var t=new Ke(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,n=e||{},i=n.type||"asymmetric",a=this._segments,o=a.length,l=this._closed;function u(Ie,Re){var Ae=Ie&&Ie.index;if(Ae!=null){var Be=Ie.path;if(Be&&Be!==t)throw new Error(Ie._class+" "+Ae+" of "+Be+" is not part of "+t);Re&&Ie instanceof de&&Ae++}else Ae=typeof Ie=="number"?Ie:Re;return Math.min(Ae<0&&l?Ae%o:Ae<0?Ae+o:Ae,o-1)}T(u,"getIndex");var f=l&&n.from===m&&n.to===m,d=u(n.from,0),C=u(n.to,o-1);if(d>C)if(l)d-=o;else{var M=d;d=C,C=M}if(/^(?:asymmetric|continuous)$/.test(i)){var P=i==="asymmetric",b=Math.min,U=C-d+1,A=U-1,V=f?b(U,4):1,E=V,B=V,y=[];if(l||(E=b(1,d),B=b(1,o-C-1)),A+=E+B,A<=1)return;for(var k=0,H=d-E;k<=A;k++,H++)y[k]=a[(H<0?H+o:H)%o]._point;for(var j=y[0]._x+2*y[1]._x,z=y[0]._y+2*y[1]._y,G=2,Q=A-1,Y=[j],re=[z],Z=[G],ie=[],se=[],k=1;k<A;k++){var ue=k<Q,le=ue||P?1:2,he=ue?4:P?2:7,ye=ue?4:P?3:8,xe=ue?2:P?0:1,be=le/G;G=Z[k]=he-be,j=Y[k]=ye*y[k]._x+xe*y[k+1]._x-be*j,z=re[k]=ye*y[k]._y+xe*y[k+1]._y-be*z}ie[Q]=Y[Q]/Z[Q],se[Q]=re[Q]/Z[Q];for(var k=A-2;k>=0;k--)ie[k]=(Y[k]-ie[k+1])/Z[k],se[k]=(re[k]-se[k+1])/Z[k];ie[A]=(3*y[A]._x-ie[Q])/2,se[A]=(3*y[A]._y-se[Q])/2;for(var k=E,Te=A-B,H=d;k<=Te;k++,H++){var ve=a[H<0?H+o:H],_e=ve._point,Pe=ie[k]-_e._x,Ee=se[k]-_e._y;(f||k<Te)&&ve.setHandleOut(Pe,Ee),(f||k>E)&&ve.setHandleIn(-Pe,-Ee)}}else for(var k=d;k<=C;k++)a[k<0?k+o:k].smooth(n,!f&&k===d,!f&&k===C)},toShape:function(e){if(!this._closed)return null;var t=this._segments,n,i,a,o;function l(P,b){var U=t[P],A=U.getNext(),V=t[b],E=V.getNext();return U._handleOut.isZero()&&A._handleIn.isZero()&&V._handleOut.isZero()&&E._handleIn.isZero()&&A._point.subtract(U._point).isCollinear(E._point.subtract(V._point))}T(l,"isCollinear");function u(P){var b=t[P],U=b.getPrevious(),A=b.getNext();return U._handleOut.isZero()&&b._handleIn.isZero()&&b._handleOut.isZero()&&A._handleIn.isZero()&&b._point.subtract(U._point).isOrthogonal(A._point.subtract(b._point))}T(u,"isOrthogonal");function f(P){var b=t[P],U=b.getNext(),A=b._handleOut,V=U._handleIn,E=.5522847498307936;if(A.isOrthogonal(V)){var B=b._point,y=U._point,k=new L(B,A,!0).intersect(new L(y,V,!0),!0);return k&&I.isZero(A.getLength()/k.subtract(B).getLength()-E)&&I.isZero(V.getLength()/k.subtract(y).getLength()-E)}return!1}T(f,"isArc");function d(P,b){return t[P]._point.getDistance(t[b]._point)}if(T(d,"getDistance"),!this.hasHandles()&&t.length===4&&l(0,2)&&l(1,3)&&u(1)?(n=J.Rectangle,i=new _(d(0,3),d(0,1)),o=t[1]._point.add(t[2]._point).divide(2)):t.length===8&&f(0)&&f(2)&&f(4)&&f(6)&&l(1,5)&&l(3,7)?(n=J.Rectangle,i=new _(d(1,6),d(0,3)),a=i.subtract(new _(d(0,7),d(1,2))).divide(2),o=t[3]._point.add(t[4]._point).divide(2)):t.length===4&&f(0)&&f(1)&&f(2)&&f(3)&&(I.isZero(d(0,2)-d(1,3))?(n=J.Circle,a=d(0,2)/2):(n=J.Ellipse,a=new _(d(2,0)/2,d(3,1)/2)),o=t[1]._point),n){var C=this.getPosition(!0),M=new n({center:C,size:i,radius:a,insert:!1});return M.copyAttributes(this,!0),M._matrix.prepend(this._matrix),M.rotate(o.subtract(C).getAngle()+90),(e===m||e)&&M.insertAbove(this),M}return null},toPath:"#clone",compare:T(function e(t){if(!t||t instanceof Me)return e.base.call(this,t);var n=this.getCurves(),i=t.getCurves(),a=n.length,o=i.length;if(!a||!o)return a==o;for(var l=n[0].getValues(),u=[],f=0,d,C=0,M,P=0;P<o;P++){var V=i[P].getValues();u.push(V);var b=de.getOverlaps(l,V);if(b){d=!P&&b[0][0]>0?o-1:P,M=b[0][1];break}}for(var U=Math.abs,A=1e-8,V=u[d],E;l&&V;){var b=de.getOverlaps(l,V);if(b){var B=b[0][0];if(U(B-C)<A){C=b[1][0],C===1&&(l=++f<a?n[f].getValues():null,C=0);var y=b[0][1];if(U(y-M)<A){if(E||(E=[d,y]),M=b[1][1],M===1&&(++d>=o&&(d=0),V=u[d]||i[d].getValues(),M=0),!l)return E[0]===d&&E[1]===M;continue}}}break}return!1},"compare"),_hitTestSelf:function(e,t,n,i){var a=this,o=this.getStyle(),l=this._segments,u=l.length,f=this._closed,d=t._tolerancePadding,C=d,M,P,b,U,A,V,E=t.stroke&&o.hasStroke(),B=t.fill&&o.hasFill(),y=t.curves,k=E?o.getStrokeWidth()/2:B&&t.tolerance>0||y?0:null;k!==null&&(k>0?(M=o.getStrokeJoin(),P=o.getStrokeCap(),b=o.getMiterLimit(),C=C.add(we._getStrokePadding(k,i))):M=P="round");function H(ie,se){return e.subtract(ie).divide(se).length<=1}T(H,"isCloseEnough");function j(ie,se,ue){if(!t.selected||se.isSelected()){var le=ie._point;if(se!==le&&(se=se.add(le)),H(se,C))return new pe(ue,a,{segment:ie,point:se})}}T(j,"checkSegmentPoint");function z(ie,se){return(se||t.segments)&&j(ie,ie._point,"segment")||!se&&t.handles&&(j(ie,ie._handleIn,"handle-in")||j(ie,ie._handleOut,"handle-out"))}T(z,"checkSegmentPoints");function G(ie){U.add(ie)}T(G,"addToArea");function Q(ie){var se=f||ie._index>0&&ie._index<u-1;if((se?M:P)==="round")return H(ie._point,C);if(U=new we({internal:!0,closed:!0}),se?ie.isSmooth()||we._addBevelJoin(ie,M,k,b,null,i,G,!0):P==="square"&&we._addSquareCap(ie,P,k,null,i,G,!0),!U.isEmpty()){var ue;return U.contains(e)||(ue=U.getNearestLocation(e))&&H(ue.getPoint(),d)}}if(T(Q,"checkSegmentStroke"),t.ends&&!t.segments&&!f){if(V=z(l[0],!0)||z(l[u-1],!0))return V}else if(t.segments||t.handles){for(var Y=0;Y<u;Y++)if(V=z(l[Y]))return V}if(k!==null){if(A=this.getNearestLocation(e),A){var re=A.getTime();re===0||re===1&&u>1?Q(A.getSegment())||(A=null):H(A.getPoint(),C)||(A=null)}if(!A&&M==="miter"&&u>1)for(var Y=0;Y<u;Y++){var Z=l[Y];if(e.getDistance(Z._point)<=b*k&&Q(Z)){A=Z.getLocation();break}}}return!A&&B&&this._contains(e)||A&&!E&&!y?new pe("fill",this):A?new pe(E?"stroke":"curve",this,{location:A,point:A.getPoint()}):null}},r.each(de._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this.getLocationAt(t);return n&&n[e]()}},{beans:!1,getLocationOf:function(){for(var e=s.read(arguments),t=this.getCurves(),n=0,i=t.length;n<i;n++){var a=t[n].getLocationOf(e);if(a)return a}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if(typeof e=="number"){for(var t=this.getCurves(),n=0,i=0,a=t.length;i<a;i++){var o=n,l=t[i];if(n+=l.getLength(),n>e)return l.getLocationAt(e-o)}if(t.length>0&&e<=this.getLength())return new Oe(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=s.read(arguments);if(e.isZero())return[];for(var t=[],n=0,i=this.getCurves(),a=0,o=i.length;a<o;a++){for(var l=i[a],u=l.getTimesWithTangent(e),f=0,d=u.length;f<d;f++){var C=n+l.getOffsetAtTime(u[f]);t.indexOf(C)<0&&t.push(C)}n+=l.length}return t}}),new function(){function e(n,i,a,o){if(o<=0)return;var l=o/2,u=o-2,f=l-1,d=new Array(6),C,M;function P(B){var y=d[B],k=d[B+1];(C!=y||M!=k)&&(n.beginPath(),n.moveTo(C,M),n.lineTo(y,k),n.stroke(),n.beginPath(),n.arc(y,k,l,0,Math.PI*2,!0),n.fill())}T(P,"drawHandle");for(var b=0,U=i.length;b<U;b++){var A=i[b],V=A._selection;if(A._transformCoordinates(a,d),C=d[0],M=d[1],V&2&&P(2),V&4&&P(4),n.fillRect(C-l,M-l,o,o),u>0&&!(V&1)){var E=n.fillStyle;n.fillStyle="#ffffff",n.fillRect(C-f,M-f,u,u),n.fillStyle=E}}}T(e,"drawHandles");function t(n,i,a){var o=i._segments,l=o.length,u=new Array(6),f=!0,d,C,M,P,b,U,A,V;function E(y){if(a)y._transformCoordinates(a,u),d=u[0],C=u[1];else{var k=y._point;d=k._x,C=k._y}if(f)n.moveTo(d,C),f=!1;else{if(a)b=u[2],U=u[3];else{var H=y._handleIn;b=d+H._x,U=C+H._y}b===d&&U===C&&A===M&&V===P?n.lineTo(d,C):n.bezierCurveTo(A,V,b,U,d,C)}if(M=d,P=C,a)A=u[4],V=u[5];else{var H=y._handleOut;A=M+H._x,V=P+H._y}}T(E,"drawSegment");for(var B=0;B<l;B++)E(o[B]);i._closed&&l>0&&E(o[0])}return T(t,"drawSegments"),{_draw:function(n,i,a,o){var l=i.dontStart,u=i.dontFinish||i.clip,f=this.getStyle(),d=f.hasFill(),C=f.hasStroke(),M=f.getDashArray(),P=!Ve.support.nativeDash&&C&&M&&M.length;l||n.beginPath(),(d||C&&!P||u)&&(t(n,this,o),this._closed&&n.closePath());function b(y){return M[(y%P+P)%P]}if(T(b,"getOffset"),!u&&(d||C)&&(this._setStyles(n,i,a),d&&(n.fill(f.getFillRule()),n.shadowColor="rgba(0,0,0,0)"),C)){if(P){l||n.beginPath();for(var U=new je(this,.25,32,!1,o),A=U.length,V=-f.getDashOffset(),E,B=0;V>0;)V-=b(B--)+b(B--);for(;V<A;)E=V+b(B++),(V>0||E>0)&&U.drawPart(n,Math.max(V,0),Math.max(E,0)),V=E+b(B++)}n.stroke()}},_drawSelected:function(n,i){n.beginPath(),t(n,this,i),n.stroke(),e(n,this._segments,i,Ve.settings.handleSize)}}},new function(){function e(t){var n=t._segments;if(!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return T(e,"getCurrentSegment"),{moveTo:function(){var t=this._segments;t.length===1&&this.removeSegment(0),t.length||this._add([new ce(s.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new ce(s.read(arguments))])},cubicCurveTo:function(){var t=arguments,n=s.read(t),i=s.read(t),a=s.read(t),o=e(this);o.setHandleOut(n.subtract(o._point)),this._add([new ce(a,i.subtract(a))])},quadraticCurveTo:function(){var t=arguments,n=s.read(t),i=s.read(t),a=e(this)._point;this.cubicCurveTo(n.add(a.subtract(n).multiply(1/3)),n.add(i.subtract(n).multiply(1/3)),i)},curveTo:function(){var t=arguments,n=s.read(t),i=s.read(t),a=r.pick(r.read(t),.5),o=1-a,l=e(this)._point,u=n.subtract(l.multiply(o*o)).subtract(i.multiply(a*a)).divide(2*a*o);if(u.isNaN())throw new Error("Cannot put a curve through points with parameter = "+a);this.quadraticCurveTo(u,i)},arcTo:function(){var t=arguments,n=Math.abs,i=Math.sqrt,a=e(this),o=a._point,l=s.read(t),u,f=r.peek(t),d=r.pick(f,!0),C,M,P,b;if(typeof d=="boolean")var U=o.add(l).divide(2),u=U.add(U.subtract(o).rotate(d?-90:90));else if(r.remain(t)<=2)u=l,l=s.read(t);else if(!o.equals(l)){var A=_.read(t),V=I.isZero;if(V(A.width)||V(A.height))return this.lineTo(l);var E=r.read(t),d=!!r.read(t),B=!!r.read(t),U=o.add(l).divide(2),y=o.subtract(U).rotate(-E),k=y.x,H=y.y,j=n(A.width),z=n(A.height),G=j*j,Q=z*z,Y=k*k,re=H*H,Z=i(Y/G+re/Q);if(Z>1&&(j*=Z,z*=Z,G=j*j,Q=z*z),Z=(G*Q-G*re-Q*Y)/(G*re+Q*Y),n(Z)<1e-12&&(Z=0),Z<0)throw new Error("Cannot create an arc with the given arguments");C=new s(j*H/z,-z*k/j).multiply((B===d?-1:1)*i(Z)).rotate(E).add(U),b=new X().translate(C).rotate(E).scale(j,z),P=b._inverseTransform(o),M=P.getDirectedAngle(b._inverseTransform(l)),!d&&M>0?M-=360:d&&M<0&&(M+=360)}if(u){var ie=new L(o.add(u).divide(2),u.subtract(o).rotate(90),!0),se=new L(u.add(l).divide(2),l.subtract(u).rotate(90),!0),ue=new L(o,l),le=ue.getSide(u);if(C=ie.intersect(se,!0),!C){if(!le)return this.lineTo(l);throw new Error("Cannot create an arc with the given arguments")}P=o.subtract(C),M=P.getDirectedAngle(l.subtract(C));var he=ue.getSide(C,!0);he===0?M=le*n(M):le===he&&(M+=M<0?360:-360)}if(M){for(var ye=1e-5,xe=n(M),be=xe>=360?4:Math.ceil((xe-ye)/90),Te=M/be,ve=Te*Math.PI/360,_e=4/3*Math.sin(ve)/(1+Math.cos(ve)),Pe=[],Ee=0;Ee<=be;Ee++){var y=l,Ie=null;if(Ee<be&&(Ie=P.rotate(90).multiply(_e),b?(y=b._transformPoint(P),Ie=b._transformPoint(P.add(Ie)).subtract(y)):y=C.add(P)),!Ee)a.setHandleOut(Ie);else{var Re=P.rotate(-90).multiply(_e);b&&(Re=b._transformPoint(P.add(Re)).subtract(y)),Pe.push(new ce(y,Re,Ie))}P=P.rotate(Te)}this._add(Pe)}},lineBy:function(){var t=s.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=arguments,n=s.read(t),i=s.read(t),a=r.read(t),o=e(this)._point;this.curveTo(o.add(n),o.add(i),a)},cubicCurveBy:function(){var t=arguments,n=s.read(t),i=s.read(t),a=s.read(t),o=e(this)._point;this.cubicCurveTo(o.add(n),o.add(i),o.add(a))},quadraticCurveBy:function(){var t=arguments,n=s.read(t),i=s.read(t),a=e(this)._point;this.quadraticCurveTo(a.add(n),a.add(i))},arcBy:function(){var t=arguments,n=e(this)._point,i=n.add(s.read(t)),a=r.pick(r.peek(t),!0);typeof a=="boolean"?this.arcTo(i,a):this.arcTo(i,n.add(s.read(t)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(e,t){var n=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return we[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,i,a,o){var l=e[0];if(!l)return new F;var u=new Array(6),f=l._transformCoordinates(i,new Array(6)),d=f.slice(0,2),C=d.slice(),M=new Array(2);function P(A){A._transformCoordinates(i,u);for(var V=0;V<2;V++)de._addBounds(f[V],f[V+4],u[V+2],u[V],V,o?o[V]:0,d,C,M);var E=f;f=u,u=E}T(P,"processSegment");for(var b=1,U=e.length;b<U;b++)P(e[b]);return t&&P(l),new F(d[0],d[1],C[0]-d[0],C[1]-d[1])},getStrokeBounds:function(e,t,n,i,a){var o=n.getStyle(),l=o.hasStroke(),u=o.getStrokeWidth(),f=l&&n._getStrokeMatrix(i,a),d=l&&we._getStrokePadding(u,f),C=we.getBounds(e,t,n,i,a,d);if(!l)return C;var M=u/2,P=o.getStrokeJoin(),b=o.getStrokeCap(),U=o.getMiterLimit(),A=new F(new _(d));function V(j){C=C.include(j)}T(V,"addPoint");function E(j){C=C.unite(A.setCenter(j._point.transform(i)))}T(E,"addRound");function B(j,z){z==="round"||j.isSmooth()?E(j):we._addBevelJoin(j,z,M,U,i,f,V)}T(B,"addJoin");function y(j,z){z==="round"?E(j):we._addSquareCap(j,z,M,i,f,V)}T(y,"addCap");var k=e.length-(t?0:1);if(k>0){for(var H=1;H<k;H++)B(e[H],P);t?B(e[0],P):(y(e[0],b),y(e[e.length-1],b))}return C},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new s(e,0).transform(t),i=new s(0,e).transform(t),a=n.getAngleInRadians(),o=n.getLength(),l=i.getLength(),u=Math.sin(a),f=Math.cos(a),d=Math.tan(a),C=Math.atan2(l*d,o),M=Math.atan2(l,d*o);return[Math.abs(o*Math.cos(C)*f+l*Math.sin(C)*u),Math.abs(l*Math.sin(M)*f+o*Math.cos(M)*u)]},_addBevelJoin:function(e,t,n,i,a,o,l,u){var f=e.getCurve(),d=f.getPrevious(),C=f.getPoint1().transform(a),M=d.getNormalAtTime(1).multiply(n).transform(o),P=f.getNormalAtTime(0).multiply(n).transform(o),b=M.getDirectedAngle(P);if((b<0||b>=180)&&(M=M.negate(),P=P.negate()),u&&l(C),l(C.add(M)),t==="miter"){var U=new L(C.add(M),new s(-M.y,M.x),!0).intersect(new L(C.add(P),new s(-P.y,P.x),!0),!0);U&&C.getDistance(U)<=i*n&&l(U)}l(C.add(P))},_addSquareCap:function(e,t,n,i,a,o,l){var u=e._point.transform(i),f=e.getLocation(),d=f.getNormal().multiply(f.getTime()===0?n:-n).transform(a);t==="square"&&(l&&(o(u.subtract(d)),o(u.add(d))),u=u.add(d.rotate(-90))),o(u.add(d)),o(u.subtract(d))},getHandleBounds:function(e,t,n,i,a){var o=n.getStyle(),l=a.stroke&&o.hasStroke(),u,f;if(l){var d=n._getStrokeMatrix(i,a),C=o.getStrokeWidth()/2,M=C;o.getStrokeJoin()==="miter"&&(M=C*o.getMiterLimit()),o.getStrokeCap()==="square"&&(M=Math.max(M,C*Math.SQRT2)),u=we._getStrokePadding(C,d),f=we._getStrokePadding(M,d)}for(var P=new Array(6),b=1/0,U=-b,A=b,V=U,E=0,B=e.length;E<B;E++){var y=e[E];y._transformCoordinates(i,P);for(var k=0;k<6;k+=2){var H=k?u:f,j=H?H[0]:0,z=H?H[1]:0,G=P[k],Q=P[k+1],Y=G-j,re=G+j,Z=Q-z,ie=Q+z;Y<b&&(b=Y),re>U&&(U=re),Z<A&&(A=Z),ie>V&&(V=ie)}}return new F(b,A,U-b,V-A)}}});we.inject({statics:new function(){var e=.5522847498307936,t=[new ce([-1,0],[0,e],[0,-e]),new ce([0,-1],[-e,0],[e,0]),new ce([1,0],[0,-e],[0,e]),new ce([0,1],[e,0],[-e,0])];function n(a,o,l){var u=r.getNamed(l),f=new we(u&&(u.insert==!0?$.INSERT:u.insert==!1?$.NO_INSERT:null));return f._add(a),f._closed=o,f.set(u,$.INSERT)}T(n,"createPath");function i(a,o,l){for(var u=new Array(4),f=0;f<4;f++){var d=t[f];u[f]=new ce(d._point.multiply(o).add(a),d._handleIn.multiply(o),d._handleOut.multiply(o))}return n(u,!0,l)}return T(i,"createEllipse"),{Line:function(){var a=arguments;return n([new ce(s.readNamed(a,"from")),new ce(s.readNamed(a,"to"))],!1,a)},Circle:function(){var a=arguments,o=s.readNamed(a,"center"),l=r.readNamed(a,"radius");return i(o,new _(l),a)},Rectangle:function(){var a=arguments,o=F.readNamed(a,"rectangle"),l=_.readNamed(a,"radius",0,{readNull:!0}),u=o.getBottomLeft(!0),f=o.getTopLeft(!0),d=o.getTopRight(!0),C=o.getBottomRight(!0),M;if(!l||l.isZero())M=[new ce(u),new ce(f),new ce(d),new ce(C)];else{l=_.min(l,o.getSize(!0).divide(2));var P=l.width,b=l.height,U=P*e,A=b*e;M=[new ce(u.add(P,0),null,[-U,0]),new ce(u.subtract(0,b),[0,A]),new ce(f.add(0,b),null,[0,-A]),new ce(f.add(P,0),[-U,0],null),new ce(d.subtract(P,0),null,[U,0]),new ce(d.add(0,b),[0,-A],null),new ce(C.subtract(0,b),null,[0,A]),new ce(C.subtract(P,0),[U,0])]}return n(M,!0,a)},RoundRectangle:"#Rectangle",Ellipse:function(){var a=arguments,o=J._readEllipse(a);return i(o.center,o.radius,a)},Oval:"#Ellipse",Arc:function(){var a=arguments,o=s.readNamed(a,"from"),l=s.readNamed(a,"through"),u=s.readNamed(a,"to"),f=r.getNamed(a),d=new we(f&&f.insert==!1&&$.NO_INSERT);return d.moveTo(o),d.arcTo(l,u),d.set(f)},RegularPolygon:function(){for(var a=arguments,o=s.readNamed(a,"center"),l=r.readNamed(a,"sides"),u=r.readNamed(a,"radius"),f=360/l,d=l%3===0,C=new s(0,d?-u:u),M=d?-1:.5,P=new Array(l),b=0;b<l;b++)P[b]=new ce(o.add(C.rotate((b+M)*f)));return n(P,!0,a)},Star:function(){for(var a=arguments,o=s.readNamed(a,"center"),l=r.readNamed(a,"points")*2,u=r.readNamed(a,"radius1"),f=r.readNamed(a,"radius2"),d=360/l,C=new s(0,-1),M=new Array(l),P=0;P<l;P++)M[P]=new ce(o.add(C.rotate(d*P).multiply(P%2?f:u)));return n(M,!0,a)}}}});var Me=Se.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:T(function(t){this._children=[],this._namedChildren={},this._initialize(t)||(typeof t=="string"?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},"CompoundPath"),insertChildren:T(function e(t,n){var i=n,a=i[0];a&&typeof a[0]=="number"&&(i=[i]);for(var o=n.length-1;o>=0;o--){var l=i[o];i===n&&!(l instanceof we)&&(i=r.slice(i)),Array.isArray(l)?i[o]=new we({segments:l,insert:!1}):l instanceof Me&&(i.splice.apply(i,[o,1].concat(l.removeChildren())),l.remove())}return e.base.call(this,t,i)},"insertChildren"),reduce:T(function e(t){for(var n=this._children,i=n.length-1;i>=0;i--){var a=n[i].reduce(t);a.isEmpty()&&a.remove()}if(!n.length){var a=new we($.NO_INSERT);return a.copyAttributes(this),a.insertAbove(this),this.remove(),a}return e.base.call(this)},"reduce"),isClosed:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,n=0,i=t.length;n<i;n++)t[n].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,i=e.length;n<i;n++)r.push(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,n=0,i=e.length;n<i;n++)t+=e[n].getArea();return t},getLength:function(){for(var e=this._children,t=0,n=0,i=e.length;n<i;n++)t+=e[n].getLength();return t},getPathData:function(e,t){for(var n=this._children,i=[],a=0,o=n.length;a<o;a++){var l=n[a],u=l._matrix;i.push(l.getPathData(e&&!u.isIdentity()?e.appended(u):e,t))}return i.join("")},_hitTestChildren:T(function e(t,n,i){return e.base.call(this,t,n.class===we||n.type==="path"?n:r.set({},n,{fill:!1}),i)},"_hitTestChildren"),_draw:function(e,t,n,i){var a=this._children;if(!!a.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var o=0,l=a.length;o<l;o++)a[o].draw(e,t,i);if(!t.clip){this._setStyles(e,t,n);var u=this._style;u.hasFill()&&(e.fill(u.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),u.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var i=this._children,a=0,o=i.length;a<o;a++){var l=i[a],u=l._matrix;n[l._id]||l._drawSelected(e,u.isIdentity()?t:t.appended(u))}}},new function(){function e(t,n){var i=t._children;if(n&&!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}return T(e,"getCurrentPath"),r.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}},{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new we($.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),i=s.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(t){e(this,!0).closePath(t)}})},r.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var n=this._children,i,a=0,o=n.length;a<o;a++)i=n[a][e](t)||i;return i}},{}));Se.inject(new function(){var e=Math.min,t=Math.max,n=Math.abs,i={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function a(E){return E._children||[E]}T(a,"getPaths");function o(E,B){var y=E.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(B){for(var k=a(y),H=0,j=k.length;H<j;H++){var E=k[H];!E._closed&&!E.isEmpty()&&(E.closePath(1e-12),E.getFirstSegment().setHandleIn(0,0),E.getLastSegment().setHandleOut(0,0))}y=y.resolveCrossings().reorient(y.getFillRule()==="nonzero",!0)}return y}T(o,"preparePath");function l(E,B,y,k,H){var j=new Me($.NO_INSERT);return j.addChildren(E,!0),j=j.reduce({simplify:B}),H&&H.insert==!1||j.insertAbove(k&&y.isSibling(k)&&y.getIndex()<k.getIndex()?k:y),j.copyAttributes(y,!0),j}T(l,"createResult");function u(E){return E.hasOverlap()||E.isCrossing()}T(u,"filterIntersection");function f(E,B,y,k){if(k&&(k.trace==!1||k.stroke)&&/^(subtract|intersect)$/.test(y))return d(E,B,y);var H=o(E,!0),j=B&&E!==B&&o(B,!0),z=i[y];z[y]=!0,j&&(z.subtract||z.exclude)^(j.isClockwise()^H.isClockwise())&&j.reverse();var G=b(Oe.expand(H.getIntersections(j,u))),Q=a(H),Y=j&&a(j),re=[],Z=[],ie;function se(Ie){for(var Re=0,Ae=Ie.length;Re<Ae;Re++){var Be=Ie[Re];r.push(re,Be._segments),r.push(Z,Be.getCurves()),Be._overlapsOnly=!0}}T(se,"collectPaths");function ue(Ie){for(var Re=[],Ae=0,Be=Ie&&Ie.length;Ae<Be;Ae++)Re.push(Z[Ie[Ae]]);return Re}if(T(ue,"getCurves"),G.length){se(Q),Y&&se(Y);for(var le=new Array(Z.length),he=0,ye=Z.length;he<ye;he++)le[he]=Z[he].getValues();for(var xe=O.findCurveBoundsCollisions(le,le,0,!0),be={},he=0;he<Z.length;he++){var Te=Z[he],ve=Te._path._id,_e=be[ve]=be[ve]||{};_e[Te.getIndex()]={hor:ue(xe[he].hor),ver:ue(xe[he].ver)}}for(var he=0,ye=G.length;he<ye;he++)A(G[he]._segment,H,j,be,z);for(var he=0,ye=re.length;he<ye;he++){var Pe=re[he],Ee=Pe._intersection;Pe._winding||A(Pe,H,j,be,z),Ee&&Ee._overlap||(Pe._path._overlapsOnly=!1)}ie=V(re,z)}else ie=P(Y?Q.concat(Y):Q.slice(),function(Ie){return!!z[Ie]});return l(ie,!0,E,B,k)}T(f,"traceBoolean");function d(E,B,y){var k=o(E),H=o(B),j=k.getIntersections(H,u),z=y==="subtract",G=y==="divide",Q={},Y=[];function re(se){if(!Q[se._id]&&(G||H.contains(se.getPointAt(se.getLength()/2))^z))return Y.unshift(se),Q[se._id]=!0}T(re,"addPath");for(var Z=j.length-1;Z>=0;Z--){var ie=j[Z].split();ie&&(re(ie)&&ie.getFirstSegment().setHandleIn(0,0),k.getLastSegment().setHandleOut(0,0))}return re(k),l(Y,!1,E,B)}T(d,"splitBoolean");function C(E,B){for(var y=E;y;){if(y===B)return;y=y._previous}for(;E._next&&E._next!==B;)E=E._next;if(!E._next){for(;B._previous;)B=B._previous;E._next=B,B._previous=E}}T(C,"linkIntersections");function M(E){for(var B=E.length-1;B>=0;B--)E[B].clearHandles()}T(M,"clearCurveHandles");function P(E,B,y){var k=E&&E.length;if(k){var H=r.each(E,function(xe,be){this[xe._id]={container:null,winding:xe.isClockwise()?1:-1,index:be}},{}),j=E.slice().sort(function(xe,be){return n(be.getArea())-n(xe.getArea())}),z=j[0],G=O.findItemBoundsCollisions(j,null,I.GEOMETRIC_EPSILON);y==null&&(y=z.isClockwise());for(var Q=0;Q<k;Q++){var Y=j[Q],re=H[Y._id],Z=0,ie=G[Q];if(ie){for(var se=null,ue=ie.length-1;ue>=0;ue--)if(ie[ue]<Q){se=se||Y.getInteriorPoint();var le=j[ie[ue]];if(le.contains(se)){var he=H[le._id];Z=he.winding,re.winding+=Z,re.container=he.exclude?he.container:le;break}}}if(B(re.winding)===B(Z))re.exclude=!0,E[re.index]=null;else{var ye=re.container;Y.setClockwise(ye?!ye.isClockwise():y)}}}return E}T(P,"reorientPaths");function b(E,B,y){var k=B&&[],H=1e-8,j=1-H,z=!1,G=y||[],Q=y&&{},Y,re,Z;function ie(Re){return Re._path._id+"."+Re._segment1._index}T(ie,"getId");for(var se=(y&&y.length)-1;se>=0;se--){var ue=y[se];ue._path&&(Q[ie(ue)]=!0)}for(var se=E.length-1;se>=0;se--){var le=E[se],he=le._time,ye=he,xe=B&&!B(le),ue=le._curve,be;if(ue&&(ue!==re?(z=!ue.hasHandles()||Q&&Q[ie(ue)],Y=[],Z=null,re=ue):Z>=H&&(he/=Z)),xe){Y&&Y.push(le);continue}else B&&k.unshift(le);if(Z=ye,he<H)be=ue._segment1;else if(he>j)be=ue._segment2;else{var Te=ue.divideAtTime(he,!0);z&&G.push(ue,Te),be=Te._segment1;for(var ve=Y.length-1;ve>=0;ve--){var _e=Y[ve];_e._time=(_e._time-he)/(1-he)}}le._setSegment(be);var Pe=be._intersection,Ee=le._intersection;if(Pe){C(Pe,Ee);for(var Ie=Pe;Ie;)C(Ie._intersection,Pe),Ie=Ie._next}else be._intersection=Ee}return y||M(G),k||E}T(b,"divideLocations");function U(E,B,y,k,H){var j=Array.isArray(B)?B:B[y?"hor":"ver"],z=y?1:0,G=z^1,Q=[E.x,E.y],Y=Q[z],re=Q[G],Z=1e-9,ie=1e-6,se=Y-Z,ue=Y+Z,le=0,he=0,ye=0,xe=0,be=!1,Te=!1,ve=1,_e=[],Pe,Ee;function Ie(Ze){var it=Ze[G+0],yt=Ze[G+6];if(!(re<e(it,yt)||re>t(it,yt))){var ft=Ze[z+0],Pt=Ze[z+2],Xt=Ze[z+4],Tt=Ze[z+6];if(it===yt){(ft<ue&&Tt>se||Tt<ue&&ft>se)&&(be=!0);return}var It=re===it?0:re===yt||se>t(ft,Pt,Xt,Tt)||ue<e(ft,Pt,Xt,Tt)?1:de.solveCubic(Ze,G,re,_e,0,1)>0?_e[0]:1,xt=It===0?ft:It===1?Tt:de.getPoint(Ze,It)[y?"y":"x"],bt=it>yt?1:-1,Zt=Pe[G]>Pe[G+6]?1:-1,Et=Pe[z+6];return re!==it?(xt<se?ye+=bt:xt>ue?xe+=bt:be=!0,xt>Y-ie&&xt<Y+ie&&(ve/=2)):(bt!==Zt?ft<se?ye+=bt:ft>ue&&(xe+=bt):ft!=Et&&(Et<ue&&xt>ue?(xe+=bt,be=!0):Et>se&&xt<se&&(ye+=bt,be=!0)),ve/=4),Pe=Ze,!H&&xt>se&&xt<ue&&de.getTangent(Ze,It)[y?"x":"y"]===0&&U(E,B,!y,k,!0)}}T(Ie,"addWinding");function Re(Ze){var it=Ze[G+0],yt=Ze[G+2],ft=Ze[G+4],Pt=Ze[G+6];if(re<=t(it,yt,ft,Pt)&&re>=e(it,yt,ft,Pt)){for(var Xt=Ze[z+0],Tt=Ze[z+2],It=Ze[z+4],xt=Ze[z+6],bt=se>t(Xt,Tt,It,xt)||ue<e(Xt,Tt,It,xt)?[Ze]:de.getMonoCurves(Ze,y),Zt,Et=0,Kn=bt.length;Et<Kn;Et++)if(Zt=Ie(bt[Et]))return Zt}}T(Re,"handleCurve");for(var Ae=0,Be=j.length;Ae<Be;Ae++){var He=j[Ae],Ne=He._path,ut=He.getValues(),lt;if((!Ae||j[Ae-1]._path!==Ne)&&(Pe=null,Ne._closed||(Ee=de.getValues(Ne.getLastCurve().getSegment2(),He.getSegment1(),null,!k),Ee[G]!==Ee[G+6]&&(Pe=Ee)),!Pe)){Pe=ut;for(var vt=Ne.getLastCurve();vt&&vt!==He;){var nt=vt.getValues();if(nt[G]!==nt[G+6]){Pe=nt;break}vt=vt.getPrevious()}}if(lt=Re(ut))return lt;if(Ae+1===Be||j[Ae+1]._path!==Ne){if(Ee&&(lt=Re(Ee)))return lt;be&&!ye&&!xe&&(ye=xe=Ne.isClockwise(k)^y?1:-1),le+=ye,he+=xe,ye=xe=0,be&&(Te=!0,be=!1),Ee=null}}return le=n(le),he=n(he),{winding:t(le,he),windingL:le,windingR:he,quality:ve,onPath:Te}}T(U,"getWinding");function A(E,B,y,k,H){var j=[],z=E,G=0,Z;do{var Q=E.getCurve();if(Q){var Y=Q.getLength();j.push({segment:E,curve:Q,length:Y}),G+=Y}E=E.getNext()}while(E&&!E._intersection&&E!==z);for(var re=[.5,.25,.75],Z={winding:0,quality:-1},ie=.001,se=1-ie,ue=0;ue<re.length&&Z.quality<.5;ue++)for(var Y=G*re[ue],le=0,he=j.length;le<he;le++){var ye=j[le],xe=ye.length;if(Y<=xe){var Q=ye.curve,be=Q._path,Te=be._parent,ve=Te instanceof Me?Te:be,_e=I.clamp(Q.getTimeAt(Y),ie,se),Pe=Q.getPointAtTime(_e),Ee=n(Q.getTangentAtTime(_e).y)<Math.SQRT1_2,Ie=null;if(H.subtract&&y){var Re=ve===B?y:B,Ae=Re._getWinding(Pe,Ee,!0);if(ve===B&&Ae.winding||ve===y&&!Ae.winding){if(Ae.quality<1)continue;Ie={winding:0,quality:1}}}Ie=Ie||U(Pe,k[be._id][Q.getIndex()],Ee,!0),Ie.quality>Z.quality&&(Z=Ie);break}Y-=xe}for(var le=j.length-1;le>=0;le--)j[le].segment._winding=Z}T(A,"propagateWinding");function V(E,B){var y=[],k;function H(Be){var He;return!!(Be&&!Be._visited&&(!B||B[(He=Be._winding||{}).winding]&&!(B.unite&&He.winding===2&&He.windingL&&He.windingR)))}T(H,"isValid");function j(Be){if(Be){for(var He=0,Ne=k.length;He<Ne;He++)if(Be===k[He])return!0}return!1}T(j,"isStart");function z(Be){for(var He=Be._segments,Ne=0,ut=He.length;Ne<ut;Ne++)He[Ne]._visited=!0}T(z,"visitPath");function G(Be,He){var Ne=Be._intersection,ut=Ne,lt=[];He&&(k=[Be]);function vt(nt,Ze){for(;nt&&nt!==Ze;){var it=nt._segment,yt=it&&it._path;if(yt){var ft=it.getNext()||yt.getFirstSegment(),Pt=ft._intersection;it!==Be&&(j(it)||j(ft)||ft&&H(it)&&(H(ft)||Pt&&H(Pt._segment)))&&lt.push(it),He&&k.push(it)}nt=nt._next}}if(T(vt,"collect"),Ne){for(vt(Ne);Ne&&Ne._previous;)Ne=Ne._previous;vt(Ne,ut)}return lt}T(G,"getCrossingSegments"),E.sort(function(Be,He){var Ne=Be._intersection,ut=He._intersection,lt=!!(Ne&&Ne._overlap),vt=!!(ut&&ut._overlap),nt=Be._path,Ze=He._path;return lt^vt?lt?1:-1:!Ne^!ut?Ne?1:-1:nt!==Ze?nt._id-Ze._id:Be._index-He._index});for(var Q=0,Y=E.length;Q<Y;Q++){var re=E[Q],Z=H(re),ie=null,se=!1,ue=!0,le=[],he,ye,xe;if(Z&&re._path._overlapsOnly){var be=re._path,Te=re._intersection._segment._path;be.compare(Te)&&(be.getArea()&&y.push(be.clone(!1)),z(be),z(Te),Z=!1)}for(;Z;){var ve=!ie,_e=G(re,ve),Pe=_e.shift(),se=!ve&&(j(re)||j(Pe)),Ee=!se&&Pe;if(ve&&(ie=new we($.NO_INSERT),he=null),se){(re.isFirst()||re.isLast())&&(ue=re._path._closed),re._visited=!0;break}if(Ee&&he&&(le.push(he),he=null),he||(Ee&&_e.push(re),he={start:ie._segments.length,crossings:_e,visited:ye=[],handleIn:xe}),Ee&&(re=Pe),!H(re)){ie.removeSegments(he.start);for(var Ie=0,Re=ye.length;Ie<Re;Ie++)ye[Ie]._visited=!1;ye.length=0;do re=he&&he.crossings.shift(),(!re||!re._path)&&(re=null,he=le.pop(),he&&(ye=he.visited,xe=he.handleIn));while(he&&!H(re));if(!re)break}var Ae=re.getNext();ie.add(new ce(re._point,xe,Ae&&re._handleOut)),re._visited=!0,ye.push(re),re=Ae||re._path.getFirstSegment(),xe=Ae&&Ae._handleIn}se&&(ue&&(ie.getFirstSegment().setHandleIn(xe),ie.setClosed(ue)),ie.getArea()!==0&&y.push(ie))}return y}return T(V,"tracePaths"),{_getWinding:function(E,B,y){return U(E,this.getCurves(),B,y)},unite:function(E,B){return f(this,E,"unite",B)},intersect:function(E,B){return f(this,E,"intersect",B)},subtract:function(E,B){return f(this,E,"subtract",B)},exclude:function(E,B){return f(this,E,"exclude",B)},divide:function(E,B){return B&&(B.trace==!1||B.stroke)?d(this,E,"divide"):l([this.subtract(E,B),this.intersect(E,B)],!0,this,E,B)},resolveCrossings:function(){var E=this._children,B=E||[this];function y(he,ye){var xe=he&&he._intersection;return xe&&xe._overlap&&xe._path===ye}T(y,"hasOverlap");var k=!1,H=!1,j=this.getIntersections(null,function(he){return he.hasOverlap()&&(k=!0)||he.isCrossing()&&(H=!0)}),z=k&&H&&[];if(j=Oe.expand(j),k)for(var G=b(j,function(he){return he.hasOverlap()},z),Q=G.length-1;Q>=0;Q--){var Y=G[Q],re=Y._path,Z=Y._segment,ie=Z.getPrevious(),se=Z.getNext();y(ie,re)&&y(se,re)&&(Z.remove(),ie._handleOut._set(0,0),se._handleIn._set(0,0),ie!==Z&&!ie.getCurve().hasLength()&&(se._handleIn.set(ie._handleIn),ie.remove()))}H&&(b(j,k&&function(he){var ye=he.getCurve(),xe=he.getSegment(),be=he._intersection,Te=be._curve,ve=be._segment;if(ye&&Te&&ye._path&&Te._path)return!0;xe&&(xe._intersection=null),ve&&(ve._intersection=null)},z),z&&M(z),B=V(r.each(B,function(he){r.push(this,he._segments)},[])));var ue=B.length,le;return ue>1&&E?(B!==E&&this.setChildren(B),le=this):ue===1&&!E&&(B[0]!==this&&this.setSegments(B[0].removeSegments()),le=this),le||(le=new Me($.NO_INSERT),le.addChildren(B),le=le.reduce(),le.copyAttributes(this),this.replaceWith(le)),le},reorient:function(E,B){var y=this._children;return y&&y.length?this.setChildren(P(this.removeChildren(),function(k){return!!(E?k:k&1)},B)):B!==m&&this.setClockwise(B),this},getInteriorPoint:function(){var E=this.getBounds(),B=E.getCenter(!0);if(!this.contains(B)){for(var y=this.getCurves(),k=B.y,H=[],j=[],z=0,G=y.length;z<G;z++){var Q=y[z].getValues(),Y=Q[1],re=Q[3],Z=Q[5],ie=Q[7];if(k>=e(Y,re,Z,ie)&&k<=t(Y,re,Z,ie))for(var se=de.getMonoCurves(Q),ue=0,le=se.length;ue<le;ue++){var he=se[ue],ye=he[1],xe=he[7];if(ye!==xe&&(k>=ye&&k<=xe||k>=xe&&k<=ye)){var be=k===ye?he[0]:k===xe?he[6]:de.solveCubic(he,1,k,j,0,1)===1?de.getPoint(he,j[0]).x:(he[0]+he[6])/2;H.push(be)}}}H.length>1&&(H.sort(function(Te,ve){return Te-ve}),B.x=(H[0]+H[1])/2)}return B}}});var je=r.extend({_class:"PathFlattener",initialize:function(e,t,n,i,a){var o=[],l=[],u=0,f=1/(n||32),d=e._segments,C=d[0],M;function P(V,E){var B=de.getValues(V,E,a);o.push(B),b(B,V._index,0,1)}T(P,"addCurve");function b(V,E,B,y){if(y-B>f&&!(i&&de.isStraight(V))&&!de.isFlatEnough(V,t||.25)){var k=de.subdivide(V,.5),H=(B+y)/2;b(k[0],E,B,H),b(k[1],E,H,y)}else{var j=V[6]-V[0],z=V[7]-V[1],G=Math.sqrt(j*j+z*z);G>0&&(u+=G,l.push({offset:u,curve:V,index:E,time:y}))}}T(b,"computeParts");for(var U=1,A=d.length;U<A;U++)M=d[U],P(C,M),C=M;e._closed&&P(M||C,d[0]),this.curves=o,this.parts=l,this.length=u,this.index=0},_get:function(e){for(var t=this.parts,n=t.length,i,a=this.index;i=a,!(!a||t[--a].offset<e););for(;i<n;i++){var o=t[i];if(o.offset>=e){this.index=i;var l=t[i-1],u=l&&l.index===o.index?l.time:0,f=l?l.offset:0;return{index:o.index,time:u+(o.time-u)*(e-f)/(o.offset-f)}}}return{index:t[n-1].index,time:1}},drawPart:function(e,t,n){for(var i=this._get(t),a=this._get(n),o=i.index,l=a.index;o<=l;o++){var u=de.getPart(this.curves[o],o===i.index?i.time:0,o===a.index?a.time:1);o===i.index&&e.moveTo(u[0],u[1]),e.bezierCurveTo.apply(e,u.slice(2))}}},r.each(de._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this._get(t);return de[e](this.curves[n.index],n.time)}},{})),Ke=r.extend({initialize:function(e){for(var t=this.points=[],n=e._segments,i=e._closed,a=0,o,l=n.length;a<l;a++){var u=n[a].point;(!o||!o.equals(u))&&t.push(o=u.clone())}i&&(t.unshift(t[t.length-1]),t.push(t[1])),this.closed=i},fit:function(e){var t=this.points,n=t.length,i=null;return n>0&&(i=[new ce(t[0])],n>1&&(this.fitCubic(i,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(e,t,n,i,a,o){var l=this.points;if(i-n===1){var u=l[n],f=l[i],d=u.getDistance(f)/3;this.addCurve(e,[u,u.add(a.normalize(d)),f.add(o.normalize(d)),f]);return}for(var C=this.chordLengthParameterize(n,i),M=Math.max(t,t*t),P,b=!0,U=0;U<=4;U++){var A=this.generateBezier(n,i,C,a,o),V=this.findMaxError(n,i,A,C);if(V.error<t&&b){this.addCurve(e,A);return}if(P=V.index,V.error>=M)break;b=this.reparameterize(n,i,C,A),M=V.error}var E=l[P-1].subtract(l[P+1]);this.fitCubic(e,t,n,P,a,E),this.fitCubic(e,t,P,i,E.negate(),o)},addCurve:function(e,t){var n=e[e.length-1];n.setHandleOut(t[1].subtract(t[0])),e.push(new ce(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,n,i,a){for(var o=1e-12,l=Math.abs,u=this.points,f=u[e],d=u[t],C=[[0,0],[0,0]],M=[0,0],P=0,b=t-e+1;P<b;P++){var U=n[P],A=1-U,V=3*U*A,E=A*A*A,B=V*A,y=V*U,k=U*U*U,H=i.normalize(B),j=a.normalize(y),z=u[e+P].subtract(f.multiply(E+B)).subtract(d.multiply(y+k));C[0][0]+=H.dot(H),C[0][1]+=H.dot(j),C[1][0]=C[0][1],C[1][1]+=j.dot(j),M[0]+=H.dot(z),M[1]+=j.dot(z)}var G=C[0][0]*C[1][1]-C[1][0]*C[0][1],Q,Y;if(l(G)>o){var re=C[0][0]*M[1]-C[1][0]*M[0],Z=M[0]*C[1][1]-M[1]*C[0][1];Q=Z/G,Y=re/G}else{var ie=C[0][0]+C[0][1],se=C[1][0]+C[1][1];Q=Y=l(ie)>o?M[0]/ie:l(se)>o?M[1]/se:0}var ue=d.getDistance(f),le=o*ue,he,ye;if(Q<le||Y<le)Q=Y=ue/3;else{var xe=d.subtract(f);he=i.normalize(Q),ye=a.normalize(Y),he.dot(xe)-ye.dot(xe)>ue*ue&&(Q=Y=ue/3,he=ye=null)}return[f,f.add(he||i.normalize(Q)),d.add(ye||a.normalize(Y)),d]},reparameterize:function(e,t,n,i){for(var a=e;a<=t;a++)n[a-e]=this.findRoot(i,this.points[a],n[a-e]);for(var a=1,o=n.length;a<o;a++)if(n[a]<=n[a-1])return!1;return!0},findRoot:function(e,t,n){for(var i=[],a=[],o=0;o<=2;o++)i[o]=e[o+1].subtract(e[o]).multiply(3);for(var o=0;o<=1;o++)a[o]=i[o+1].subtract(i[o]).multiply(2);var l=this.evaluate(3,e,n),u=this.evaluate(2,i,n),f=this.evaluate(1,a,n),d=l.subtract(t),C=u.dot(u)+d.dot(f);return I.isMachineZero(C)?n:n-d.dot(u)/C},evaluate:function(e,t,n){for(var i=t.slice(),a=1;a<=e;a++)for(var o=0;o<=e-a;o++)i[o]=i[o].multiply(1-n).add(i[o+1].multiply(n));return i[0]},chordLengthParameterize:function(e,t){for(var n=[0],i=e+1;i<=t;i++)n[i-e]=n[i-e-1]+this.points[i].getDistance(this.points[i-1]);for(var i=1,a=t-e;i<=a;i++)n[i]/=n[a];return n},findMaxError:function(e,t,n,i){for(var a=Math.floor((t-e+1)/2),o=0,l=e+1;l<t;l++){var u=this.evaluate(3,n,i[l-e]),f=u.subtract(this.points[l]),d=f.x*f.x+f.y*f.y;d>=o&&(o=d,a=l)}return{error:o,index:a}}}),qe=$.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:T(function(t){this._content="",this._lines=[];var n=t&&r.isPlainObject(t)&&t.x===m&&t.y===m;this._initialize(n&&t,!n&&s.read(arguments))},"TextItem"),_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),ht=qe.extend({_class:"PointText",initialize:T(function(){qe.apply(this,arguments)},"PointText"),getPoint:function(){var e=this._matrix.getTranslation();return new w(e.x,e.y,this,"setPoint")},setPoint:function(){var e=s.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(!!this._content){this._setStyles(e,t,n);var i=this._lines,a=this._style,o=a.hasFill(),l=a.hasStroke(),u=a.getLeading(),f=e.shadowColor;e.font=a.getFontStyle(),e.textAlign=a.getJustification();for(var d=0,C=i.length;d<C;d++){e.shadowColor=f;var M=i[d];o&&(e.fillText(M,0,0),e.shadowColor="rgba(0,0,0,0)"),l&&e.strokeText(M,0,0),e.translate(0,u)}}},_getBounds:function(e,t){var n=this._style,i=this._lines,a=i.length,o=n.getJustification(),l=n.getLeading(),u=this.getView().getTextWidth(n.getFontStyle(),i),f=0;o!=="left"&&(f-=u/(o==="center"?2:1));var d=new F(f,a?-.75*l:0,u,a*l);return e?e._transformBounds(d,d):d}}),We=r.extend(new function(){var e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},t={},n={transparent:[0,0,0,0]},i;function a(u){var f=u.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||u.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),d="rgb",C;if(f){var M=f[4]?4:3;C=new Array(M);for(var P=0;P<M;P++){var b=f[P+1];C[P]=parseInt(b.length==1?b+b:b,16)/255}}else if(f=u.match(/^(rgb|hsl)a?\((.*)\)$/)){d=f[1],C=f[2].trim().split(/[,\s]+/g);for(var U=d==="hsl",P=0,A=Math.min(C.length,4);P<A;P++){var V=C[P],b=parseFloat(V);if(U)if(P===0){var E=V.match(/([a-z]*)$/)[1];b*={turn:360,rad:180/Math.PI,grad:.9}[E]||1}else P<3&&(b/=100);else P<3&&(b/=/%$/.test(V)?100:255);C[P]=b}}else{var B=n[u];if(!B)if(D){i||(i=tt.getContext(1,1,{willReadFrequently:!0}),i.globalCompositeOperation="copy"),i.fillStyle="rgba(0,0,0,0)",i.fillStyle=u,i.fillRect(0,0,1,1);var y=i.getImageData(0,0,1,1).data;B=n[u]=[y[0]/255,y[1]/255,y[2]/255]}else B=[0,0,0];C=B.slice()}return[d,C]}T(a,"fromCSS");var o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],l={"rgb-hsb":function(u,f,d){var C=Math.max(u,f,d),M=Math.min(u,f,d),P=C-M,b=P===0?0:(C==u?(f-d)/P+(f<d?6:0):C==f?(d-u)/P+2:(u-f)/P+4)*60;return[b,C===0?0:P/C,C]},"hsb-rgb":function(u,f,d){u=(u/60%6+6)%6;var M=Math.floor(u),C=u-M,M=o[M],P=[d,d*(1-f),d*(1-f*C),d*(1-f*(1-C))];return[P[M[0]],P[M[1]],P[M[2]]]},"rgb-hsl":function(u,f,d){var C=Math.max(u,f,d),M=Math.min(u,f,d),P=C-M,b=P===0,U=b?0:(C==u?(f-d)/P+(f<d?6:0):C==f?(d-u)/P+2:(u-f)/P+4)*60,A=(C+M)/2,V=b?0:A<.5?P/(C+M):P/(2-C-M);return[U,V,A]},"hsl-rgb":function(u,f,d){if(u=(u/360%1+1)%1,f===0)return[d,d,d];for(var C=[u+1/3,u,u-1/3],M=d<.5?d*(1+f):d+f-d*f,P=2*d-M,b=[],U=0;U<3;U++){var A=C[U];A<0&&(A+=1),A>1&&(A-=1),b[U]=6*A<1?P+(M-P)*6*A:2*A<1?M:3*A<2?P+(M-P)*(2/3-A)*6:P}return b},"rgb-gray":function(u,f,d){return[u*.2989+f*.587+d*.114]},"gray-rgb":function(u){return[u,u,u]},"gray-hsb":function(u){return[0,0,u]},"gray-hsl":function(u){return[0,0,u]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return r.each(e,function(u,f){t[f]=[],r.each(u,function(d,C){var M=r.capitalize(d),P=/^(hue|saturation)$/.test(d),b=t[f][C]=f==="gradient"?d==="gradient"?function(U){var A=this._components[0];return U=rt.read(Array.isArray(U)?U:arguments,0,{readNull:!0}),A!==U&&(A&&A._removeOwner(this),U&&U._addOwner(this)),U}:function(){return s.read(arguments,0,{readNull:d==="highlight",clone:!0})}:function(U){return U==null||isNaN(U)?0:+U};this["get"+M]=function(){return this._type===f||P&&/^hs[bl]$/.test(this._type)?this._components[C]:this._convert(f)[C]},this["set"+M]=function(U){this._type!==f&&!(P&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(f),this._properties=e[f],this._type=f),this._components[C]=b.call(this,U),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:T(function u(f){var d=arguments,C=this.__read,M=0,P,b,U,A;Array.isArray(f)&&(d=f,f=d[0]);var V=f!=null&&typeof f;if(V==="string"&&f in e&&(P=f,f=d[1],Array.isArray(f)?(b=f,U=d[2]):(C&&(M=1),d=r.slice(d,1),V=typeof f)),!b){if(A=V==="number"?d:V==="object"&&f.length!=null?f:null,A){P||(P=A.length>=3?"rgb":"gray");var E=e[P].length;U=A[E],C&&(M+=A===arguments?E+(U!=null?1:0):1),A.length>E&&(A=r.slice(A,0,E))}else if(V==="string"){var B=a(f);P=B[0],b=B[1],b.length===4&&(U=b[3],b.length--)}else if(V==="object")if(f.constructor===u){if(P=f._type,b=f._components.slice(),U=f._alpha,P==="gradient")for(var y=1,k=b.length;y<k;y++){var H=b[y];H&&(b[y]=H.clone())}}else if(f.constructor===rt)P="gradient",A=d;else{P="hue"in f?"lightness"in f?"hsl":"hsb":"gradient"in f||"stops"in f||"radial"in f?"gradient":"gray"in f?"gray":"rgb";var j=e[P],z=t[P];this._components=b=[];for(var y=0,k=j.length;y<k;y++){var G=f[j[y]];G==null&&!y&&P==="gradient"&&"stops"in f&&(G={stops:f.stops,radial:f.radial}),G=z[y].call(this,G),G!=null&&(b[y]=G)}U=f.alpha}C&&P&&(M=1)}if(this._type=P||"rgb",!b){this._components=b=[];for(var z=t[this._type],y=0,k=z.length;y<k;y++){var G=z[y].call(this,A&&A[y]);G!=null&&(b[y]=G)}}return this._components=b,this._properties=e[this._type],this._alpha=U,C&&(this.__read=M),this},"Color"),set:"#initialize",_serialize:function(u,f){var d=this.getComponents();return r.serialize(/^(gray|rgb)$/.test(this._type)?d:[this._type].concat(d),u,!0,f)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(u){var f;return this._type===u?this._components.slice():(f=l[this._type+"-"+u])?f.apply(this,this._components):l["rgb-"+u].apply(this,l[this._type+"-rgb"].apply(this,this._components))},convert:function(u){return new We(u,this._convert(u),this._alpha)},getType:function(){return this._type},setType:function(u){this._components=this._convert(u),this._properties=e[u],this._type=u},getComponents:function(){var u=this._components.slice();return this._alpha!=null&&u.push(this._alpha),u},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(u){this._alpha=u==null?null:Math.min(Math.max(u,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(u){var f=r.isPlainValue(u,!0)?We.read(arguments):u;return f===this||f&&this._class===f._class&&this._type===f._type&&this.getAlpha()===f.getAlpha()&&r.equals(this._components,f._components)||!1},toString:function(){for(var u=this._properties,f=[],d=this._type==="gradient",C=x.instance,M=0,P=u.length;M<P;M++){var b=this._components[M];b!=null&&f.push(u[M]+": "+(d?b:C.number(b)))}return this._alpha!=null&&f.push("alpha: "+C.number(this._alpha)),"{ "+f.join(", ")+" }"},toCSS:function(u){var f=this._convert("rgb"),d=u||this._alpha==null?1:this._alpha;function C(M){return Math.round((M<0?0:M>1?1:M)*255)}return T(C,"convert"),f=[C(f[0]),C(f[1]),C(f[2])],d<1&&f.push(d<0?0:d),u?"#"+((1<<24)+(f[0]<<16)+(f[1]<<8)+f[2]).toString(16).slice(1):(f.length==4?"rgba(":"rgb(")+f.join(",")+")"},toCanvasStyle:function(u,f){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var d=this._components,C=d[0],M=C._stops,P=d[1],b=d[2],U=d[3],A=f&&f.inverted(),V;if(A&&(P=A._transformPoint(P),b=A._transformPoint(b),U&&(U=A._transformPoint(U))),C._radial){var E=b.getDistance(P);if(U){var B=U.subtract(P);B.getLength()>E&&(U=P.add(B.normalize(E-.1)))}var y=U||P;V=u.createRadialGradient(y.x,y.y,0,P.x,P.y,E)}else V=u.createLinearGradient(P.x,P.y,b.x,b.y);for(var k=0,H=M.length;k<H;k++){var j=M[k],z=j._offset;V.addColorStop(z==null?k/(H-1):z,j._color.toCanvasStyle())}return this._canvasStyle=V},transform:function(u){if(this._type==="gradient"){for(var f=this._components,d=1,C=f.length;d<C;d++){var M=f[d];u._transformPoint(M,M,!0)}this._changed()}},statics:{_types:e,random:function(){var u=Math.random;return new We(u(),u(),u())},_setOwner:function(u,f,d){return u&&(u._owner&&f&&u._owner!==f&&(u=u.clone()),!u._owner^!f&&(u._owner=f||null,u._setter=d||null)),u}}})},new function(){var e={add:function(t,n){return t+n},subtract:function(t,n){return t-n},multiply:function(t,n){return t*n},divide:function(t,n){return t/n}};return r.each(e,function(t,n){this[n]=function(i){i=We.read(arguments);for(var a=this._type,o=this._components,l=i._convert(a),u=0,f=o.length;u<f;u++)l[u]=t(o[u],l[u]);return new We(a,l,this._alpha!=null?t(this._alpha,i.getAlpha()):null)}},{})}),rt=r.extend({_class:"Gradient",initialize:T(function(t,n){this._id=S.get(),t&&r.isPlainObject(t)&&(this.set(t),t=n=null),this._stops==null&&this.setStops(t||["white","black"]),this._radial==null&&this.setRadial(typeof n=="string"&&n==="radial"||n||!1)},"Gradient"),_serialize:function(e,t){return t.add(this,function(){return r.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;t!=-1&&(this._owners.splice(t,1),this._owners.length||(this._owners=m))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new rt(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var n=0,i=t.length;n<i;n++)t[n]._owner=m;t=this._stops=ot.readList(e,0,{clone:!0});for(var n=0,i=t.length;n<i;n++)t[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,i=t.length;if(i===n.length){for(var a=0;a<i;a++)if(!t[a].equals(n[a]))return!1;return!0}}return!1}}),ot=r.extend({_class:"GradientStop",initialize:T(function(t,n){var i=t,a=n;typeof t=="object"&&n===m&&(Array.isArray(t)&&typeof t[0]!="number"?(i=t[0],a=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(i=t.color,a=t.offset||t.rampPoint||0)),this.setColor(i),this.setOffset(a)},"GradientStop"),clone:function(){return new ot(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,i=this._offset;return r.serialize(i==null?[n]:[n,i],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){We._setOwner(this._color,null),this._color=We._setOwner(We.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),$t=r.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new s,selectedColor:null},t=r.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=r.set({},t,{fillColor:new We}),i={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},a={beans:!0},o={_class:"Style",beans:!0,initialize:T(function(u,f,d){this._values={},this._owner=f,this._project=f&&f._project||d||Ve.project,this._defaults=!f||f instanceof q?t:f instanceof qe?n:e,u&&this.set(u)},"Style")};return r.each(t,function(l,u){var f=/Color$/.test(u),d=u==="shadowOffset",C=r.capitalize(u),M=i[u],P="set"+C,b="get"+C;o[P]=function(U){var A=this._owner,V=A&&A._children,E=V&&V.length>0&&!(A instanceof Me);if(E)for(var B=0,y=V.length;B<y;B++)V[B]._style[P](U);if((u==="selectedColor"||!E)&&u in this._defaults){var k=this._values[u];k!==U&&(f&&(k&&(We._setOwner(k,null),k._canvasStyle=null),U&&U.constructor===We&&(U=We._setOwner(U,A,E&&P))),this._values[u]=U,A&&A._changed(M||129))}},o[b]=function(U){var A=this._owner,V=A&&A._children,E=V&&V.length>0&&!(A instanceof Me),B;if(E&&!U)for(var y=0,k=V.length;y<k;y++){var H=V[y]._style[b]();if(!y)B=H;else if(!r.equals(B,H))return m}else if(u in this._defaults){var B=this._values[u];if(B===m)B=this._defaults[u],B&&B.clone&&(B=B.clone());else{var j=f?We:d?s:null;j&&!(B&&B.constructor===j)&&(this._values[u]=B=j.read([B],0,{readNull:!0,clone:!0}))}}return B&&f&&(B=We._setOwner(B,A,E&&P)),B},a[b]=function(U){return this._style[b](U)},a[P]=function(U){this._style[P](U)}}),r.each({Font:"FontFamily",WindingRule:"FillRule"},function(l,u){var f="get"+u,d="set"+u;o[f]=a[f]="#get"+l,o[d]=a[d]="#set"+l}),$.inject(a),o},{set:function(e){var t=e instanceof $t,n=t?e._values:e;if(n){for(var i in n)if(i in this._defaults){var a=n[i];this[i]=a&&t&&a.clone?a.clone():a}}},equals:function(e){function t(n,i,a){var o=n._values,l=i._values,u=i._defaults;for(var f in o){var d=o[f],C=l[f];if(!(a&&f in l)&&!r.equals(d,C===m?u[f]:C))return!1}return!0}return T(t,"compare"),e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;e=this.getFillColor(),e&&(e._canvasStyle=null),e=this.getStrokeColor(),e&&(e._canvasStyle=null),e=this.getShadowColor(),e&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:T(function e(){var t=e.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),t!=null?t:n*1.2},"getLeading")}),Qe=new function(){function e(t,n,i,a){for(var o=["","webkit","moz","Moz","ms","o"],l=n[0].toUpperCase()+n.substring(1),u=0;u<6;u++){var f=o[u],d=f?f+l:n;if(d in t){if(i)t[d]=a;else return t[d];break}}}return T(e,"handlePrefix"),{getStyles:function(t){var n=t&&t.nodeType!==9?t.ownerDocument:t,i=n&&n.defaultView;return i&&i.getComputedStyle(t,"")},getBounds:function(t,n){var i=t.ownerDocument,a=i.body,o=i.documentElement,l;try{l=t.getBoundingClientRect()}catch{l={left:0,top:0,width:0,height:0}}var u=l.left-(o.clientLeft||a.clientLeft||0),f=l.top-(o.clientTop||a.clientTop||0);if(!n){var d=i.defaultView;u+=d.pageXOffset||o.scrollLeft||a.scrollLeft,f+=d.pageYOffset||o.scrollTop||a.scrollTop}return new F(u,f,l.width,l.height)},getViewportBounds:function(t){var n=t.ownerDocument,i=n.defaultView,a=n.documentElement;return new F(0,0,i.innerWidth||a.clientWidth,i.innerHeight||a.clientHeight)},getOffset:function(t,n){return Qe.getBounds(t,n).getPoint()},getSize:function(t){return Qe.getBounds(t,!0).getSize()},isInvisible:function(t){return Qe.getSize(t).equals(new _(0,0))},isInView:function(t){return!Qe.isInvisible(t)&&Qe.getViewportBounds(t).intersects(Qe.getBounds(t,!0))},isInserted:function(t){return v.body.contains(t)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,i){if(typeof n=="object")for(var a in n)e(t,a,!0,n[a]);else e(t,n,!0,i)}}},$e={add:function(e,t){if(e)for(var n in t)for(var i=t[n],a=n.split(/[\s,]+/g),o=0,l=a.length;o<l;o++){var u=a[o],f=e===v&&(u==="touchstart"||u==="touchmove")?{passive:!1}:!1;e.addEventListener(u,i,f)}},remove:function(e,t){if(e)for(var n in t)for(var i=t[n],a=n.split(/[\s,]+/g),o=0,l=a.length;o<l;o++)e.removeEventListener(a[o],i,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new s(t.pageX||t.clientX+v.documentElement.scrollLeft,t.pageY||t.clientY+v.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return $e.getPoint(e).subtract(Qe.getOffset(t||$e.getTarget(e)))}};$e.requestAnimationFrame=new function(){var e=Qe.getPrefixed(D,"requestAnimationFrame"),t=!1,n=[],i;function a(){var o=n;n=[];for(var l=0,u=o.length;l<u;l++)o[l]();t=e&&n.length,t&&e(a)}return T(a,"handleCallbacks"),function(o){n.push(o),e?t||(e(a),t=!0):i||(i=setInterval(a,1e3/60))}};var Fe=r.extend(c,{_class:"View",initialize:T(function e(t,n){function i(M){return n[M]||parseInt(n.getAttribute(M),10)}T(i,"getSize");function a(){var M=Qe.getSize(n);return M.isNaN()||M.isZero()?new _(i("width"),i("height")):M}T(a,"getCanvasSize");var o;if(D&&n){this._id=n.getAttribute("id"),this._id==null&&n.setAttribute("id",this._id="paper-view-"+e._id++),$e.add(n,this._viewEvents);var l="none";if(Qe.setPrefixed(n.style,{userDrag:l,userSelect:l,touchCallout:l,contentZooming:l,tapHighlightColor:"rgba(0,0,0,0)"}),g.hasAttribute(n,"resize")){var u=this;$e.add(D,this._windowEvents={resize:function(){u.setViewSize(a())}})}if(o=a(),g.hasAttribute(n,"stats")&&typeof Stats<"u"){this._stats=new Stats;var f=this._stats.domElement,d=f.style,C=Qe.getOffset(n);d.position="absolute",d.left=C.x+"px",d.top=C.y+"px",v.body.appendChild(f)}}else o=new _(n),n=null;this._project=t,this._scope=t._scope,this._element=n,this._pixelRatio||(this._pixelRatio=D&&D.devicePixelRatio||1),this._setElementSize(o.width,o.height),this._viewSize=o,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new X)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Ve.agent.node,this._needsUpdate=!1},"View"),remove:function(){if(!this._project)return!1;Fe._focused===this&&(Fe._focused=null),Fe._views.splice(Fe._views.indexOf(this),1),delete Fe._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),$e.remove(this._element,this._viewEvents),$e.remove(D,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:r.each($._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;$e.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!Qe.getPrefixed(v,"hidden")||g.getAttribute(t,"keepalive")==="true")&&Qe.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Ve=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new r({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete n[e._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit("frame",new r(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=m},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var e=this._viewSize;return new N(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=_.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new F(new s,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Qe.isInView(this._element)},isInserted:function(){return Qe.isInserted(this._element)},getPixelSize:function(e){var t=this._element,n;if(t){var i=t.parentNode,a=v.createElement("div");a.style.fontSize=e,i.appendChild(a),n=parseFloat(Qe.getStyles(a).fontSize),i.removeChild(a)}else n=parseFloat(n);return n},getTextWidth:function(e,t){return 0}},r.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var n=arguments,i=(t?r:s).read(n),a=s.read(n,0,{readNull:!0});return this.transform(new X()[e](i,a||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new X;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=s.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform(new X().scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();t!=null&&e!=null&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new w(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=s.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(s.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(s.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(s.read(arguments))},getEventPoint:function(e){return this.viewToProject($e.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){v&&typeof t=="string"&&(t=v.getElementById(t));var n=D?at:Fe;return new n(e,t)}}},new function(){if(!D)return;var e,t,n=!1,i=!1;function a(Z){var ie=$e.getTarget(Z);return ie.getAttribute&&Fe._viewsById[ie.getAttribute("id")]}T(a,"getView");function o(){var Z=Fe._focused;if(!Z||!Z.isVisible()){for(var ie=0,se=Fe._views.length;ie<se;ie++)if((Z=Fe._views[ie]).isVisible()){Fe._focused=t=Z;break}}}T(o,"updateFocus");function l(Z,ie,se){Z._handleMouseEvent("mousemove",ie,se)}T(l,"handleMouseMove");var u=D.navigator,f,d,C;u.pointerEnabled||u.msPointerEnabled?(f="pointerdown MSPointerDown",d="pointermove MSPointerMove",C="pointerup pointercancel MSPointerUp MSPointerCancel"):(f="touchstart",d="touchmove",C="touchend touchcancel","ontouchstart"in D&&u.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(f+=" mousedown",d+=" mousemove",C+=" mouseup"));var M={},P={mouseout:function(Z){var ie=Fe._focused,se=$e.getRelatedTarget(Z);if(ie&&(!se||se.nodeName==="HTML")){var ue=$e.getOffset(Z,ie._element),le=ue.x,he=Math.abs,ye=he(le),xe=1<<25,be=ye-xe;ue.x=he(be)<ye?be*(le<0?-1:1):le,l(ie,Z,ie.viewToProject(ue))}},scroll:o};M[f]=function(Z){var ie=Fe._focused=a(Z);n||(n=!0,ie._handleMouseEvent("mousedown",Z))},P[d]=function(Z){var ie=Fe._focused;if(!i){var se=a(Z);se?ie!==se&&(ie&&l(ie,Z),e||(e=ie),ie=Fe._focused=t=se):t&&t===ie&&(e&&!e.isInserted()&&(e=null),ie=Fe._focused=e,e=null,o())}ie&&l(ie,Z)},P[f]=function(){i=!0},P[C]=function(Z){var ie=Fe._focused;ie&&n&&ie._handleMouseEvent("mouseup",Z),i=n=!1},$e.add(v,P),$e.add(D,{load:o});var b=!1,U=!1,A={doubleclick:"click",mousedrag:"mousemove"},V=!1,E,B,y,k,H,j,z,G;function Q(Z,ie,se,ue,le,he,ye){var xe=!1,be;function Te(ve,_e){if(ve.responds(_e)){if(be||(be=new qn(_e,ue,le,ie||ve,he?le.subtract(he):null)),ve.emit(_e,be)&&(b=!0,be.prevented&&(U=!0),be.stopped))return xe=!0}else{var Pe=A[_e];if(Pe)return Te(ve,Pe)}}for(T(Te,"emit");Z&&Z!==ye&&!Te(Z,se);)Z=Z._parent;return xe}T(Q,"emitMouseEvent");function Y(Z,ie,se,ue,le,he){return Z._project.removeOn(se),U=b=!1,H&&Q(H,null,se,ue,le,he)||ie&&ie!==H&&!ie.isDescendant(H)&&Q(ie,null,se==="mousedrag"?"mousemove":se,ue,le,he,H)||Q(Z,H||ie||Z,se,ue,le,he)}T(Y,"emitMouseEvents");var re={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:M,_handleMouseEvent:function(Z,ie,se){var ue=this._itemEvents,le=ue.native[Z],he=Z==="mousemove",ye=this._scope.tool,xe=this;function be(Re){return ue.virtual[Re]||xe.responds(Re)||ye&&ye.responds(Re)}T(be,"responds"),he&&n&&be("mousedrag")&&(Z="mousedrag"),se||(se=this.getEventPoint(ie));var Te=this.getBounds().contains(se),ve=le&&Te&&xe._project.hitTest(se,{tolerance:0,fill:!0,stroke:!0}),_e=ve&&ve.item||null,Pe=!1,Ee={};if(Ee[Z.substr(5)]=!0,le&&_e!==k&&(k&&Q(k,null,"mouseleave",ie,se),_e&&Q(_e,null,"mouseenter",ie,se),k=_e),V^Te&&(Q(this,null,Te?"mouseenter":"mouseleave",ie,se),Pe=!0),(Te||Ee.drag)&&!se.equals(B)&&(Y(this,_e,he?Z:"mousemove",ie,se,B),Pe=!0),V=Te,Ee.down&&Te||Ee.up&&E){if(Y(this,_e,Z,ie,se,E),Ee.down){if(G=_e===j&&Date.now()-z<300,y=j=_e,!U&&_e){for(var Ie=_e;Ie&&!Ie.responds("mousedrag");)Ie=Ie._parent;Ie&&(H=_e)}E=se}else Ee.up&&(!U&&_e===y&&(z=Date.now(),Y(this,_e,G?"doubleclick":"click",ie,se,E),G=!1),y=H=null);V=!1,Pe=!0}B=se,Pe&&ye&&(b=ye._handleMouseEvent(Z,ie,se,Ee)||b),ie.cancelable!==!1&&(b&&!Ee.move||Ee.down&&be("mouseup"))&&ie.preventDefault()},_handleKeyEvent:function(Z,ie,se,ue){var le=this._scope,he=le.tool,ye;function xe(be){be.responds(Z)&&(Ve=le,be.emit(Z,ye=ye||new Wt(Z,ie,se,ue)))}T(xe,"emit"),this.isVisible()&&(xe(this),he&&he.responds(Z)&&xe(he))},_countItemEvent:function(Z,ie){var se=this._itemEvents,ue=se.native,le=se.virtual;for(var he in re)ue[he]=(ue[he]||0)+(re[he][Z]||0)*ie;le[Z]=(le[Z]||0)+ie},statics:{updateFocus:o,_resetState:function(){n=i=b=V=!1,e=t=E=B=y=k=H=j=z=G=null}}}}),at=Fe.extend({_class:"CanvasView",initialize:T(function(t,n){if(!(n instanceof D.HTMLCanvasElement)){var i=_.read(arguments,1);if(i.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+r.slice(arguments,1));n=tt.getCanvas(i)}var a=this._context=n.getContext("2d");if(a.save(),this._pixelRatio=1,!/^off|false$/.test(g.getAttribute(n,"hidpi"))){var o=D.devicePixelRatio||1,l=Qe.getPrefixed(a,"backingStorePixelRatio")||1;this._pixelRatio=o/l}Fe.call(this,t,n),this._needsUpdate=!0},"CanvasView"),remove:T(function e(){return this._context.restore(),e.base.call(this)},"remove"),_setElementSize:T(function e(t,n){var i=this._pixelRatio;if(e.base.call(this,t*i,n*i),i!==1){var a=this._element,o=this._context;if(!g.hasAttribute(a,"resize")){var l=a.style;l.width=t+"px",l.height=n+"px"}o.restore(),o.save(),o.scale(i,i)}},"_setElementSize"),getContext:function(){return this._context},getPixelSize:T(function e(t){var n=Ve.agent,i;if(n&&n.firefox)i=e.base.call(this,t);else{var a=this._context,o=a.font;a.font=t+" serif",i=parseFloat(a.font),a.font=o}return i},"getPixelSize"),getTextWidth:function(e,t){var n=this._context,i=n.font,a=0;n.font=e;for(var o=0,l=t.length;o<l;o++)a=Math.max(a,n.measureText(t[o]).width);return n.font=i,a},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Ct=r.extend({_class:"Event",initialize:T(function(t){this.event=t,this.type=t&&t.type},"Event"),prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return qt.modifiers}}),Wt=Ct.extend({_class:"KeyEvent",initialize:T(function(t,n,i,a){this.type=t,this.event=n,this.key=i,this.character=a},"KeyEvent"),toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),qt=new function(){var e={"	":"tab"," ":"space","\b":"backspace","\x7F":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},t={tab:"	",space:" ",enter:"\r"},n={},i={},a,o,l=new r({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var d=Ve&&Ve.agent;return d&&d.mac?this.meta:this.control}}});function u(d){var C=d.key||d.keyIdentifier;return C=/^U\+/.test(C)?String.fromCharCode(parseInt(C.substr(2),16)):/^Arrow[A-Z]/.test(C)?C.substr(5):C==="Unidentified"||C===m?String.fromCharCode(d.keyCode):C,e[C]||(C.length>1?r.hyphenate(C):C.toLowerCase())}T(u,"getKey");function f(d,C,M,P){var b=Fe._focused,U;if(n[C]=d,d?i[C]=M:delete i[C],C.length>1&&(U=r.camelize(C))in l){l[U]=d;var A=Ve&&Ve.agent;if(U==="meta"&&A&&A.mac)if(d)a={};else{for(var V in a)V in i&&f(!1,V,a[V],P);a=null}}else d&&a&&(a[C]=M);b&&b._handleKeyEvent(d?"keydown":"keyup",P,C,M)}return T(f,"handleKey"),$e.add(v,{keydown:function(d){var C=u(d),M=Ve&&Ve.agent;C.length>1||M&&M.chrome&&(d.altKey||M.mac&&d.metaKey||!M.mac&&d.ctrlKey)?f(!0,C,t[C]||(C.length>1?"":C),d):o=C},keypress:function(d){if(o){var C=u(d),M=d.charCode,P=M>=32?String.fromCharCode(M):C.length>1?"":C;C!==o&&(C=P.toLowerCase()),f(!0,C,P,d),o=null}},keyup:function(d){var C=u(d);C in i&&f(!1,C,i[C],d)}}),$e.add(D,{blur:function(d){for(var C in i)f(!1,C,i[C],d)}}),{modifiers:l,isDown:function(d){return!!n[d]}}},qn=Ct.extend({_class:"MouseEvent",initialize:T(function(t,n,i,a,o){this.type=t,this.event=n,this.point=i,this.target=a,this.delta=o},"MouseEvent"),toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Gn=Ct.extend({_class:"ToolEvent",_item:null,initialize:T(function(t,n,i){this.tool=t,this.type=n,this.event=i},"ToolEvent"),_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Xn=h.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:T(function(t){h.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},"Tool"),getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,e!=null&&this._maxDistance!=null&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,this._minDistance!=null&&e!=null&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,i){Ve=this._scope,i.drag&&!this.responds(e)&&(e="mousemove");var a=i.move||i.drag,o=this.responds(e),l=this.minDistance,u=this.maxDistance,f=!1,d=this;function C(P,b){var U=n,A=a?d._point:d._downPoint||U;if(a){if(d._moveCount>=0&&U.equals(A))return!1;if(A&&(P!=null||b!=null)){var V=U.subtract(A),E=V.getLength();if(E<(P||0))return!1;b&&(U=A.add(V.normalize(Math.min(E,b))))}d._moveCount++}return d._point=U,d._lastPoint=A||U,i.down&&(d._moveCount=-1,d._downPoint=U,d._downCount++),!0}T(C,"update");function M(){o&&(f=d.emit(e,new Gn(d,e,t))||f)}if(T(M,"emit"),i.down)C(),M();else if(i.up)C(null,u),M();else if(o)for(;C(l,u);)M();return f}}),vn=r.extend(c,{_class:"Tween",statics:{easings:new r({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+2*(2-e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:T(function e(t,n,i,a,o,l){this.object=t;var u=typeof o,f=u==="function";this.type=f?u:u==="string"?o:"linear",this.easing=f?o:e.easings[this.type],this.duration=a,this.running=!1,this._then=null,this._startTime=null;var d=n||i;this._keys=d?Object.keys(d):[],this._parsedKeys=this._parseKeys(this._keys),this._from=d&&this._getState(n),this._to=d&&this._getState(i),l!==!1&&this.start()},"Tween"),then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),n=this._keys,i=T(function(C){return typeof C=="function"?C(t,e):C},"getValue"),a=0,o=n&&n.length;a<o;a++){var l=n[a],u=i(this._from[l]),f=i(this._to[l]),d=u&&f&&u.__add&&f.__add?f.__subtract(u).__multiply(t).__add(u):(f-u)*t+u;this._setProperty(this._parsedKeys[l],d)}this.responds("update")&&this.emit("update",new r({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,n=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(n)},_getState:function(e){for(var t=this._keys,n={},i=0,a=t.length;i<a;i++){var o=t[i],l=this._parsedKeys[o],u=this._getProperty(l),f;if(e){var d=this._resolveValue(u,e[o]);this._setProperty(l,d),f=this._getProperty(l),f=f&&f.clone?f.clone():f,this._setProperty(l,u)}else f=u&&u.clone?u.clone():u;n[o]=f}return n},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&t.length===2){var n=t[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(e,n[0],t[1]):t}else if(typeof t=="string"){var i=t.match(/^[+\-*/]=(.*)/);if(i){var a=JSON.parse(i[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],a)}}}return t},_calculate:function(e,t,n){return Ve.PaperScript.calculateBinary(e,t,n)},_parseKeys:function(e){for(var t={},n=0,i=e.length;n<i;n++){var a=e[n],o=a.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[a]=o.split("/")}return t},_getProperty:function(e,t){for(var n=this.object,i=0,a=e.length-(t||0);i<a&&n;i++)n=n[e[i]];return n},_setProperty:function(e,t){var n=this._getProperty(e,1);n&&(n[e[e.length-1]]=t)}}),Zn={request:function(e){var t=new p.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,r.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var n=t.status;n===0||n===200?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var n=t.status,i='Could not load "'+e.url+'" (Status: '+n+")";if(e.onError)e.onError(i,n);else throw new Error(i)},t.send(null)}},tt=r.exports.CanvasProvider={canvases:[],getCanvas:function(e,t,n){if(!D)return null;var i,a=!0;typeof e=="object"&&(t=e.height,e=e.width),this.canvases.length?i=this.canvases.pop():(i=v.createElement("canvas"),a=!1);var o=i.getContext("2d",n||{});if(!o)throw new Error("Canvas "+i+" is unable to provide a 2D context.");return i.width===e&&i.height===t?a&&o.clearRect(0,0,e+1,t+1):(i.width=e,i.height=t),o.save(),i},getContext:function(e,t,n){var i=this.getCanvas(e,t,n);return i?i.getContext("2d",n||{}):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},Gt=new function(){var e=Math.min,t=Math.max,n=Math.abs,i,a,o,l,u,f,d,C,M,P,b;function U(H,j,z){return .2989*H+.587*j+.114*z}T(U,"getLum");function A(H,j,z,Y){var Q=Y-U(H,j,z);M=H+Q,P=j+Q,b=z+Q;var Y=U(M,P,b),re=e(M,P,b),Z=t(M,P,b);if(re<0){var ie=Y-re;M=Y+(M-Y)*Y/ie,P=Y+(P-Y)*Y/ie,b=Y+(b-Y)*Y/ie}if(Z>255){var se=255-Y,ue=Z-Y;M=Y+(M-Y)*se/ue,P=Y+(P-Y)*se/ue,b=Y+(b-Y)*se/ue}}T(A,"setLum");function V(H,j,z){return t(H,j,z)-e(H,j,z)}T(V,"getSat");function E(H,j,z,G){var Q=[H,j,z],Y=t(H,j,z),re=e(H,j,z),Z;re=re===H?0:re===j?1:2,Y=Y===H?0:Y===j?1:2,Z=e(re,Y)===0?t(re,Y)===1?2:1:0,Q[Y]>Q[re]?(Q[Z]=(Q[Z]-Q[re])*G/(Q[Y]-Q[re]),Q[Y]=G):Q[Z]=Q[Y]=0,Q[re]=0,M=Q[0],P=Q[1],b=Q[2]}T(E,"setSat");var B={multiply:function(){M=u*i/255,P=f*a/255,b=d*o/255},screen:function(){M=u+i-u*i/255,P=f+a-f*a/255,b=d+o-d*o/255},overlay:function(){M=u<128?2*u*i/255:255-2*(255-u)*(255-i)/255,P=f<128?2*f*a/255:255-2*(255-f)*(255-a)/255,b=d<128?2*d*o/255:255-2*(255-d)*(255-o)/255},"soft-light":function(){var H=i*u/255;M=H+u*(255-(255-u)*(255-i)/255-H)/255,H=a*f/255,P=H+f*(255-(255-f)*(255-a)/255-H)/255,H=o*d/255,b=H+d*(255-(255-d)*(255-o)/255-H)/255},"hard-light":function(){M=i<128?2*i*u/255:255-2*(255-i)*(255-u)/255,P=a<128?2*a*f/255:255-2*(255-a)*(255-f)/255,b=o<128?2*o*d/255:255-2*(255-o)*(255-d)/255},"color-dodge":function(){M=u===0?0:i===255?255:e(255,255*u/(255-i)),P=f===0?0:a===255?255:e(255,255*f/(255-a)),b=d===0?0:o===255?255:e(255,255*d/(255-o))},"color-burn":function(){M=u===255?255:i===0?0:t(0,255-(255-u)*255/i),P=f===255?255:a===0?0:t(0,255-(255-f)*255/a),b=d===255?255:o===0?0:t(0,255-(255-d)*255/o)},darken:function(){M=u<i?u:i,P=f<a?f:a,b=d<o?d:o},lighten:function(){M=u>i?u:i,P=f>a?f:a,b=d>o?d:o},difference:function(){M=u-i,M<0&&(M=-M),P=f-a,P<0&&(P=-P),b=d-o,b<0&&(b=-b)},exclusion:function(){M=u+i*(255-u-u)/255,P=f+a*(255-f-f)/255,b=d+o*(255-d-d)/255},hue:function(){E(i,a,o,V(u,f,d)),A(M,P,b,U(u,f,d))},saturation:function(){E(u,f,d,V(i,a,o)),A(M,P,b,U(u,f,d))},luminosity:function(){A(u,f,d,U(i,a,o))},color:function(){A(i,a,o,U(u,f,d))},add:function(){M=e(u+i,255),P=e(f+a,255),b=e(d+o,255)},subtract:function(){M=t(u-i,0),P=t(f-a,0),b=t(d-o,0)},average:function(){M=(u+i)/2,P=(f+a)/2,b=(d+o)/2},negation:function(){M=255-n(255-i-u),P=255-n(255-a-f),b=255-n(255-o-d)}},y=this.nativeModes=r.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(H){this[H]=!0},{}),k=tt.getContext(1,1,{willReadFrequently:!0});k&&(r.each(B,function(H,j){var z=j==="darken",G=!1;k.save();try{k.fillStyle=z?"#300":"#a00",k.fillRect(0,0,1,1),k.globalCompositeOperation=j,k.globalCompositeOperation===j&&(k.fillStyle=z?"#a00":"#300",k.fillRect(0,0,1,1),G=k.getImageData(0,0,1,1).data[0]!==z?170:51)}catch{}k.restore(),y[j]=G}),tt.release(k)),this.process=function(H,j,z,G,Q){var Y=j.canvas,re=H==="normal";if(re||y[H])z.save(),z.setTransform(1,0,0,1,0,0),z.globalAlpha=G,re||(z.globalCompositeOperation=H),z.drawImage(Y,Q.x,Q.y),z.restore();else{var Z=B[H];if(!Z)return;for(var ie=z.getImageData(Q.x,Q.y,Y.width,Y.height),se=ie.data,ue=j.getImageData(0,0,Y.width,Y.height).data,le=0,he=se.length;le<he;le+=4){i=ue[le],u=se[le],a=ue[le+1],f=se[le+1],o=ue[le+2],d=se[le+2],l=ue[le+3],C=se[le+3],Z();var ye=l*G/255,xe=1-ye;se[le]=ye*M+xe*u,se[le+1]=ye*P+xe*f,se[le+2]=ye*b+xe*d,se[le+3]=l*G+xe*C}z.putImageData(ie,Q.x,Q.y)}}},Je=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",i={href:n,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function a(u,f,d){return l(v.createElementNS(e,u),f,d)}T(a,"create");function o(u,f){var d=i[f],C=d?u.getAttributeNS(d,f):u.getAttribute(f);return C==="null"?null:C}T(o,"get");function l(u,f,d){for(var C in f){var M=f[C],P=i[C];typeof M=="number"&&d&&(M=d.number(M)),P?u.setAttributeNS(P,C,M):u.setAttribute(C,M)}return u}return T(l,"set"),{svg:e,xmlns:t,xlink:n,create:a,get:o,set:l}},Ar=r.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof Se||e instanceof J||e instanceof qe)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var n=r.capitalize(t),i=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:i,fromSVG:i&&r.each(i,function(a,o){this[a]=o},{}),exportFilter:e[3],get:"get"+n,set:"set"+n}},{});new function(){var e;function t(B,y,k){var H=new r,j=B.getTranslation();if(y){var z;B.isInvertible()?(B=B._shiftless(),z=B._inverseTransform(j),j=null):z=new s,H[k?"cx":"x"]=z.x,H[k?"cy":"y"]=z.y}if(!B.isIdentity()){var G=B.decompose();if(G){var Q=[],Y=G.rotation,re=G.scaling,Z=G.skewing;j&&!j.isZero()&&Q.push("translate("+e.point(j)+")"),Y&&Q.push("rotate("+e.number(Y)+")"),(!I.isZero(re.x-1)||!I.isZero(re.y-1))&&Q.push("scale("+e.point(re)+")"),Z.x&&Q.push("skewX("+e.number(Z.x)+")"),Z.y&&Q.push("skewY("+e.number(Z.y)+")"),H.transform=Q.join(" ")}else H.transform="matrix("+B.getValues().join(",")+")"}return H}T(t,"getTransform");function n(B,y){for(var k=t(B._matrix),H=B._children,j=Je.create("g",k,e),z=0,G=H.length;z<G;z++){var Q=H[z],Y=V(Q,y);if(Y)if(Q.isClipMask()){var re=Je.create("clipPath");re.appendChild(Y),U(Q,re,"clip"),Je.set(j,{"clip-path":"url(#"+re.id+")"})}else j.appendChild(Y)}return j}T(n,"exportGroup");function i(B,y){var k=t(B._matrix,!0),H=B.getSize(),j=B.getImage();return k.x-=H.width/2,k.y-=H.height/2,k.width=H.width,k.height=H.height,k.href=y.embedImages==!1&&j&&j.src||B.toDataURL(),Je.create("image",k,e)}T(i,"exportRaster");function a(B,y){var k=y.matchShapes;if(k){var H=B.toShape(!1);if(H)return o(H)}var j=B._segments,z=j.length,G,Q=t(B._matrix);if(k&&z>=2&&!B.hasHandles())if(z>2){G=B._closed?"polygon":"polyline";for(var Y=[],re=0;re<z;re++)Y.push(e.point(j[re]._point));Q.points=Y.join(" ")}else{G="line";var Z=j[0]._point,ie=j[1]._point;Q.set({x1:Z.x,y1:Z.y,x2:ie.x,y2:ie.y})}else G="path",Q.d=B.getPathData(null,y.precision);return Je.create(G,Q,e)}T(a,"exportPath");function o(B){var y=B._type,k=B._radius,H=t(B._matrix,!0,y!=="rectangle");if(y==="rectangle"){y="rect";var j=B._size,z=j.width,G=j.height;H.x-=z/2,H.y-=G/2,H.width=z,H.height=G,k.isZero()&&(k=null)}return k&&(y==="circle"?H.r=k:(H.rx=k.width,H.ry=k.height)),Je.create(y,H,e)}T(o,"exportShape");function l(B,y){var k=t(B._matrix),H=B.getPathData(null,y.precision);return H&&(k.d=H),Je.create("path",k,e)}T(l,"exportCompoundPath");function u(B,y){var k=t(B._matrix,!0),H=B._definition,j=b(H,"symbol"),z=H._item,G=z.getStrokeBounds();return j||(j=Je.create("symbol",{viewBox:e.rectangle(G)}),j.appendChild(V(z,y)),U(H,j,"symbol")),k.href="#"+j.id,k.x+=G.x,k.y+=G.y,k.width=G.width,k.height=G.height,k.overflow="visible",Je.create("use",k,e)}T(u,"exportSymbolItem");function f(B){var y=b(B,"color");if(!y){var k=B.getGradient(),H=k._radial,j=B.getOrigin(),z=B.getDestination(),G;if(H){G={cx:j.x,cy:j.y,r:j.getDistance(z)};var Q=B.getHighlight();Q&&(G.fx=Q.x,G.fy=Q.y)}else G={x1:j.x,y1:j.y,x2:z.x,y2:z.y};G.gradientUnits="userSpaceOnUse",y=Je.create((H?"radial":"linear")+"Gradient",G,e);for(var Y=k._stops,re=0,Z=Y.length;re<Z;re++){var ie=Y[re],se=ie._color,ue=se.getAlpha(),le=ie._offset;G={offset:le==null?re/(Z-1):le},se&&(G["stop-color"]=se.toCSS(!0)),ue<1&&(G["stop-opacity"]=ue),y.appendChild(Je.create("stop",G,e))}U(B,y,"color")}return"url(#"+y.id+")"}T(f,"exportGradient");function d(B){var y=Je.create("text",t(B._matrix,!0),e);return y.textContent=B._content,y}T(d,"exportText");var C={Group:n,Layer:n,Raster:i,Path:a,Shape:o,CompoundPath:l,SymbolItem:u,PointText:d};function M(B,y,k){var H={},j=!k&&B.getParent(),z=[];return B._name!=null&&(H.id=B._name),r.each(Ar,function(G){var Q=G.get,Y=G.type,re=B[Q]();if(G.exportFilter?G.exportFilter(B,re):!j||!r.equals(j[Q](),re)){if(Y==="color"&&re!=null){var Z=re.getAlpha();Z<1&&(H[G.attribute+"-opacity"]=Z)}Y==="style"?z.push(G.attribute+": "+re):H[G.attribute]=re==null?"none":Y==="color"?re.gradient?f(re):re.toCSS(!0):Y==="array"?re.join(","):Y==="lookup"?G.toSVG[re]:re}}),z.length&&(H.style=z.join(";")),H.opacity===1&&delete H.opacity,B._visible||(H.visibility="hidden"),Je.set(y,H,e)}T(M,"applyStyle");var P;function b(B,y){return P||(P={ids:{},svgs:{}}),B&&P.svgs[y+"-"+(B._id||B.__id||(B.__id=S.get("svg")))]}T(b,"getDefinition");function U(B,y,k){P||b();var H=P.ids[k]=(P.ids[k]||0)+1;y.id=k+"-"+H,P.svgs[k+"-"+(B._id||B.__id)]=y}T(U,"setDefinition");function A(B,y){var k=B,H=null;if(P){k=B.nodeName.toLowerCase()==="svg"&&B;for(var j in P.svgs)H||(k||(k=Je.create("svg"),k.appendChild(B)),H=k.insertBefore(Je.create("defs"),k.firstChild)),H.appendChild(P.svgs[j]);P=null}return y.asString?new p.XMLSerializer().serializeToString(k):k}T(A,"exportDefinitions");function V(B,y,k){var H=C[B._class],j=H&&H(B,y);if(j){var z=y.onExport;z&&(j=z(B,j,y)||j);var G=JSON.stringify(B._data);G&&G!=="{}"&&G!=="null"&&j.setAttribute("data-paper-data",G)}return j&&M(B,j,k)}T(V,"exportSVG");function E(B){return B||(B={}),e=new x(B.precision),B}T(E,"setOptions"),$.inject({exportSVG:function(B){return B=E(B),A(V(this,B,!0),B)}}),W.inject({exportSVG:function(B){B=E(B);var y=this._children,k=this.getView(),H=r.pick(B.bounds,"view"),j=B.matrix||H==="view"&&k._matrix,z=j&&X.read([j]),G=H==="view"?new F([0,0],k.getViewSize()):H==="content"?$._getBounds(y,z,{stroke:!0}).rect:F.read([H],0,{readNull:!0}),Q={version:"1.1",xmlns:Je.svg,"xmlns:xlink":Je.xlink};G&&(Q.width=G.width,Q.height=G.height,(G.x||G.x===0||G.y||G.y===0)&&(Q.viewBox=e.rectangle(G)));var Y=Je.create("svg",Q,e),re=Y;z&&!z.isIdentity()&&(re=Y.appendChild(Je.create("g",t(z),e)));for(var Z=0,ie=y.length;Z<ie;Z++)re.appendChild(V(y[Z],B,!0));return A(Y,B)}})},new function(){var e={},t;function n(y,k,H,j,z,G){var Q=Je.get(y,k)||G,Y=Q==null?j?null:H?"":0:H?Q:parseFloat(Q);return/%\s*$/.test(Q)?Y/100*(z?1:t[/x|^width/.test(k)?"width":"height"]):Y}T(n,"getValue");function i(y,k,H,j,z,G,Q){return k=n(y,k||"x",!1,j,z,G),H=n(y,H||"y",!1,j,z,Q),j&&(k==null||H==null)?null:new s(k,H)}T(i,"getPoint");function a(y,k,H,j,z){return k=n(y,k||"width",!1,j,z),H=n(y,H||"height",!1,j,z),j&&(k==null||H==null)?null:new _(k,H)}T(a,"getSize");function o(y,k,H){return y==="none"?null:k==="number"?parseFloat(y):k==="array"?y?y.split(/[\s,]+/g).map(parseFloat):[]:k==="color"?V(y)||y:k==="lookup"?H[y]:y}T(o,"convertValue");function l(y,k,H,j){var z=y.childNodes,G=k==="clippath",Q=k==="defs",Y=new q,re=Y._project,Z=re._currentStyle,ie=[];if(!G&&!Q&&(Y=A(Y,y,j),re._currentStyle=Y._style.clone()),j)for(var se=y.querySelectorAll("defs"),ue=0,le=se.length;ue<le;ue++)E(se[ue],H,!1);for(var ue=0,le=z.length;ue<le;ue++){var he=z[ue],ye;he.nodeType===1&&!/^defs$/i.test(he.nodeName)&&(ye=E(he,H,!1))&&!(ye instanceof fe)&&ie.push(ye)}return Y.addChildren(ie),G&&(Y=A(Y.reduce(),y,j)),re._currentStyle=Z,(G||Q)&&(Y.remove(),Y=null),Y}T(l,"importGroup");function u(y,k){for(var H=y.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),j=[],z=0,G=H.length;z<G;z+=2)j.push(new s(parseFloat(H[z]),parseFloat(H[z+1])));var Q=new we(j);return k==="polygon"&&Q.closePath(),Q}T(u,"importPoly");function f(y){return Se.create(y.getAttribute("d"))}T(f,"importPath");function d(y,k){var H=(n(y,"href",!0)||"").substring(1),j=k==="radialgradient",z;if(H)z=e[H].getGradient(),z._radial^j&&(z=z.clone(),z._radial=j);else{for(var G=y.childNodes,Q=[],Y=0,re=G.length;Y<re;Y++){var Z=G[Y];Z.nodeType===1&&Q.push(A(new ot,Z))}z=new rt(Q,j)}var ie,se,ue,le=n(y,"gradientUnits",!0)!=="userSpaceOnUse";j?(ie=i(y,"cx","cy",!1,le,"50%","50%"),se=ie.add(n(y,"r",!1,!1,le,"50%"),0),ue=i(y,"fx","fy",!0,le)):(ie=i(y,"x1","y1",!1,le,"0%","0%"),se=i(y,"x2","y2",!1,le,"100%","0%"));var he=A(new We(z,ie,se,ue),y);return he._scaleToBounds=le,null}T(d,"importGradient");var C={"#document":function(y,k,H,j){for(var z=y.childNodes,G=0,Q=z.length;G<Q;G++){var Y=z[G];if(Y.nodeType===1)return E(Y,H,j)}},g:l,svg:l,clippath:l,polygon:u,polyline:u,path:f,lineargradient:d,radialgradient:d,image:function(y){var k=new ae(n(y,"href",!0));return k.on("load",function(){var H=a(y);this.setSize(H);var j=i(y).add(H.divide(2));this._matrix.append(new X().translate(j))}),k},symbol:function(y,k,H,j){return new fe(l(y,k,H,j),!0)},defs:l,use:function(y){var k=(n(y,"href",!0)||"").substring(1),H=e[k],j=i(y);return H?H instanceof fe?H.place(j):H.clone().translate(j):null},circle:function(y){return new J.Circle(i(y,"cx","cy"),n(y,"r"))},ellipse:function(y){return new J.Ellipse({center:i(y,"cx","cy"),radius:a(y,"rx","ry")})},rect:function(y){return new J.Rectangle(new F(i(y),a(y)),a(y,"rx","ry"))},line:function(y){return new we.Line(i(y,"x1","y1"),i(y,"x2","y2"))},text:function(y){var k=new ht(i(y).add(i(y,"dx","dy")));return k.setContent(y.textContent.trim()||""),k},switch:l};function M(y,k,H,j){if(y.transform){for(var z=(j.getAttribute(H)||"").split(/\)\s*/g),G=new X,Q=0,Y=z.length;Q<Y;Q++){var re=z[Q];if(!re)break;for(var Z=re.split(/\(\s*/),ie=Z[0],se=Z[1].split(/[\s,]+/g),ue=0,le=se.length;ue<le;ue++)se[ue]=parseFloat(se[ue]);switch(ie){case"matrix":G.append(new X(se[0],se[1],se[2],se[3],se[4],se[5]));break;case"rotate":G.rotate(se[0],se[1]||0,se[2]||0);break;case"translate":G.translate(se[0],se[1]||0);break;case"scale":G.scale(se);break;case"skewX":G.skew(se[0],0);break;case"skewY":G.skew(0,se[0]);break}}y.transform(G)}}T(M,"applyTransform");function P(y,k,H){var j=H==="fill-opacity"?"getFillColor":"getStrokeColor",z=y[j]&&y[j]();z&&z.setAlpha(parseFloat(k))}T(P,"applyOpacity");var b=r.set(r.each(Ar,function(y){this[y.attribute]=function(k,H){if(k[y.set]&&(k[y.set](o(H,y.type,y.fromSVG)),y.type==="color")){var j=k[y.get]();if(j&&j._scaleToBounds){var z=k.getBounds();j.transform(new X().translate(z.getPoint()).scale(z.getSize()))}}}},{}),{id:function(y,k){e[k]=y,y.setName&&y.setName(k)},"clip-path":function(y,k){var H=V(k);if(H)if(H=H.clone(),H.setClipMask(!0),y instanceof q)y.insertChild(0,H);else return new q(H,y)},gradientTransform:M,transform:M,"fill-opacity":P,"stroke-opacity":P,visibility:function(y,k){y.setVisible&&y.setVisible(k==="visible")},display:function(y,k){y.setVisible&&y.setVisible(k!==null)},"stop-color":function(y,k){y.setColor&&y.setColor(k)},"stop-opacity":function(y,k){y._color&&y._color.setAlpha(parseFloat(k))},offset:function(y,k){if(y.setOffset){var H=k.match(/(.*)%$/);y.setOffset(H?H[1]/100:parseFloat(k))}},viewBox:function(y,k,H,j,z){var G=new F(o(k,"array")),Q=a(j,null,null,!0),Y,re;if(y instanceof q){var Z=Q?Q.divide(G.getSize()):1,re=new X().scale(Z).translate(G.getPoint().negate());Y=y}else y instanceof fe&&(Q&&G.setSize(Q),Y=y._item);if(Y){if(U(j,"overflow",z)!=="visible"){var ie=new J.Rectangle(G);ie.setClipMask(!0),Y.addChild(ie)}re&&Y.transform(re)}}});function U(y,k,H){var j=y.attributes[k],z=j&&j.value;if(!z&&y.style){var G=r.camelize(k);z=y.style[G],!z&&H.node[G]!==H.parent[G]&&(z=H.node[G])}return z?z==="none"?null:z:m}T(U,"getAttribute");function A(y,k,H){var j=k.parentNode,z={node:Qe.getStyles(k)||{},parent:!H&&!/^defs$/i.test(j.tagName)&&Qe.getStyles(j)||{}};return r.each(b,function(G,Q){var Y=U(k,Q,z);y=Y!==m&&G(y,Y,Q,k,z)||y}),y}T(A,"applyAttributes");function V(y){var k=y&&y.match(/\((?:["'#]*)([^"')]+)/),H=k&&k[1],j=H&&e[D?H.replace(D.location.href.split("#")[0]+"#",""):H];return j&&j._scaleToBounds&&(j=j.clone(),j._scaleToBounds=!0),j}T(V,"getDefinition");function E(y,k,H){var j=y.nodeName.toLowerCase(),z=j!=="#document",G=v.body,Q,Y,re;H&&z&&(t=Ve.getView().getSize(),t=a(y,null,null,!0)||t,Q=Je.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),Y=y.parentNode,re=y.nextSibling,Q.appendChild(y),G.appendChild(Q));var Z=Ve.settings,ie=Z.applyMatrix,se=Z.insertItems;Z.applyMatrix=!1,Z.insertItems=!1;var ue=C[j],le=ue&&ue(y,j,k,H)||null;if(Z.insertItems=se,Z.applyMatrix=ie,le){z&&!(le instanceof q)&&(le=A(le,y,H));var he=k.onImport,ye=z&&y.getAttribute("data-paper-data");he&&(le=he(y,le,k)||le),k.expandShapes&&le instanceof J&&(le.remove(),le=le.toPath()),ye&&(le._data=JSON.parse(ye))}return Q&&(G.removeChild(Q),Y&&(re?Y.insertBefore(y,re):Y.appendChild(y))),H&&(e={},le&&r.pick(k.applyMatrix,ie)&&le.matrix.apply(!0,!0)),le}T(E,"importNode");function B(y,k,H){if(!y)return null;k=typeof k=="function"?{onLoad:k}:k||{};var j=Ve,z=null;function G(Z){try{var ie=typeof Z=="object"?Z:new p.DOMParser().parseFromString(Z.trim(),"image/svg+xml");if(!ie.nodeName)throw ie=null,new Error("Unsupported SVG source: "+y);Ve=j,z=E(ie,k,!0),(!k||k.insert!==!1)&&H._insertItem(m,z);var se=k.onLoad;se&&se(z,Z)}catch(ue){Q(ue)}}T(G,"onLoad");function Q(Z,ie){var se=k.onError;if(se)se(Z,ie);else throw new Error(Z)}if(T(Q,"onError"),typeof y=="string"&&!/^[\s\S]*</.test(y)){var Y=v.getElementById(y);Y?G(Y):Zn.request({url:y,async:!0,onLoad:G,onError:Q})}else if(typeof File<"u"&&y instanceof File){var re=new FileReader;return re.onload=function(){G(re.result)},re.onerror=function(){Q(re.error)},re.readAsText(y)}else G(y);return z}T(B,"importSVG"),$.inject({importSVG:function(y,k){return B(y,k,this)}}),W.inject({importSVG:function(y,k){return this.activate(),B(y,k,this)}})},r.exports.PaperScript=function(){var e=this,t=e.acorn;if(!t&&typeof $s<"u")try{t=Ws}catch{}if(!t){var n,i;t=n=i={},function(A,V){if(typeof n=="object"&&typeof i=="object")return V(n);if(typeof m=="function"&&m.amd)return m(["exports"],V);V(A.acorn||(A.acorn={}))}(this,function(A){A.version="0.5.0";var V,E,B,y;A.parse=function(te,oe){return E=String(te),B=E.length,H(oe),Wr(),Os(V.program)};var k=A.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function H(te){V=te||{};for(var oe in k)Object.prototype.hasOwnProperty.call(V,oe)||(V[oe]=k[oe]);y=V.sourceFile||null}T(H,"setOptions");var j=A.getLineInfo=function(te,oe){for(var ge=1,me=0;;){mn.lastIndex=me;var Le=mn.exec(te);if(Le&&Le.index<oe)++ge,me=Le.index+Le[0].length;else break}return{line:ge,column:oe-me}};A.tokenize=function(te,oe){E=String(te),B=E.length,H(oe),Wr();var ge={};function me(Le){return ye=Q,ln(Le),ge.start=G,ge.end=Q,ge.startLoc=Y,ge.endLoc=re,ge.type=Z,ge.value=ie,ge}return T(me,"getToken"),me.jumpTo=function(Le,ke){if(z=Le,V.locations){ue=1,le=mn.lastIndex=0;for(var ze;(ze=mn.exec(E))&&ze.index<Le;)++ue,le=ze.index+ze[0].length}se=ke,yn()},me};var z,G,Q,Y,re,Z,ie,se,ue,le,he,ye,xe,be,Te,ve;function _e(te,oe){var ge=j(E,te);oe+=" ("+ge.line+":"+ge.column+")";var me=new SyntaxError(oe);throw me.pos=te,me.loc=ge,me.raisedAt=z,me}T(_e,"raise");var Pe=[],Ee={type:"num"},Ie={type:"regexp"},Re={type:"string"},Ae={type:"name"},Be={type:"eof"},He={keyword:"break"},Ne={keyword:"case",beforeExpr:!0},ut={keyword:"catch"},lt={keyword:"continue"},vt={keyword:"debugger"},nt={keyword:"default"},Ze={keyword:"do",isLoop:!0},it={keyword:"else",beforeExpr:!0},yt={keyword:"finally"},ft={keyword:"for",isLoop:!0},Pt={keyword:"function"},Xt={keyword:"if"},Tt={keyword:"return",beforeExpr:!0},It={keyword:"switch"},xt={keyword:"throw",beforeExpr:!0},bt={keyword:"try"},Zt={keyword:"var"},Et={keyword:"while",isLoop:!0},Kn={keyword:"with"},Rr={keyword:"new",beforeExpr:!0},Lr={keyword:"this"},kr={keyword:"null",atomValue:null},Nr={keyword:"true",atomValue:!0},Br={keyword:"false",atomValue:!1},Jn={keyword:"in",binop:7,beforeExpr:!0},Ti={break:He,case:Ne,catch:ut,continue:lt,debugger:vt,default:nt,do:Ze,else:it,finally:yt,for:ft,function:Pt,if:Xt,return:Tt,switch:It,throw:xt,try:bt,var:Zt,while:Et,with:Kn,null:kr,true:Nr,false:Br,new:Rr,in:Jn,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Lr,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Qn={type:"[",beforeExpr:!0},Yn={type:"]"},pn={type:"{",beforeExpr:!0},sn={type:"}"},Rt={type:"(",beforeExpr:!0},Mt={type:")"},Ft={type:",",beforeExpr:!0},Lt={type:";",beforeExpr:!0},_n={type:":",beforeExpr:!0},Ii={type:"."},Ei={type:"?",beforeExpr:!0},Mi={binop:10,beforeExpr:!0},Oi={isAssign:!0,beforeExpr:!0},on={isAssign:!0,beforeExpr:!0},is={postfix:!0,prefix:!0,isUpdate:!0},zr={prefix:!0,beforeExpr:!0},Dr={binop:1,beforeExpr:!0},Fr={binop:2,beforeExpr:!0},rs={binop:3,beforeExpr:!0},as={binop:4,beforeExpr:!0},ss={binop:5,beforeExpr:!0},os={binop:6,beforeExpr:!0},us={binop:7,beforeExpr:!0},ls={binop:8,beforeExpr:!0},fs={binop:9,prefix:!0,beforeExpr:!0},hs={binop:10,beforeExpr:!0};A.tokTypes={bracketL:Qn,bracketR:Yn,braceL:pn,braceR:sn,parenL:Rt,parenR:Mt,comma:Ft,semi:Lt,colon:_n,dot:Ii,question:Ei,slash:Mi,eq:Oi,name:Ae,eof:Be,num:Ee,regexp:Ie,string:Re};for(var Hr in Ti)A.tokTypes["_"+Hr]=Ti[Hr];function An(te){te=te.split(" ");var oe="",ge=[];e:for(var me=0;me<te.length;++me){for(var Le=0;Le<ge.length;++Le)if(ge[Le][0].length==te[me].length){ge[Le].push(te[me]);continue e}ge.push([te[me]])}function ke(Xe){if(Xe.length==1)return oe+="return str === "+JSON.stringify(Xe[0])+";";oe+="switch(str){";for(var At=0;At<Xe.length;++At)oe+="case "+JSON.stringify(Xe[At])+":";oe+="return true}return false;"}if(T(ke,"compareTo"),ge.length>3){ge.sort(function(Xe,At){return At.length-Xe.length}),oe+="switch(str.length){";for(var me=0;me<ge.length;++me){var ze=ge[me];oe+="case "+ze[0].length+":",ke(ze)}oe+="}"}else ke(te);return new Function("str",oe)}T(An,"makePredicate");var cs=An("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),ds=An("class enum extends super const export import"),Ur=An("implements interface let package private protected public static yield"),ei=An("eval arguments"),gs=An("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),vs=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Vr="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",ps="\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u0620-\u0649\u0672-\u06D3\u06E7-\u06E8\u06FB-\u06FC\u0730-\u074A\u0800-\u0814\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0840-\u0857\u08E4-\u08FE\u0900-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09D7\u09DF-\u09E0\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5F-\u0B60\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2-\u0CE3\u0CE6-\u0CEF\u0D02\u0D03\u0D46-\u0D48\u0D57\u0D62-\u0D63\u0D66-\u0D6F\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E34-\u0E3A\u0E40-\u0E45\u0E50-\u0E59\u0EB4-\u0EB9\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F41-\u0F47\u0F71-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1029\u1040-\u1049\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u170E-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17B2\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1920-\u192B\u1930-\u193B\u1951-\u196D\u19B0-\u19C0\u19C8-\u19C9\u19D0-\u19D9\u1A00-\u1A15\u1A20-\u1A53\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1B46-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C00-\u1C22\u1C40-\u1C49\u1C5B-\u1C7D\u1CD0-\u1CD2\u1D00-\u1DBE\u1E01-\u1F15\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2D81-\u2D96\u2DE0-\u2DFF\u3021-\u3028\u3099\u309A\uA640-\uA66D\uA674-\uA67D\uA69F\uA6F0-\uA6F1\uA7F8-\uA800\uA806\uA80B\uA823-\uA827\uA880-\uA881\uA8B4-\uA8C4\uA8D0-\uA8D9\uA8F3-\uA8F7\uA900-\uA909\uA926-\uA92D\uA930-\uA945\uA980-\uA983\uA9B3-\uA9C0\uAA00-\uAA27\uAA40-\uAA41\uAA4C-\uAA4D\uAA50-\uAA59\uAA7B\uAAE0-\uAAE9\uAAF2-\uAAF3\uABC0-\uABE1\uABEC\uABED\uABF0-\uABF9\uFB20-\uFB28\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",jr=new RegExp("["+Vr+"]"),_s=new RegExp("["+Vr+ps+"]"),ti=/[\n\r\u2028\u2029]/,mn=/\r\n|[\n\r\u2028\u2029]/g,ni=A.isIdentifierStart=function(te){return te<65?te===36:te<91?!0:te<97?te===95:te<123?!0:te>=170&&jr.test(String.fromCharCode(te))},$r=A.isIdentifierChar=function(te){return te<48?te===36:te<58?!0:te<65?!1:te<91?!0:te<97?te===95:te<123?!0:te>=170&&_s.test(String.fromCharCode(te))};function un(){this.line=ue,this.column=z-le}T(un,"line_loc_t");function Wr(){ue=1,z=le=0,se=!0,yn()}T(Wr,"initTokenState");function ct(te,oe){Q=z,V.locations&&(re=new un),Z=te,yn(),ie=oe,se=te.beforeExpr}T(ct,"finishToken");function ms(){var te=V.onComment&&V.locations&&new un,oe=z,ge=E.indexOf("*/",z+=2);if(ge===-1&&_e(z-2,"Unterminated comment"),z=ge+2,V.locations){mn.lastIndex=oe;for(var me;(me=mn.exec(E))&&me.index<z;)++ue,le=me.index+me[0].length}V.onComment&&V.onComment(!0,E.slice(oe+2,ge),oe,z,te,V.locations&&new un)}T(ms,"skipBlockComment");function Ai(){for(var te=z,oe=V.onComment&&V.locations&&new un,ge=E.charCodeAt(z+=2);z<B&&ge!==10&&ge!==13&&ge!==8232&&ge!==8233;)++z,ge=E.charCodeAt(z);V.onComment&&V.onComment(!1,E.slice(te+2,z),te,z,oe,V.locations&&new un)}T(Ai,"skipLineComment");function yn(){for(;z<B;){var te=E.charCodeAt(z);if(te===32)++z;else if(te===13){++z;var oe=E.charCodeAt(z);oe===10&&++z,V.locations&&(++ue,le=z)}else if(te===10||te===8232||te===8233)++z,V.locations&&(++ue,le=z);else if(te>8&&te<14)++z;else if(te===47){var oe=E.charCodeAt(z+1);if(oe===42)ms();else if(oe===47)Ai();else break}else if(te===160)++z;else if(te>=5760&&vs.test(String.fromCharCode(te)))++z;else break}}T(yn,"skipSpace");function ys(){var te=E.charCodeAt(z+1);return te>=48&&te<=57?Gr(!0):(++z,ct(Ii))}T(ys,"readToken_dot");function xs(){var te=E.charCodeAt(z+1);return se?(++z,qr()):te===61?dt(on,2):dt(Mi,1)}T(xs,"readToken_slash");function ws(){var te=E.charCodeAt(z+1);return te===61?dt(on,2):dt(hs,1)}T(ws,"readToken_mult_modulo");function Ss(te){var oe=E.charCodeAt(z+1);return oe===te?dt(te===124?Dr:Fr,2):oe===61?dt(on,2):dt(te===124?rs:ss,1)}T(Ss,"readToken_pipe_amp");function bs(){var te=E.charCodeAt(z+1);return te===61?dt(on,2):dt(as,1)}T(bs,"readToken_caret");function Ps(te){var oe=E.charCodeAt(z+1);return oe===te?oe==45&&E.charCodeAt(z+2)==62&&ti.test(E.slice(ye,z))?(z+=3,Ai(),yn(),ln()):dt(is,2):oe===61?dt(on,2):dt(fs,1)}T(Ps,"readToken_plus_min");function Cs(te){var oe=E.charCodeAt(z+1),ge=1;return oe===te?(ge=te===62&&E.charCodeAt(z+2)===62?3:2,E.charCodeAt(z+ge)===61?dt(on,ge+1):dt(ls,ge)):oe==33&&te==60&&E.charCodeAt(z+2)==45&&E.charCodeAt(z+3)==45?(z+=4,Ai(),yn(),ln()):(oe===61&&(ge=E.charCodeAt(z+2)===61?3:2),dt(us,ge))}T(Cs,"readToken_lt_gt");function Ts(te){var oe=E.charCodeAt(z+1);return oe===61?dt(os,E.charCodeAt(z+2)===61?3:2):dt(te===61?Oi:zr,1)}T(Ts,"readToken_eq_excl");function Is(te){switch(te){case 46:return ys();case 40:return++z,ct(Rt);case 41:return++z,ct(Mt);case 59:return++z,ct(Lt);case 44:return++z,ct(Ft);case 91:return++z,ct(Qn);case 93:return++z,ct(Yn);case 123:return++z,ct(pn);case 125:return++z,ct(sn);case 58:return++z,ct(_n);case 63:return++z,ct(Ei);case 48:var oe=E.charCodeAt(z+1);if(oe===120||oe===88)return Es();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Gr(!1);case 34:case 39:return Ms(te);case 47:return xs();case 37:case 42:return ws();case 124:case 38:return Ss(te);case 94:return bs();case 43:case 45:return Ps(te);case 60:case 62:return Cs(te);case 61:case 33:return Ts(te);case 126:return dt(zr,1)}return!1}T(Is,"getTokenFromCode");function ln(te){if(te?z=G+1:G=z,V.locations&&(Y=new un),te)return qr();if(z>=B)return ct(Be);var oe=E.charCodeAt(z);if(ni(oe)||oe===92)return Zr();var ge=Is(oe);if(ge===!1){var me=String.fromCharCode(oe);if(me==="\\"||jr.test(me))return Zr();_e(z,"Unexpected character '"+me+"'")}return ge}T(ln,"readToken");function dt(te,oe){var ge=E.slice(z,z+oe);z+=oe,ct(te,ge)}T(dt,"finishOp");function qr(){for(var Le="",te,oe,ge=z;;){z>=B&&_e(ge,"Unterminated regular expression");var me=E.charAt(z);if(ti.test(me)&&_e(ge,"Unterminated regular expression"),te)te=!1;else{if(me==="[")oe=!0;else if(me==="]"&&oe)oe=!1;else if(me==="/"&&!oe)break;te=me==="\\"}++z}var Le=E.slice(ge,z);++z;var ke=Xr();ke&&!/^[gmsiy]*$/.test(ke)&&_e(ge,"Invalid regexp flag");try{var ze=new RegExp(Le,ke)}catch(Xe){Xe instanceof SyntaxError&&_e(ge,Xe.message),_e(Xe)}return ct(Ie,ze)}T(qr,"readRegexp");function Rn(te,oe){for(var ge=z,me=0,Le=0,ke=oe==null?1/0:oe;Le<ke;++Le){var ze=E.charCodeAt(z),Xe;if(ze>=97?Xe=ze-97+10:ze>=65?Xe=ze-65+10:ze>=48&&ze<=57?Xe=ze-48:Xe=1/0,Xe>=te)break;++z,me=me*te+Xe}return z===ge||oe!=null&&z-ge!==oe?null:me}T(Rn,"readInt");function Es(){z+=2;var te=Rn(16);return te==null&&_e(G+2,"Expected hexadecimal number"),ni(E.charCodeAt(z))&&_e(z,"Identifier directly after number"),ct(Ee,te)}T(Es,"readHexNumber");function Gr(te){var oe=z,ge=!1,me=E.charCodeAt(z)===48;!te&&Rn(10)===null&&_e(oe,"Invalid number"),E.charCodeAt(z)===46&&(++z,Rn(10),ge=!0);var Le=E.charCodeAt(z);(Le===69||Le===101)&&(Le=E.charCodeAt(++z),(Le===43||Le===45)&&++z,Rn(10)===null&&_e(oe,"Invalid number"),ge=!0),ni(E.charCodeAt(z))&&_e(z,"Identifier directly after number");var ke=E.slice(oe,z),ze;return ge?ze=parseFloat(ke):!me||ke.length===1?ze=parseInt(ke,10):/[89]/.test(ke)||ve?_e(oe,"Invalid number"):ze=parseInt(ke,8),ct(Ee,ze)}T(Gr,"readNumber");function Ms(te){z++;for(var oe="";;){z>=B&&_e(G,"Unterminated string constant");var ge=E.charCodeAt(z);if(ge===te)return++z,ct(Re,oe);if(ge===92){ge=E.charCodeAt(++z);var me=/^[0-7]+/.exec(E.slice(z,z+3));for(me&&(me=me[0]);me&&parseInt(me,8)>255;)me=me.slice(0,-1);if(me==="0"&&(me=null),++z,me)ve&&_e(z-2,"Octal literal in strict mode"),oe+=String.fromCharCode(parseInt(me,8)),z+=me.length-1;else switch(ge){case 110:oe+=`
`;break;case 114:oe+="\r";break;case 120:oe+=String.fromCharCode(ii(2));break;case 117:oe+=String.fromCharCode(ii(4));break;case 85:oe+=String.fromCharCode(ii(8));break;case 116:oe+="	";break;case 98:oe+="\b";break;case 118:oe+="\v";break;case 102:oe+="\f";break;case 48:oe+="\0";break;case 13:E.charCodeAt(z)===10&&++z;case 10:V.locations&&(le=z,++ue);break;default:oe+=String.fromCharCode(ge);break}}else(ge===13||ge===10||ge===8232||ge===8233)&&_e(G,"Unterminated string constant"),oe+=String.fromCharCode(ge),++z}}T(Ms,"readString");function ii(te){var oe=Rn(16,te);return oe===null&&_e(G,"Bad character escape sequence"),oe}T(ii,"readHexChar");var xn;function Xr(){xn=!1;for(var te,oe=!0,ge=z;;){var me=E.charCodeAt(z);if($r(me))xn&&(te+=E.charAt(z)),++z;else if(me===92){xn||(te=E.slice(ge,z)),xn=!0,E.charCodeAt(++z)!=117&&_e(z,"Expecting Unicode escape sequence \\uXXXX"),++z;var Le=ii(4),ke=String.fromCharCode(Le);ke||_e(z-1,"Invalid Unicode escape"),(oe?ni(Le):$r(Le))||_e(z-4,"Invalid Unicode escape"),te+=ke}else break;oe=!1}return xn?te:E.slice(ge,z)}T(Xr,"readWord1");function Zr(){var te=Xr(),oe=Ae;return!xn&&gs(te)&&(oe=Ti[te]),ct(oe,te)}T(Zr,"readWord");function Ge(){he=G,ye=Q,xe=re,ln()}T(Ge,"next");function Ri(te){if(ve=te,z=G,V.locations)for(;z<le;)le=E.lastIndexOf(`
`,le-2)+1,--ue;yn(),ln()}T(Ri,"setStrict");function Kr(){this.type=null,this.start=G,this.end=null}T(Kr,"node_t");function Jr(){this.start=Y,this.end=null,y!==null&&(this.source=y)}T(Jr,"node_loc_t");function pt(){var te=new Kr;return V.locations&&(te.loc=new Jr),V.directSourceFile&&(te.sourceFile=V.directSourceFile),V.ranges&&(te.range=[G,0]),te}T(pt,"startNode");function Kt(te){var oe=new Kr;return oe.start=te.start,V.locations&&(oe.loc=new Jr,oe.loc.start=te.loc.start),V.ranges&&(oe.range=[te.range[0],0]),oe}T(Kt,"startNodeFrom");function Ue(te,oe){return te.type=oe,te.end=ye,V.locations&&(te.loc.end=xe),V.ranges&&(te.range[1]=ye),te}T(Ue,"finishNode");function Li(te){return V.ecmaVersion>=5&&te.type==="ExpressionStatement"&&te.expression.type==="Literal"&&te.expression.value==="use strict"}T(Li,"isUseStrict");function et(te){if(Z===te)return Ge(),!0}T(et,"eat");function ri(){return!V.strictSemicolons&&(Z===Be||Z===sn||ti.test(E.slice(ye,G)))}T(ri,"canInsertSemicolon");function fn(){!et(Lt)&&!ri()&&Ht()}T(fn,"semicolon");function st(te){Z===te?Ge():Ht()}T(st,"expect");function Ht(){_e(G,"Unexpected token")}T(Ht,"unexpected");function ai(te){te.type!=="Identifier"&&te.type!=="MemberExpression"&&_e(te.start,"Assigning to rvalue"),ve&&te.type==="Identifier"&&ei(te.name)&&_e(te.start,"Assigning to "+te.name+" in strict mode")}T(ai,"checkLVal");function Os(te){he=ye=z,V.locations&&(xe=new un),be=ve=null,Te=[],ln();var oe=te||pt(),ge=!0;for(te||(oe.body=[]);Z!==Be;){var me=Ot();oe.body.push(me),ge&&Li(me)&&Ri(!0),ge=!1}return Ue(oe,"Program")}T(Os,"parseTopLevel");var ki={kind:"loop"},As={kind:"switch"};function Ot(){(Z===Mi||Z===on&&ie=="/=")&&ln(!0);var te=Z,oe=pt();switch(te){case He:case lt:Ge();var ge=te===He;et(Lt)||ri()?oe.label=null:Z!==Ae?Ht():(oe.label=Jt(),fn());for(var me=0;me<Te.length;++me){var Le=Te[me];if((oe.label==null||Le.name===oe.label.name)&&(Le.kind!=null&&(ge||Le.kind==="loop")||oe.label&&ge))break}return me===Te.length&&_e(oe.start,"Unsyntactic "+te.keyword),Ue(oe,ge?"BreakStatement":"ContinueStatement");case vt:return Ge(),fn(),Ue(oe,"DebuggerStatement");case Ze:return Ge(),Te.push(ki),oe.body=Ot(),Te.pop(),st(Et),oe.test=Ln(),fn(),Ue(oe,"DoWhileStatement");case ft:if(Ge(),Te.push(ki),st(Rt),Z===Lt)return Ni(oe,null);if(Z===Zt){var ke=pt();return Ge(),Yr(ke,!0),Ue(ke,"VariableDeclaration"),ke.declarations.length===1&&et(Jn)?Qr(oe,ke):Ni(oe,ke)}var ke=mt(!1,!0);return et(Jn)?(ai(ke),Qr(oe,ke)):Ni(oe,ke);case Pt:return Ge(),Hi(oe,!0);case Xt:return Ge(),oe.test=Ln(),oe.consequent=Ot(),oe.alternate=et(it)?Ot():null,Ue(oe,"IfStatement");case Tt:return!be&&!V.allowReturnOutsideFunction&&_e(G,"'return' outside of function"),Ge(),et(Lt)||ri()?oe.argument=null:(oe.argument=mt(),fn()),Ue(oe,"ReturnStatement");case It:Ge(),oe.discriminant=Ln(),oe.cases=[],st(pn),Te.push(As);for(var ze,Xe;Z!=sn;)if(Z===Ne||Z===nt){var At=Z===Ne;ze&&Ue(ze,"SwitchCase"),oe.cases.push(ze=pt()),ze.consequent=[],Ge(),At?ze.test=mt():(Xe&&_e(he,"Multiple default clauses"),Xe=!0,ze.test=null),st(_n)}else ze||Ht(),ze.consequent.push(Ot());return ze&&Ue(ze,"SwitchCase"),Ge(),Te.pop(),Ue(oe,"SwitchStatement");case xt:return Ge(),ti.test(E.slice(ye,G))&&_e(ye,"Illegal newline after throw"),oe.argument=mt(),fn(),Ue(oe,"ThrowStatement");case bt:if(Ge(),oe.block=kn(),oe.handler=null,Z===ut){var hn=pt();Ge(),st(Rt),hn.param=Jt(),ve&&ei(hn.param.name)&&_e(hn.param.start,"Binding "+hn.param.name+" in strict mode"),st(Mt),hn.guard=null,hn.body=kn(),oe.handler=Ue(hn,"CatchClause")}return oe.guardedHandlers=Pe,oe.finalizer=et(yt)?kn():null,!oe.handler&&!oe.finalizer&&_e(oe.start,"Missing catch or finally clause"),Ue(oe,"TryStatement");case Zt:return Ge(),Yr(oe),fn(),Ue(oe,"VariableDeclaration");case Et:return Ge(),oe.test=Ln(),Te.push(ki),oe.body=Ot(),Te.pop(),Ue(oe,"WhileStatement");case Kn:return ve&&_e(G,"'with' in strict mode"),Ge(),oe.object=Ln(),oe.body=Ot(),Ue(oe,"WithStatement");case pn:return kn();case Lt:return Ge(),Ue(oe,"EmptyStatement");default:var Vi=ie,si=mt();if(te===Ae&&si.type==="Identifier"&&et(_n)){for(var me=0;me<Te.length;++me)Te[me].name===Vi&&_e(si.start,"Label '"+Vi+"' is already declared");var zs=Z.isLoop?"loop":Z===It?"switch":null;return Te.push({name:Vi,kind:zs}),oe.body=Ot(),Te.pop(),oe.label=si,Ue(oe,"LabeledStatement")}else return oe.expression=si,fn(),Ue(oe,"ExpressionStatement")}}T(Ot,"parseStatement");function Ln(){st(Rt);var te=mt();return st(Mt),te}T(Ln,"parseParenExpression");function kn(te){var oe=pt(),ge=!0,me=!1,Le;for(oe.body=[],st(pn);!et(sn);){var ke=Ot();oe.body.push(ke),ge&&te&&Li(ke)&&(Le=me,Ri(me=!0)),ge=!1}return me&&!Le&&Ri(!1),Ue(oe,"BlockStatement")}T(kn,"parseBlock");function Ni(te,oe){return te.init=oe,st(Lt),te.test=Z===Lt?null:mt(),st(Lt),te.update=Z===Mt?null:mt(),st(Mt),te.body=Ot(),Te.pop(),Ue(te,"ForStatement")}T(Ni,"parseFor");function Qr(te,oe){return te.left=oe,te.right=mt(),st(Mt),te.body=Ot(),Te.pop(),Ue(te,"ForInStatement")}T(Qr,"parseForIn");function Yr(te,oe){for(te.declarations=[],te.kind="var";;){var ge=pt();if(ge.id=Jt(),ve&&ei(ge.id.name)&&_e(ge.id.start,"Binding "+ge.id.name+" in strict mode"),ge.init=et(Oi)?mt(!0,oe):null,te.declarations.push(Ue(ge,"VariableDeclarator")),!et(Ft))break}return te}T(Yr,"parseVar");function mt(te,oe){var ge=Bi(oe);if(!te&&Z===Ft){var me=Kt(ge);for(me.expressions=[ge];et(Ft);)me.expressions.push(Bi(oe));return Ue(me,"SequenceExpression")}return ge}T(mt,"parseExpression");function Bi(te){var oe=Rs(te);if(Z.isAssign){var ge=Kt(oe);return ge.operator=ie,ge.left=oe,Ge(),ge.right=Bi(te),ai(oe),Ue(ge,"AssignmentExpression")}return oe}T(Bi,"parseMaybeAssign");function Rs(te){var oe=Ls(te);if(et(Ei)){var ge=Kt(oe);return ge.test=oe,ge.consequent=mt(!0),st(_n),ge.alternate=mt(!0,te),Ue(ge,"ConditionalExpression")}return oe}T(Rs,"parseMaybeConditional");function Ls(te){return zi(Di(),-1,te)}T(Ls,"parseExprOps");function zi(te,oe,ge){var me=Z.binop;if(me!=null&&(!ge||Z!==Jn)&&me>oe){var Le=Kt(te);Le.left=te,Le.operator=ie;var ke=Z;Ge(),Le.right=zi(Di(),me,ge);var ze=Ue(Le,ke===Dr||ke===Fr?"LogicalExpression":"BinaryExpression");return zi(ze,oe,ge)}return te}T(zi,"parseExprOp");function Di(){if(Z.prefix){var te=pt(),oe=Z.isUpdate;return te.operator=ie,te.prefix=!0,se=!0,Ge(),te.argument=Di(),oe?ai(te.argument):ve&&te.operator==="delete"&&te.argument.type==="Identifier"&&_e(te.start,"Deleting local variable in strict mode"),Ue(te,oe?"UpdateExpression":"UnaryExpression")}for(var ge=ks();Z.postfix&&!ri();){var te=Kt(ge);te.operator=ie,te.prefix=!1,te.argument=ge,ai(ge),Ge(),ge=Ue(te,"UpdateExpression")}return ge}T(Di,"parseMaybeUnary");function ks(){return Nn(Fi())}T(ks,"parseExprSubscripts");function Nn(te,oe){if(et(Ii)){var ge=Kt(te);return ge.object=te,ge.property=Jt(!0),ge.computed=!1,Nn(Ue(ge,"MemberExpression"),oe)}else if(et(Qn)){var ge=Kt(te);return ge.object=te,ge.property=mt(),ge.computed=!0,st(Yn),Nn(Ue(ge,"MemberExpression"),oe)}else if(!oe&&et(Rt)){var ge=Kt(te);return ge.callee=te,ge.arguments=Ui(Mt,!1),Nn(Ue(ge,"CallExpression"),oe)}else return te}T(Nn,"parseSubscripts");function Fi(){switch(Z){case Lr:var me=pt();return Ge(),Ue(me,"ThisExpression");case Ae:return Jt();case Ee:case Re:case Ie:var me=pt();return me.value=ie,me.raw=E.slice(G,Q),Ge(),Ue(me,"Literal");case kr:case Nr:case Br:var me=pt();return me.value=Z.atomValue,me.raw=Z.keyword,Ge(),Ue(me,"Literal");case Rt:var te=Y,oe=G;Ge();var ge=mt();return ge.start=oe,ge.end=Q,V.locations&&(ge.loc.start=te,ge.loc.end=re),V.ranges&&(ge.range=[oe,Q]),st(Mt),ge;case Qn:var me=pt();return Ge(),me.elements=Ui(Yn,!0,!0),Ue(me,"ArrayExpression");case pn:return Bs();case Pt:var me=pt();return Ge(),Hi(me,!1);case Rr:return Ns();default:Ht()}}T(Fi,"parseExprAtom");function Ns(){var te=pt();return Ge(),te.callee=Nn(Fi(),!0),et(Rt)?te.arguments=Ui(Mt,!1):te.arguments=Pe,Ue(te,"NewExpression")}T(Ns,"parseNew");function Bs(){var te=pt(),oe=!0,ge=!1;for(te.properties=[],Ge();!et(sn);){if(oe)oe=!1;else if(st(Ft),V.allowTrailingCommas&&et(sn))break;var me={key:ea()},Le=!1,ke;if(et(_n)?(me.value=mt(!0),ke=me.kind="init"):V.ecmaVersion>=5&&me.key.type==="Identifier"&&(me.key.name==="get"||me.key.name==="set")?(Le=ge=!0,ke=me.kind=me.key.name,me.key=ea(),Z!==Rt&&Ht(),me.value=Hi(pt(),!1)):Ht(),me.key.type==="Identifier"&&(ve||ge))for(var ze=0;ze<te.properties.length;++ze){var Xe=te.properties[ze];if(Xe.key.name===me.key.name){var At=ke==Xe.kind||Le&&Xe.kind==="init"||ke==="init"&&(Xe.kind==="get"||Xe.kind==="set");At&&!ve&&ke==="init"&&Xe.kind==="init"&&(At=!1),At&&_e(me.key.start,"Redefinition of property")}}te.properties.push(me)}return Ue(te,"ObjectExpression")}T(Bs,"parseObj");function ea(){return Z===Ee||Z===Re?Fi():Jt(!0)}T(ea,"parsePropertyName");function Hi(te,oe){Z===Ae?te.id=Jt():oe?Ht():te.id=null,te.params=[];var ge=!0;for(st(Rt);!et(Mt);)ge?ge=!1:st(Ft),te.params.push(Jt());var me=be,Le=Te;if(be=!0,Te=[],te.body=kn(!0),be=me,Te=Le,ve||te.body.body.length&&Li(te.body.body[0]))for(var ke=te.id?-1:0;ke<te.params.length;++ke){var ze=ke<0?te.id:te.params[ke];if((Ur(ze.name)||ei(ze.name))&&_e(ze.start,"Defining '"+ze.name+"' in strict mode"),ke>=0)for(var Xe=0;Xe<ke;++Xe)ze.name===te.params[Xe].name&&_e(ze.start,"Argument name clash in strict mode")}return Ue(te,oe?"FunctionDeclaration":"FunctionExpression")}T(Hi,"parseFunction");function Ui(te,oe,ge){for(var me=[],Le=!0;!et(te);){if(Le)Le=!1;else if(st(Ft),oe&&V.allowTrailingCommas&&et(te))break;ge&&Z===Ft?me.push(null):me.push(mt(!0))}return me}T(Ui,"parseExprList");function Jt(te){var oe=pt();return te&&V.forbidReserved=="everywhere"&&(te=!1),Z===Ae?(!te&&(V.forbidReserved&&(V.ecmaVersion===3?cs:ds)(ie)||ve&&Ur(ie))&&E.slice(G,Q).indexOf("\\")==-1&&_e(G,"The keyword '"+ie+"' is reserved"),oe.name=ie):te&&Z.keyword?oe.name=Z.keyword:Ht(),se=!1,Ge(),Ue(oe,"Identifier")}T(Jt,"parseIdent")}),t.version||(t=null)}function a(A,V){return(e.acorn||t).parse(A,V)}T(a,"parse");var o={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},l={"-":"__negate","+":"__self"},u=r.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(A){this["__"+A]="#"+A},{__self:function(){return this}});s.inject(u),_.inject(u),We.inject(u);function f(A,V,E){var B=o[V];if(A&&A[B]){var y=A[B](E);return V==="!="?!y:y}switch(V){case"+":return A+E;case"-":return A-E;case"*":return A*E;case"/":return A/E;case"%":return A%E;case"==":return A==E;case"!=":return A!=E}}T(f,"__$__");function d(A,V){var E=l[A];if(V&&V[E])return V[E]();switch(A){case"+":return+V;case"-":return-V}}T(d,"$__");function C(A,V){if(!A)return"";V=V||{};var E=[];function B(ve){for(var _e=0,Pe=E.length;_e<Pe;_e++){var Ee=E[_e];if(Ee[0]>=ve)break;ve+=Ee[1]}return ve}T(B,"getOffset");function y(ve){return A.substring(B(ve.range[0]),B(ve.range[1]))}T(y,"getCode");function k(ve,_e){return A.substring(B(ve.range[1]),B(_e.range[0]))}T(k,"getBetween");function H(ve,_e){for(var Pe=B(ve.range[0]),Ee=B(ve.range[1]),Ie=0,Re=E.length-1;Re>=0;Re--)if(Pe>E[Re][0]){Ie=Re+1;break}E.splice(Ie,0,[Pe,_e.length-Ee+Pe]),A=A.substring(0,Pe)+_e+A.substring(Ee)}T(H,"replaceCode");function j(ve,_e){switch(ve.type){case"UnaryExpression":if(ve.operator in l&&ve.argument.type!=="Literal"){var Pe=y(ve.argument);H(ve,'$__("'+ve.operator+'", '+Pe+")")}break;case"BinaryExpression":if(ve.operator in o&&ve.left.type!=="Literal"){var Ee=y(ve.left),Ie=y(ve.right),Re=k(ve.left,ve.right),Ae=ve.operator;H(ve,"__$__("+Ee+","+Re.replace(new RegExp("\\"+Ae),'"'+Ae+'"')+", "+Ie+")")}break;case"UpdateExpression":case"AssignmentExpression":var Be=_e&&_e.type;if(!(Be==="ForStatement"||Be==="BinaryExpression"&&/^[=!<>]/.test(_e.operator)||Be==="MemberExpression"&&_e.computed)){if(ve.type==="UpdateExpression"){var Pe=y(ve.argument),He="__$__("+Pe+', "'+ve.operator[0]+'", 1)',Ne=Pe+" = "+He;ve.prefix?Ne="("+Ne+")":(Be==="AssignmentExpression"||Be==="VariableDeclarator"||Be==="BinaryExpression")&&(y(_e.left||_e.id)===Pe&&(Ne=He),Ne=Pe+"; "+Ne),H(ve,Ne)}else if(/^.=$/.test(ve.operator)&&ve.left.type!=="Literal"){var Ee=y(ve.left),Ie=y(ve.right),He=Ee+" = __$__("+Ee+', "'+ve.operator[0]+'", '+Ie+")";H(ve,/^\(.*\)$/.test(y(ve))?"("+He+")":He)}}break}}T(j,"handleOverloading");function z(ve){switch(ve.type){case"ExportDefaultDeclaration":H({range:[ve.start,ve.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var _e=ve.declaration,Pe=ve.specifiers;if(_e){var Ee=_e.declarations;Ee&&(Ee.forEach(function(Re){H(Re,"module.exports."+y(Re))}),H({range:[ve.start,_e.start+_e.kind.length]},""))}else if(Pe){var Ie=Pe.map(function(Re){var Ae=y(Re);return"module.exports."+Ae+" = "+Ae+"; "}).join("");Ie&&H(ve,Ie)}break}}T(z,"handleExports");function G(ve,_e,Pe){if(ve){for(var Ee in ve)if(Ee!=="range"&&Ee!=="loc"){var Ie=ve[Ee];if(Array.isArray(Ie))for(var Re=0,Ae=Ie.length;Re<Ae;Re++)G(Ie[Re],ve,Pe);else Ie&&typeof Ie=="object"&&G(Ie,ve,Pe)}Pe.operatorOverloading!==!1&&j(ve,_e),Pe.moduleExports!==!1&&z(ve)}}T(G,"walkAST");function Q(ve){var _e="",Pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ve=(Math.abs(ve)<<1)+(ve<0?1:0);ve||!_e;){var Ee=ve&31;ve>>=5,ve&&(Ee|=32),_e+=Pe[Ee]}return _e}T(Q,"encodeVLQ");var Y=V.url||"",re=V.sourceMaps,Z=V.paperFeatures||{},ie=V.source||A,se=V.offset||0,ue=Ve.agent,le=ue.versionNumber,he=!1,ye=/\r\n|\n|\r/mg,xe;if(re&&(ue.chrome&&le>=30||ue.webkit&&le>=537.76||ue.firefox&&le>=23||ue.node)){if(ue.node)se-=2;else if(D&&Y&&!D.location.href.indexOf(Y)){var be=v.getElementsByTagName("html")[0].innerHTML;se=be.substr(0,be.indexOf(A)+1).match(ye).length+1}he=se>0&&!(ue.chrome&&le>=36||ue.safari&&le>=600||ue.firefox&&le>=40||ue.node);var Te=["AA"+Q(he?0:se)+"A"];Te.length=(A.match(ye)||[]).length+1+(he?se:0),xe={version:3,file:Y,names:[],mappings:Te.join(";AACA"),sourceRoot:"",sources:[Y],sourcesContent:[ie]}}return(Z.operatorOverloading!==!1||Z.moduleExports!==!1)&&G(a(A,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,Z),xe&&(he&&(A=new Array(se+1).join(`
`)+A),/^(inline|both)$/.test(re)&&(A+=`
//# sourceMappingURL=data:application/json;base64,`+p.btoa(unescape(encodeURIComponent(JSON.stringify(xe))))),A+=`
//# sourceURL=`+(Y||"paperscript")),{url:Y,source:ie,code:A,map:xe}}T(C,"compile");function M(A,V,E){Ve=V;var B=V.getView(),y=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(A)&&!/\bnew\s+Tool\b/.test(A)?new Xn:null,k=y?y._events:[],H=["onFrame","onResize"].concat(k),j=[],z=[],G,Q=typeof A=="object"?A:C(A,E);A=Q.code;function Y(le,he){for(var ye in le)(he||!/^_/.test(ye))&&new RegExp("([\\b\\s\\W]|^)"+ye.replace(/\$/g,"\\$")+"\\b").test(A)&&(j.push(ye),z.push(le[ye]))}T(Y,"expose"),Y({__$__:f,$__:d,paper:V,tool:y},!0),Y(V),A="var module = { exports: {} }; "+A;var se=r.each(H,function(le){new RegExp("\\s+"+le+"\\b").test(A)&&(j.push(le),this.push("module.exports."+le+" = "+le+";"))},[]).join(`
`);se&&(A+=`
`+se),A+=`
return module.exports;`;var re=Ve.agent;if(v&&(re.chrome||re.firefox&&re.versionNumber<40)){var Z=v.createElement("script"),ie=v.head||v.getElementsByTagName("head")[0];re.firefox&&(A=`
`+A),Z.appendChild(v.createTextNode("document.__paperscript__ = function("+j+") {"+A+`
}`)),ie.appendChild(Z),G=v.__paperscript__,delete v.__paperscript__,ie.removeChild(Z)}else G=Function(j,A);var se=G&&G.apply(V,z),ue=se||{};return r.each(k,function(le){var he=ue[le];he&&(y[le]=he)}),B&&(ue.onResize&&B.setOnResize(ue.onResize),B.emit("resize",{size:B.size,delta:new s}),ue.onFrame&&B.setOnFrame(ue.onFrame),B.requestUpdate()),se}T(M,"execute");function P(A){if(/^text\/(?:x-|)paperscript$/.test(A.type)&&g.getAttribute(A,"ignore")!=="true"){var V=g.getAttribute(A,"canvas"),E=v.getElementById(V),B=A.src||A.getAttribute("data-src"),y=g.hasAttribute(A,"async"),k="data-paper-scope";if(!E)throw new Error('Unable to find canvas with id "'+V+'"');var H=g.get(E.getAttribute(k))||new g().setup(E);return E.setAttribute(k,H._id),B?Zn.request({url:B,async:y,mimeType:"text/plain",onLoad:function(j){M(j,H,B)}}):M(A.innerHTML,H,A.baseURI),A.setAttribute("data-paper-ignore","true"),H}}T(P,"loadScript");function b(){r.each(v&&v.getElementsByTagName("script"),P)}T(b,"loadAll");function U(A){return A?P(A):b()}return T(U,"load"),D&&(v.readyState==="complete"?setTimeout(b):$e.add(D,{load:b})),{compile:C,execute:M,load:U,parse:a,calculateBinary:f,calculateUnary:d}}.call(this);var Ve=new(g.inject(r.exports,{Base:r,Numerical:I,Key:qt,DomEvent:$e,DomElement:Qe,document:v,window:D,Symbol:fe,PlacedSymbol:ne}));return Ve.agent.node&&ta(Ve),typeof m=="function"&&m.amd?m("paper",Ve):R&&(R.exports=Ve),Ve}).call(di,typeof self=="object"?self:null)})(ns);const Wu=ns.exports;var qu=typeof window<"u",Sa=T(function(R,p,m,D,v){return(R-p)*(v-D)/(m-p)+D},"b"),ba=T(function(R,p,m){return(1-m)*R+m*p},"O"),Or=qu?De.exports.useLayoutEffect:De.exports.useEffect;function Nt(R,p,m,D){var v=De.exports.useRef(m),r=De.exports.useRef(D);De.exports.useEffect(function(){v.current=m,r.current=D}),De.exports.useEffect(function(){var c=R&&"current"in R?R.current:R;if(c){var g=0;c.addEventListener(p,O);var h=r.current;return function(){g=1,c.removeEventListener(p,O),h&&h()}}function O(){g||v.current.apply(this,[].slice.call(arguments))}T(O,"i")},[R,p])}T(Nt,"I");var ul=T(function(R,p,m){m===void 0&&(m=window);var D=De.exports.useRef();De.exports.useEffect(function(){D.current=p},[p]),De.exports.useEffect(function(){if(m&&m.addEventListener){var v=T(function(r){return D.current(r)},"n");return m.addEventListener(R,v),function(){m.removeEventListener(R,v)}}},[R,m])},"j");function lr(){return lr=Object.assign?Object.assign.bind():function(R){for(var p=1;p<arguments.length;p++){var m=arguments[p];for(var D in m)Object.prototype.hasOwnProperty.call(m,D)&&(R[D]=m[D])}return R},lr.apply(this,arguments)}T(lr,"A");var ll=T(function(){var R=De.exports.useState(),p=R[0],m=R[1],D=De.exports.useCallback(function(){m({width:window.innerWidth,height:window.innerHeight})},[]);return Or(function(){return window.addEventListener("resize",D),D(),function(){return window.removeEventListener("resize",D)}},[]),p},"W"),Gu=typeof performance<"u"?performance:Date,Xu=T(function(){return Gu.now()},"V");function Zu(R,p,m){p===void 0&&(p=30),m===void 0&&(m=!1);var D,v,r=(v=De.exports.useRef(D=R),De.exports.useEffect(function(){v.current=D}),v),c=1e3/p,g=De.exports.useRef(0),h=De.exports.useRef(),O=T(function(){return h.current&&clearTimeout(h.current)},"f"),x=[p,m,r];return De.exports.useEffect(function(){return function(){g.current=0,O()}},x),De.exports.useCallback(function(){var I=arguments,S=Xu(),s=T(function(){g.current=S,O(),r.current.apply(null,I)},"t"),w=g.current;if(m&&w===0)return s();if(S-w>c){if(w>0)return s();g.current=S}O(),h.current=setTimeout(function(){s(),g.current=0},c)},x)}T(Zu,"J");function bn(R,p,m){var D=useState(R);return[D[0],Zu(D[1],p,m)]}T(bn,"Q");function fl(R,p){p===void 0&&(p={});var m=p.fps,D=m===void 0?30:m,v=p.enterDelay,r=v===void 0?0:v,c=p.leaveDelay,g=c===void 0?0:c,h=De.exports.useReducer(function(F,K){var X=F.mouse,L=F.context,W=T(function($,q){if(typeof window>"u")return $;var ee,J=q.event,ae=(ee="touches"in J?J.touches[0]:J).clientX,ne=ee.clientY,fe=ee.screenX,pe=ee.screenY,ce=ee.pageX,Ce=ce===void 0?0:ce,de=ee.pageY,Oe=de===void 0?0:de,Se=q.element.getBoundingClientRect(),we=Ce-Se.left-(window.pageXOffset||window.scrollX),Me=Oe-Se.top-(window.pageYOffset||window.scrollY);return"touches"in J&&(we<0||Me<0||we>Se.width||Me>Se.height)?Object.assign(Object.assign({},$),{context:Object.assign(Object.assign({},$.context),{hoverStatus:"leave",touchStatus:"end"})}):{context:Object.assign(Object.assign({},$.context),{hoverStatus:"enter"}),mouse:Object.assign(Object.assign({},$.mouse),{x:we,y:Me,pageX:Ce,pageY:Oe,clientX:ae,clientY:ne,screenX:fe,screenY:pe,elementWidth:Se.width,elementHeight:Se.height,isOver:!0,isTouch:"touches"in J})}},"o");return K.type==="mousemove"?L.touchStatus==="end"?F:W(F,K):K.type==="touchmove"?W({context:Object.assign(Object.assign({},L),{touchStatus:"start"}),mouse:X},K):K.type==="touchdown"?W({context:Object.assign(Object.assign({},L),{touchStatus:"start"}),mouse:Object.assign(Object.assign({},X),{isDown:!0})},K):K.type==="mousedown"?{context:L,mouse:Object.assign(Object.assign({},X),{isDown:!0})}:K.type==="mouseup"?{context:L,mouse:Object.assign(Object.assign({},X),{isDown:!1})}:K.type==="mouseleave"?{context:Object.assign(Object.assign({},L),{hoverStatus:"leave"}),mouse:Object.assign(Object.assign({},X),{isOver:!1})}:K.type==="touchleave"?{context:Object.assign(Object.assign({},L),{hoverStatus:"leave",touchStatus:"end"}),mouse:Object.assign(Object.assign({},X),{isOver:!1,isDown:!1})}:K.type==="activeStatus"?{context:Object.assign(Object.assign({},L),{activeStatus:K.value}),mouse:X}:F},{mouse:Pa,context:Ku}),O=h[0],x=h[1],I=bn(function(F){var K=R&&"current"in R?R.current:R;K&&x({type:"mousemove",event:F,element:K})},D,!0),S=bn(function(F){var K=R&&"current"in R?R.current:R;K&&x({type:"touchmove",event:F,element:K})},D,!0),s=bn(function(){return x({type:"mouseleave"})},D,!1),w=bn(function(F){var K=R&&"current"in R?R.current:R;K&&x("touches"in F?{type:"touchdown",element:K,event:F}:{type:"mousedown",element:K,event:F})},D,!0),_=bn(function(){return x({type:"mouseup"})},D,!1),N=bn(function(){return x({type:"touchleave"})},D,!1);return Nt(R,"mouseenter",I),Nt(R,"mousemove",I),Nt(R,"mouseleave",s),Nt(R,"mousedown",w),Nt(typeof window<"u"?window:null,"mousedown",w),Nt(typeof window<"u"?window:null,"mouseup",_),Nt(R,"touchstart",w),Nt(R,"touchmove",S),Nt(R,"touchend",N),Nt(R,"touchcancel",N),useEffect(function(){if(O.context.hoverStatus==="enter"){if(r){var F=setTimeout(function(){return x({type:"activeStatus",value:"active"})},r);return function(){return clearTimeout(F)}}x({type:"activeStatus",value:"active"})}else{if(g){var K=setTimeout(function(){return x({type:"activeStatus",value:"inactive"})},g);return function(){return clearTimeout(K)}}x({type:"activeStatus",value:"inactive"})}},[O.context.hoverStatus,r,g]),O.context.activeStatus==="active"?O.mouse:Pa}T(fl,"Z");var Pa={x:null,y:null,pageX:null,pageY:null,clientX:null,clientY:null,screenX:null,screenY:null,elementWidth:null,elementHeight:null,isOver:!1,isDown:!1,isTouch:!1},Ku={hoverStatus:"idle",touchStatus:"idle",activeStatus:"inactive"};function Ju(){var R=De.exports.useState({x:null,y:null}),p=R[0],m=R[1];return De.exports.useEffect(function(){var D=T(function(v){m({x:v.clientX,y:v.clientY})},"e");return document.addEventListener("mousemove",D),function(){document.removeEventListener("mousemove",D)}},[]),p}T(Ju,"ne");var hl=T(function(R,p){var m=Ju(),D=m.x,v=m.y,r=wn(0),c=wn(0),g=wn(0),h=wn(0),O=wn(0),x=wn(0),I=qs("translate("+r.get()+"px, "+g.get()+"px) rotate("+O.get()+"deg)"),S="brightness("+x.get()+")";return De.exports.useEffect(function(){var s=R.current.getBoundingClientRect(),w=p.current.getBoundingClientRect(),_=Math.abs(D-s.left)-w.width/2,N=Math.abs(v-s.top)-w.height/2;r.set(_),g.set(N)},[D,v]),De.exports.useEffect(function(){function s(){var N={x:c.get()-r.get(),y:h.get()-g.get()};c.set(ba(c.get(),r.getPrevious(),.08)),h.set(ba(h.get(),g.getPrevious(),.08));var F,K=(F=Math.abs(N.x))<=0?0:F>=100?100:F,X=Sa(K,0,100,0,N.x<0?33:-33);Gs(O,X,{duration:.25,ease:"linear"});var L=Sa(K,0,100,1,3);x.set(L)}T(s,"e");var w=r.onChange(s),_=g.onChange(s);return function(){w(),_()}},[]),{transform:I,filter:S}},"re");ju(!1,function(R){R===void 0&&(R=940);var p=De.exports.useState(!1),m=p[0],D=p[1];return De.exports.useEffect(function(){function v(){var r=window.innerWidth;D(r<R)}return T(v,"n"),window.addEventListener("resize",v),v(),function(){return window.removeEventListener("resize",v)}},[]),m});var cl=T(function(R){var p=R.cookieAcceptKey,m=R.onAccepted,D=R.onDeclined,v=De.exports.useState(),r=v[0],c=v[1];return Or(function(){window.localStorage.getItem(process.env.NEXT_PUBLIC_COOKIE_ACCEPT_KEY||p)!==null?(c(!0),m()):(c(!1),D())},[]),r},"se"),dl=T(function(R){var p=R.ref,m=De.exports.useState(),D=m[0],v=m[1];return Or(function(){if(!D&&p&&p.current){var r=new Wu.Project(p.current);v(r)}},[D,p]),D},"he"),gl=T(function(R,p){p===void 0&&(p="2d");var m=De.exports.useRef(null);return De.exports.useEffect(function(){var D=m.current.getContext(p),v=requestAnimationFrame(T(function r(){v=requestAnimationFrame(r),R(D)},"t"));return function(){return cancelAnimationFrame(v)}},[R,p]),m},"we"),vl=T(function(R,p){var m=De.exports.useCallback(function(){p({type:"ADD_CURSOR_BORDER"})},[p]),D=De.exports.useCallback(function(){p({type:"REMOVE_CURSOR_BORDER"})},[p]);return lr({},R,{addCursorColor:De.exports.useCallback(function(v){p({type:"ADD_CURSOR_COLOR",payload:v})},[p]),resetCursorColor:De.exports.useCallback(function(){p({type:"RESET_CURSOR_COLOR"})},[p]),addCursorBorder:m,removeCursorBorder:D,lockCursorPosition:De.exports.useCallback(function(v){p({type:"LOCK_CURSOR_POSITION",payload:v})},[p])})},"pe");export{Or as L,Wu as P,ll as W,fl as Z,dl as h,ul as j,Ju as n,vl as p,hl as r,cl as s,gl as w};
//# sourceMappingURL=index.132c8052.js.map
