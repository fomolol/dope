{
  "version": 3,
  "file": "ASCIIGalaxy.stories-d23d8a76.js",
  "sources": [
    "../../src/components/ASCIIGalaxy/ASCIIGalaxy.jsx",
    "../../src/components/ASCIIGalaxy/ASCIIGalaxy.stories.jsx"
  ],
  "sourcesContent": [
    "/**\n * @file ASCIIGalaxy.js\n */\nimport { useState, useRef, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport { useWindowSize, useLayoutEffect } from '@fomolol/tacklebox'\n\nimport s from './ASCIIGalaxy.module.css'\n\n/* Scale a value from one range to another\n * Example of use:\n *\n * // Convert 33 from a 0-100 range to a 0-65535 range\n * var n = scaleValue(33, [0,100], [0,65535]);\n *\n * // Ranges don't have to be positive\n * var n = scaleValue(0, [-50,+50], [0,65535]);\n *\n * Ranges are defined as arrays of two values, inclusive\n *\n * The ~~ trick on return value does the equivalent of Math.floor, just faster.\n *\n */\nconst scaleValue = (value, from, to) => {\n  var scale = (to[1] - to[0]) / (from[1] - from[0])\n  var capped = Math.min(from[1], Math.max(from[0], value)) - from[0]\n  return ~~(capped * scale + to[0])\n}\n\nconst ASCIIGalaxy = ({\n  tagName: Tag = 'pre',\n  className = 'absolute top-0 left-0 flex items-center justify-center w-screen h-screen overflow-hidden font-mono text-white opacity-50',\n  variant = 'default',\n  width: tWidth,\n  height: tHeight,\n  stars = 10,\n  trails = 20,\n  ds = ' ',\n}) => {\n  const { height: _height, width: _width } = useWindowSize()\n  const [galaxy, setGalaxy] = useState('')\n\n  const field = useRef([])\n\n  /**\n   * createField\n   */\n  const createField = useCallback(\n    ({ width, height }) => {\n      for (var y = 0; y < height; y++) {\n        field.current[y] = []\n        for (var x = 0; x < width; x++) {\n          field.current[y][x] = ds\n        }\n      }\n    },\n    [field, ds]\n  )\n\n  /**\n   * buildTrail\n   * @param {*} props\n   * @returns\n   */\n  const buildTrail = useCallback(\n    ({ width, height, symbols = ['.', '_', '-', '~', '°', '+'] }) => {\n      try {\n        var ys = Math.floor(Math.random() * height)\n        var xs = Math.floor(Math.random() * width)\n        var len = Math.floor(Math.random() * (width - xs - 1) + 1)\n        var yc = 0\n\n        for (var i = 0; i < len; i++) {\n          var rndSym = Math.floor(Math.random() * symbols.length)\n          var rndY = Math.floor(Math.random() * (3 - 1 + 1)) + 1\n          if (rndY == 1) {\n            yc += 1\n          } else if (rndY == 2) {\n            yc -= 1\n          } else {\n            yc = yc\n          }\n\n          if (ys + yc > height || ys - yc < 0) return\n          try {\n            field.current[ys + yc][xs + i] = symbols[rndSym]\n          } catch (e) {\n            console.log(e)\n          }\n        }\n      } catch (err) {\n        console.error(err)\n      }\n    },\n    [field]\n  )\n\n  /**\n   * buildStar\n   * @param {*} props\n   */\n  const buildStar = useCallback(\n    ({ width, height }) => {\n      try {\n        var rndStar = Math.floor(Math.random() * 6)\n        var ys = Math.floor(Math.random() * height)\n        var xs = Math.floor(Math.random() * width)\n        if (\n          ys + 1 > height - 1 ||\n          ys - 1 < 0 ||\n          xs + 1 > width - 1 ||\n          xs - 1 < 0\n        ) {\n          field.current[ys][xs] = ds\n        } else {\n          switch (rndStar) {\n            case 0:\n              //  |\n              // -o-\n              //  |\n              field.current[ys][xs] = 'o'\n              field.current[ys + 1][xs] = '|'\n              field.current[ys - 1][xs] = '|'\n              field.current[ys][xs + 1] = '-'\n              field.current[ys][xs - 1] = '-'\n              break\n            case 1:\n              field.current[ys][xs] = '.'\n              break\n            case 2:\n              field.current[ys][xs] = `'`\n              break\n            case 3:\n              field.current[ys][xs] = '~'\n              field.current[ys][xs + 1] = '°'\n              break\n            case 4:\n              field.current[ys][xs] = ','\n              break\n            case 5:\n              field.current[ys][xs] = '+'\n              break\n            default:\n              field.current[ys][xs] = '*'\n              break\n          }\n        }\n      } catch (err) {\n        console.error(err)\n      }\n    },\n    [field, ds]\n  )\n\n  /**\n   * render\n   * @returns\n   */\n  const render = useCallback(\n    ({ width, height }) => {\n      let _galaxy = ''\n      for (var y = 0; y < height; y++) {\n        if (!y == 0) _galaxy += '\\n'\n        for (var x = 0; x < width; x++) {\n          _galaxy += field.current[y][x]\n        }\n      }\n      return _galaxy\n    },\n    [field]\n  )\n\n  useLayoutEffect(() => {\n    if (!galaxy && _width && _height) {\n      // let width = tWidth || _width;\n      // let height = tHeight || _height;\n      let width = scaleValue(tWidth || _width, [0, tWidth || _width], [30, 200])\n      let height = scaleValue(\n        tHeight || _height,\n        [0, tHeight || _height],\n        [10, 50]\n      )\n\n      createField({ width, height })\n\n      for (var i = 0; i < trails; i++) {\n        buildTrail({ width, height })\n      }\n\n      for (var i = 0; i < stars; i++) {\n        buildStar({ width, height })\n      }\n\n      const data = render({ width, height })\n      setGalaxy(data)\n    }\n  }, [\n    galaxy,\n    ds,\n    field,\n    buildStar,\n    buildTrail,\n    createField,\n    render,\n    tHeight,\n    tWidth,\n    _height,\n    _width,\n    stars,\n    trails,\n  ])\n\n  // useEffect(() => {\n  //   const int = setInterval(() => setGalaxy(null), 2000);\n\n  //   return () => clearInterval(int);\n  // }, []);\n\n  return (\n    <Tag\n      className={`${s.a_s_c_i_i_galaxy} ${\n        s[`a_s_c_i_i_galaxy__${variant}`]\n      } ${className}`}\n    >\n      <code>{`${galaxy}`}</code>\n    </Tag>\n  )\n}\n\nASCIIGalaxy.propTypes = {\n  tagName: PropTypes.string,\n  className: PropTypes.string,\n  variant: PropTypes.oneOf(['default']),\n  children: PropTypes.node,\n}\n\nexport default ASCIIGalaxy\n",
    "/**\n * ASCIIGalaxy.jsx\n */\nimport React from 'react';\n\n// Component(s)\nimport ASCIIGalaxy from './ASCIIGalaxy';\nexport default {\n  title: 'ASCIIGalaxy',\n  component: ASCIIGalaxy,\n  // Sets the layout parameter component wide.\n  parameters: {\n    layout: 'centered'\n  }\n};\nexport const Default = () => <ASCIIGalaxy />;\nDefault.storyName = 'default';\nDefault.parameters = {\n  ...Default.parameters,\n  storySource: {\n    source: \"() => <ASCIIGalaxy />\",\n    ...Default.parameters?.storySource\n  }\n};"
  ],
  "names": [
    "scaleValue",
    "value",
    "from",
    "to",
    "scale",
    "capped",
    "ASCIIGalaxy",
    "Tag",
    "className",
    "variant",
    "tWidth",
    "tHeight",
    "stars",
    "trails",
    "ds",
    "_height",
    "_width",
    "useWindowSize",
    "galaxy",
    "setGalaxy",
    "useState",
    "field",
    "useRef",
    "createField",
    "useCallback",
    "width",
    "height",
    "y",
    "x",
    "buildTrail",
    "symbols",
    "ys",
    "xs",
    "len",
    "yc",
    "i",
    "rndSym",
    "rndY",
    "e",
    "err",
    "buildStar",
    "rndStar",
    "render",
    "_galaxy",
    "useLayoutEffect",
    "data",
    "jsx",
    "s",
    "PropTypes",
    "ASCIIGalaxy$1",
    "ASCIIGalaxy_stories",
    "Default",
    "_a"
  ],
  "mappings": "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"
}
