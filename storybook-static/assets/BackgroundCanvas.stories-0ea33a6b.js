import{b as I}from"./jsx-runtime-4ad9da42.js";import{r as o}from"./index-10e52e8a.js";import{p as P}from"./index-67732e07.js";import{e as ie,u as de,c as fe,i as pe,E as ve,B as me,a as he,b as _e,T as be,d as xe}from"./index-6f0019d1.esm-ad9d35eb.js";import{_ as Z}from"./extends-98964cd2.js";import"./_commonjsHelpers-35101cd5.js";function j(t,e,r){var n,s,a,i,u;e==null&&(e=100);function c(){var f=Date.now()-i;f<e&&f>=0?n=setTimeout(c,e-f):(n=null,r||(u=t.apply(a,s),a=s=null))}var d=function(){a=this,s=arguments,i=Date.now();var f=r&&!n;return n||(n=setTimeout(c,e)),f&&(u=t.apply(a,s),a=s=null),u};return d.clear=function(){n&&(clearTimeout(n),n=null)},d.flush=function(){n&&(u=t.apply(a,s),a=s=null,clearTimeout(n),n=null)},d}j.debounce=j;var U=j;function ge(t){let{debounce:e,scroll:r,polyfill:n,offsetSize:s}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const a=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[i,u]=o.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=o.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:i}),d=e?typeof e=="number"?e:e.scroll:null,f=e?typeof e=="number"?e:e.resize:null,_=o.exports.useRef(!1);o.exports.useEffect(()=>(_.current=!0,()=>void(_.current=!1)));const[k,C,v]=o.exports.useMemo(()=>{const l=()=>{if(!c.current.element)return;const{left:L,top:z,width:N,height:S,bottom:D,right:T,x,y:g}=c.current.element.getBoundingClientRect(),p={left:L,top:z,width:N,height:S,bottom:D,right:T,x,y:g};c.current.element instanceof HTMLElement&&s&&(p.height=c.current.element.offsetHeight,p.width=c.current.element.offsetWidth),Object.freeze(p),_.current&&!Ce(c.current.lastBounds,p)&&u(c.current.lastBounds=p)};return[l,f?U(l,f):l,d?U(l,d):l]},[u,s,d,f]);function b(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(l=>l.removeEventListener("scroll",v,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function O(){!c.current.element||(c.current.resizeObserver=new a(v),c.current.resizeObserver.observe(c.current.element),r&&c.current.scrollContainers&&c.current.scrollContainers.forEach(l=>l.addEventListener("scroll",v,{capture:!0,passive:!0})))}const B=l=>{!l||l===c.current.element||(b(),c.current.element=l,c.current.scrollContainers=ee(l),O())};return we(v,Boolean(r)),Ee(C),o.exports.useEffect(()=>{b(),O()},[r,v,C]),o.exports.useEffect(()=>b,[]),[B,i,k]}function Ee(t){o.exports.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function we(t,e){o.exports.useEffect(()=>{if(e){const r=t;return window.addEventListener("scroll",r,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",r,!0)}},[t,e])}function ee(t){const e=[];if(!t||t===document.body)return e;const{overflow:r,overflowX:n,overflowY:s}=window.getComputedStyle(t);return[r,n,s].some(a=>a==="auto"||a==="scroll")&&e.push(t),[...e,...ee(t.parentElement)]}const ye=["x","y","top","bottom","left","right","width","height"],Ce=(t,e)=>ye.every(r=>t[r]===e[r]);var Oe=Object.defineProperty,ze=Object.defineProperties,Re=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,A=(t,e,r)=>e in t?Oe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,G=(t,e)=>{for(var r in e||(e={}))Pe.call(e,r)&&A(t,r,e[r]);if(X)for(var r of X(e))ke.call(e,r)&&A(t,r,e[r]);return t},Be=(t,e)=>ze(t,Re(e));function F(t,e,r){if(!t)return;if(r(t)===!0)return t;let n=e?t.return:t.child;for(;n;){const s=F(n,e,r);if(s)return s;n=e?null:n.sibling}}function te(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const q=te(o.exports.createContext(null));class re extends o.exports.Component{render(){return o.exports.createElement(q.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:Le,ReactCurrentDispatcher:Ne}=o.exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Se(){const t=o.exports.useContext(q);if(!t)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=o.exports.useId();return o.exports.useMemo(()=>{var n;return(n=Le.current)!=null?n:F(t,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}})},[t,e])}const w=[],J=new WeakMap;function De(){var t;const e=Se();w.splice(0,w.length),F(e,!0,r=>{var n;const s=(n=r.type)==null?void 0:n._context;s&&s!==q&&w.push(te(s))});for(const r of w){const n=(t=Ne.current)==null?void 0:t.readContext(r);J.set(r,n)}return o.exports.useMemo(()=>w.reduce((r,n)=>s=>o.exports.createElement(r,null,o.exports.createElement(n.Provider,Be(G({},s),{value:J.get(n)}))),r=>o.exports.createElement(re,G({},r))),[])}const M={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Te(t){const{handlePointer:e}=xe(t);return{priority:1,enabled:!0,compute(r,n,s){n.pointer.set(r.offsetX/n.size.width*2-1,-(r.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(M).reduce((r,n)=>({...r,[n]:e(n)}),{}),connect:r=>{var n;const{set:s,events:a}=t.getState();a.disconnect==null||a.disconnect(),s(i=>({events:{...i.events,connected:r}})),Object.entries((n=a.handlers)!=null?n:[]).forEach(([i,u])=>{const[c,d]=M[i];r.addEventListener(c,u,{passive:d})})},disconnect:()=>{const{set:r,events:n}=t.getState();if(n.connected){var s;Object.entries((s=n.handlers)!=null?s:[]).forEach(([a,i])=>{if(n&&n.connected instanceof HTMLElement){const[u]=M[a];n.connected.removeEventListener(u,i)}}),r(a=>({events:{...a.events,connected:void 0}}))}}}}const Me=o.exports.forwardRef(function({children:e,fallback:r,resize:n,style:s,gl:a,events:i=Te,eventSource:u,eventPrefix:c,shadows:d,linear:f,flat:_,legacy:k,orthographic:C,frameloop:v,dpr:b,performance:O,raycaster:B,camera:l,onPointerMissed:L,onCreated:z,...N},S){o.exports.useMemo(()=>ie(be),[]);const D=De(),[T,x]=ge({scroll:!0,debounce:{scroll:50,resize:0},...n}),g=o.exports.useRef(null),p=o.exports.useRef(null),[E,oe]=o.exports.useState(null);o.exports.useImperativeHandle(S,()=>g.current);const W=de(L),[H,se]=o.exports.useState(!1),[$,ce]=o.exports.useState(!1);if(H)throw H;if($)throw $;const R=o.exports.useRef(null);x.width>0&&x.height>0&&E&&(R.current||(R.current=fe(E)),R.current.configure({gl:a,events:i,shadows:d,linear:f,flat:_,legacy:k,orthographic:C,frameloop:v,dpr:b,performance:O,raycaster:B,camera:l,size:x,onPointerMissed:(...m)=>W.current==null?void 0:W.current(...m),onCreated:m=>{m.events.connect==null||m.events.connect(u?pe(u)?u.current:u:p.current),c&&m.setEvents({compute:(Y,h)=>{const ue=Y[c+"X"],le=Y[c+"Y"];h.pointer.set(ue/h.size.width*2-1,-(le/h.size.height)*2+1),h.raycaster.setFromCamera(h.pointer,h.camera)}}),z==null||z(m)}}),R.current.render(o.exports.createElement(D,null,o.exports.createElement(ve,{set:ce},o.exports.createElement(o.exports.Suspense,{fallback:o.exports.createElement(me,{set:se})},e))))),he(()=>{oe(g.current)},[]),o.exports.useEffect(()=>{if(E)return()=>_e(E)},[E]);const ae=u?"none":"auto";return o.exports.createElement("div",Z({ref:p,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ae,...s}},N),o.exports.createElement("div",{ref:T,style:{width:"100%",height:"100%"}},o.exports.createElement("canvas",{ref:g,style:{display:"block"}},r)))}),Ie=o.exports.forwardRef(function(e,r){return o.exports.createElement(re,null,o.exports.createElement(Me,Z({},e,{ref:r})))}),je="_background_canvas_9dqgr_4",Fe="_background_canvas__default_9dqgr_8",K={background_canvas:je,background_canvas__default:Fe},V=({tagName:t="div",className:e="pointer-events-none",variant:r="default",children:n,raycaster:s=!1})=>I(t,{className:`${K.background_canvas} ${K[`background_canvas__${r}`]} ${e} fixed top-0 left-0 z-0 w-screen h-screen`,children:I(Ie,{raycaster:s,style:{width:"100%",height:"100%"},children:n})});V.propTypes={tagName:P.exports.string,className:P.exports.string,variant:P.exports.oneOf(["default"]),children:P.exports.node};const ne=V;V.__docgenInfo={description:"",methods:[],displayName:"BackgroundCanvas",props:{tagName:{defaultValue:{value:"'div'",computed:!1},type:{name:"string"},required:!1,description:""},className:{defaultValue:{value:"'pointer-events-none'",computed:!1},type:{name:"string"},required:!1,description:""},variant:{defaultValue:{value:"'default'",computed:!1},type:{name:"enum",value:[{value:"'default'",computed:!1}]},required:!1,description:""},raycaster:{defaultValue:{value:"false",computed:!1},required:!1},children:{type:{name:"node"},required:!1,description:""}}};const Xe={title:"BackgroundCanvas",component:ne,parameters:{layout:"centered"}},y=()=>I(ne,{});y.storyName="default";var Q;y.parameters={...y.parameters,storySource:{source:"() => <BackgroundCanvas />",...(Q=y.parameters)==null?void 0:Q.storySource}};y.__docgenInfo={description:"",methods:[],displayName:"Default"};const Ae=["Default"];export{y as Default,Ae as __namedExportsOrder,Xe as default};
//# sourceMappingURL=BackgroundCanvas.stories-0ea33a6b.js.map
