import{a as _,F as S,b as d}from"./jsx-runtime-4ad9da42.js";import{r as o}from"./index-10e52e8a.js";import{p as y}from"./index-67732e07.js";import{a as q,b as B}from"./lib-9c3fa197.js";import{E as N}from"./index-f8810480.js";import"./_commonjsHelpers-35101cd5.js";import"./client-faf3de5f.js";import"./index-698e69ac.js";import"./use-motion-template-472ea312.js";import"./animate-2454e827.js";function R(e,r,t,i){var a,n;function u(s){a=r(u,i),e(s-(n||s)),n=s}return{start:function(){a||u(0)},stop:function(){t(a),a=null,n=0}}}function U(e){return R(e,requestAnimationFrame,cancelAnimationFrame)}function b(e,r,t){function i(a){(!t||t(e,r))&&a.stopImmediatePropagation()}return e.addEventListener(r,i),i}function l(e,r,t,i){function a(){return t[r]}function n(u){t[r]=u}i&&n(e[r]),Object.defineProperty(e,r,{get:a,set:n})}function k(e,r,t){t.addEventListener(r,function(){return e.dispatchEvent(new Event(r))})}function p(e,r){Promise.resolve().then(function(){e.dispatchEvent(new Event(r))})}var C=typeof document=="object"&&"object-fit"in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches,m="bfred-it:iphone-inline-video",f="bfred-it:iphone-inline-video:event",E="bfred-it:iphone-inline-video:nativeplay",D="bfred-it:iphone-inline-video:nativepause";function H(e){var r=new Audio;return k(e,"play",r),k(e,"playing",r),k(e,"pause",r),r.crossOrigin=e.crossOrigin,r.src=e.src||e.currentSrc||"data:",r}var F=[],z=0,I;function g(e,r,t){(I||0)+200<Date.now()&&(e[f]=!0,I=Date.now()),t||(e.currentTime=r),F[++z%3]=r*100|0/100}function x(e){return e.driver.currentTime>=e.video.duration}function M(e){var r=this;r.video.readyState>=r.video.HAVE_FUTURE_DATA?(r.hasAudio||(r.driver.currentTime=r.video.currentTime+e*r.video.playbackRate/1e3,r.video.loop&&x(r)&&(r.driver.currentTime=0)),g(r.video,r.driver.currentTime)):r.video.networkState===r.video.NETWORK_IDLE&&r.video.buffered.length===0&&r.video.load(),r.video.ended&&(delete r.video[f],r.video.pause(!0))}function W(){var e=this,r=e[m];if(e.webkitDisplayingFullscreen){e[E]();return}r.driver.src!=="data:"&&r.driver.src!==e.src&&(g(e,0,!0),r.driver.src=e.src),e.paused&&(r.paused=!1,e.buffered.length===0&&e.load(),r.driver.play(),r.updater.start(),r.hasAudio||(p(e,"play"),r.video.readyState>=r.video.HAVE_ENOUGH_DATA&&p(e,"playing")))}function $(e){var r=this,t=r[m];t.driver.pause(),t.updater.stop(),r.webkitDisplayingFullscreen&&r[D](),!(t.paused&&!e)&&(t.paused=!0,t.hasAudio||p(r,"pause"),r.ended&&!r.webkitDisplayingFullscreen&&(r[f]=!0,p(r,"ended")))}function G(e,r){var t={};e[m]=t,t.paused=!0,t.hasAudio=r,t.video=e,t.updater=U(M.bind(t)),r?t.driver=H(e):(e.addEventListener("canplay",function(){e.paused||p(e,"playing")}),t.driver={src:e.src||e.currentSrc||"data:",muted:!0,paused:!0,pause:function(){t.driver.paused=!0},play:function(){t.driver.paused=!1,x(t)&&g(e,0)},get ended(){return x(t)}}),e.addEventListener("emptied",function(){var i=!t.driver.src||t.driver.src==="data:";t.driver.src&&t.driver.src!==e.src&&(g(e,0,!0),t.driver.src=e.src,i||!r&&e.autoplay?t.driver.play():t.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?r&&t.driver.buffered.length===0&&t.driver.load():(e.pause(),e[E]())}),r&&(e.addEventListener("webkitendfullscreen",function(){t.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){F.indexOf(e.currentTime*100|0/100)<0&&(t.driver.currentTime=e.currentTime)}))}function L(e){var r=e[f];return delete e[f],!e.webkitDisplayingFullscreen&&!r}function K(e){var r=e[m];e[E]=e.play,e[D]=e.pause,e.play=W,e.pause=$,l(e,"paused",r.driver),l(e,"muted",r.driver,!0),l(e,"playbackRate",r.driver,!0),l(e,"ended",r.driver),l(e,"loop",r.driver,!0),b(e,"seeking",function(t){return!t.webkitDisplayingFullscreen}),b(e,"seeked",function(t){return!t.webkitDisplayingFullscreen}),b(e,"timeupdate",L),b(e,"ended",L)}function Y(e,r){if(r===void 0&&(r={}),!e[m]&&!(!r.everywhere&&(!C||!(r.iPad||r.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent)))){e.pause();var t=e.autoplay;e.autoplay=!1,G(e,!e.muted),K(e),e.classList.add("IIV"),e.muted&&t&&(e.play(),e.addEventListener("playing",function i(){e.autoplay=!0,e.removeEventListener("playing",i)})),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}const T=({className:e="absolute inset-0 z-0 object-cover w-screen h-screen min-h-screen overflow-hidden min-w-screen mix-blend-normal brightness-125",src:r={mobile:"/video/2890361953_mobile",tablet:"/video/2890361919_ipad_768x1024_1",desktop:"/video/2890361919_desktop"},style:t={},loop:i=!0,forcePlay:a=!1})=>{const n=o.exports.useRef(),[u,s]=o.exports.useState(r==null?void 0:r.desktop);o.exports.useEffect(()=>{n!=null&&n.current&&Y(n.current,{iPad:!0})},[u,n]);let{mobile:P,tablet:v,desktop:V}=r;v||(v=V);const O=J=>{};N(()=>{q&&s(P),B&&s(v)},[r,V,P,v]);const h=o.exports.useCallback(()=>{!n||!n.current||i&&n.current.play()},[i]),w=o.exports.useCallback(()=>{!n||!n.current||i||(n.current.currentTime=n.current.duration-.5,n.current.pause())},[i]);return o.exports.useEffect(()=>(a&&(window.addEventListener("focus",h),window.addEventListener("blur",w)),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",w)}),[a,w,h]),_(S,{children:[_("video",{ref:n,playsInline:!0,autoPlay:!0,muted:!0,loop:i,className:e,style:t,onLoadedData:O,children:[d("source",{src:`${u}.mp4`,type:"video/mp4"}),d("p",{className:"flex items-center justify-center text-xl text-white max-w-1/2",children:"Your browser does not support the video tag."})]}),d("div",{className:"absolute inset-0 flex items-center justify-center font-sans",children:_("p",{className:"flex h-[10vw] w-[50vw] flex-col items-center justify-center bg-black text-center leading-none",children:[d("span",{className:"text-[7rem] font-black leading-none tracking-widest text-white",children:"CENSORED"}),d("span",{className:"text-[1.5rem] font-light tracking-normal text-white/50",children:"(watermarks)"})]})})]})};T.propTypes={src:y.exports.object,style:y.exports.object,loop:y.exports.bool,className:y.exports.string};const j=T;T.__docgenInfo={description:"",methods:[],displayName:"VideoBackground",props:{className:{defaultValue:{value:"'absolute inset-0 z-0 object-cover w-screen h-screen min-h-screen overflow-hidden min-w-screen mix-blend-normal brightness-125'",computed:!1},type:{name:"string"},required:!1,description:""},src:{defaultValue:{value:`{
  mobile: '/video/2890361953_mobile',
  tablet: '/video/2890361919_ipad_768x1024_1',
  desktop: '/video/2890361919_desktop',
}`,computed:!1},type:{name:"object"},required:!1,description:""},style:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},loop:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},forcePlay:{defaultValue:{value:"false",computed:!1},required:!1}}};const ue={title:"VideoBackground",component:j,parameters:{layout:"centered"}},c=()=>d(j,{});c.storyName="default";var A;c.parameters={...c.parameters,storySource:{source:"() => <VideoBackground />",...(A=c.parameters)==null?void 0:A.storySource}};c.__docgenInfo={description:"",methods:[],displayName:"Default"};const oe=["Default"];export{c as Default,oe as __namedExportsOrder,ue as default};
//# sourceMappingURL=VideoBackground.stories-d3507eb8.js.map
