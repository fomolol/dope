{"version":3,"file":"animate-2454e827.js","sources":["../../node_modules/framer-motion/dist/es/context/MotionConfigContext.mjs","../../node_modules/framer-motion/dist/es/utils/is-browser.mjs","../../node_modules/framer-motion/dist/es/utils/use-isomorphic-effect.mjs","../../node_modules/framer-motion/dist/es/utils/use-constant.mjs","../../node_modules/framer-motion/dist/es/value/utils/is-motion-value.mjs","../../node_modules/style-value-types/dist/es/utils.mjs","../../node_modules/style-value-types/dist/es/numbers/index.mjs","../../node_modules/style-value-types/dist/es/numbers/units.mjs","../../node_modules/style-value-types/dist/es/color/utils.mjs","../../node_modules/style-value-types/dist/es/color/hsla.mjs","../../node_modules/style-value-types/dist/es/color/rgba.mjs","../../node_modules/style-value-types/dist/es/color/hex.mjs","../../node_modules/style-value-types/dist/es/color/index.mjs","../../node_modules/style-value-types/dist/es/complex/index.mjs","../../node_modules/style-value-types/dist/es/complex/filter.mjs","../../node_modules/framer-motion/dist/es/render/dom/value-types/type-int.mjs","../../node_modules/framer-motion/dist/es/render/dom/value-types/number.mjs","../../node_modules/framer-motion/dist/es/animation/utils/is-keyframes-target.mjs","../../node_modules/framer-motion/dist/es/utils/resolve-value.mjs","../../node_modules/framer-motion/dist/es/utils/pipe.mjs","../../node_modules/framer-motion/dist/es/utils/time-conversion.mjs","../../node_modules/hey-listen/dist/hey-listen.es.js","../../node_modules/framer-motion/dist/es/utils/noop.mjs","../../node_modules/framer-motion/dist/es/easing/cubic-bezier.mjs","../../node_modules/framer-motion/dist/es/easing/modifiers/mirror.mjs","../../node_modules/framer-motion/dist/es/easing/modifiers/reverse.mjs","../../node_modules/framer-motion/dist/es/easing/ease.mjs","../../node_modules/framer-motion/dist/es/easing/circ.mjs","../../node_modules/framer-motion/dist/es/easing/back.mjs","../../node_modules/framer-motion/dist/es/easing/anticipate.mjs","../../node_modules/framer-motion/dist/es/animation/utils/easing.mjs","../../node_modules/framer-motion/dist/es/animation/utils/is-animatable.mjs","../../node_modules/framer-motion/dist/es/animation/utils/default-transitions.mjs","../../node_modules/framer-motion/dist/es/render/dom/value-types/defaults.mjs","../../node_modules/framer-motion/dist/es/render/dom/value-types/animatable-none.mjs","../../node_modules/framer-motion/dist/es/utils/use-instant-transition-state.mjs","../../node_modules/framesync/dist/es/on-next-frame.mjs","../../node_modules/framesync/dist/es/create-render-step.mjs","../../node_modules/framesync/dist/es/index.mjs","../../node_modules/framer-motion/dist/es/utils/delay.mjs","../../node_modules/framer-motion/dist/es/utils/clamp.mjs","../../node_modules/framer-motion/dist/es/utils/mix.mjs","../../node_modules/framer-motion/dist/es/utils/hsla-to-rgba.mjs","../../node_modules/framer-motion/dist/es/utils/mix-color.mjs","../../node_modules/framer-motion/dist/es/utils/mix-complex.mjs","../../node_modules/framer-motion/dist/es/utils/progress.mjs","../../node_modules/framer-motion/dist/es/utils/interpolate.mjs","../../node_modules/framer-motion/dist/es/animation/legacy-popmotion/keyframes.mjs","../../node_modules/framer-motion/dist/es/animation/legacy-popmotion/find-spring.mjs","../../node_modules/framer-motion/dist/es/animation/legacy-popmotion/spring.mjs","../../node_modules/framer-motion/dist/es/animation/legacy-popmotion/decay.mjs","../../node_modules/framer-motion/dist/es/animation/legacy-popmotion/index.mjs","../../node_modules/framer-motion/dist/es/utils/velocity-per-second.mjs","../../node_modules/framer-motion/dist/es/animation/legacy-popmotion/inertia.mjs","../../node_modules/framer-motion/dist/es/animation/utils/transitions.mjs","../../node_modules/framer-motion/dist/es/utils/array.mjs","../../node_modules/framer-motion/dist/es/utils/subscription-manager.mjs","../../node_modules/framer-motion/dist/es/value/index.mjs","../../node_modules/framer-motion/dist/es/animation/animate.mjs"],"sourcesContent":["import { createContext } from 'react';\n\n/**\n * @public\n */\nconst MotionConfigContext = createContext({\n    transformPagePoint: (p) => p,\n    isStatic: false,\n    reducedMotion: \"never\",\n});\n\nexport { MotionConfigContext };\n","const isBrowser = typeof document !== \"undefined\";\n\nexport { isBrowser };\n","import { useLayoutEffect, useEffect } from 'react';\nimport { isBrowser } from './is-browser.mjs';\n\nconst useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\n\nexport { useIsomorphicLayoutEffect };\n","import { useRef } from 'react';\n\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\nfunction useConstant(init) {\n    const ref = useRef(null);\n    if (ref.current === null) {\n        ref.current = init();\n    }\n    return ref.current;\n}\n\nexport { useConstant };\n","const isMotionValue = (value) => !!(value === null || value === void 0 ? void 0 : value.getVelocity);\n\nexport { isMotionValue };\n","const clamp = (min, max) => (v) => Math.max(Math.min(v, max), min);\nconst sanitize = (v) => (v % 1 ? Number(v.toFixed(5)) : v);\nconst floatRegex = /(-)?([\\d]*\\.?[\\d])+/g;\nconst colorRegex = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2}(-?[\\d\\.]+%?)\\s*[\\,\\/]?\\s*[\\d\\.]*%?\\))/gi;\nconst singleColorRegex = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2}(-?[\\d\\.]+%?)\\s*[\\,\\/]?\\s*[\\d\\.]*%?\\))$/i;\nfunction isString(v) {\n    return typeof v === 'string';\n}\n\nexport { clamp, colorRegex, floatRegex, isString, sanitize, singleColorRegex };\n","import { clamp } from '../utils.mjs';\n\nconst number = {\n    test: (v) => typeof v === 'number',\n    parse: parseFloat,\n    transform: (v) => v,\n};\nconst alpha = Object.assign(Object.assign({}, number), { transform: clamp(0, 1) });\nconst scale = Object.assign(Object.assign({}, number), { default: 1 });\n\nexport { alpha, number, scale };\n","import { isString } from '../utils.mjs';\n\nconst createUnitType = (unit) => ({\n    test: (v) => isString(v) && v.endsWith(unit) && v.split(' ').length === 1,\n    parse: parseFloat,\n    transform: (v) => `${v}${unit}`,\n});\nconst degrees = createUnitType('deg');\nconst percent = createUnitType('%');\nconst px = createUnitType('px');\nconst vh = createUnitType('vh');\nconst vw = createUnitType('vw');\nconst progressPercentage = Object.assign(Object.assign({}, percent), { parse: (v) => percent.parse(v) / 100, transform: (v) => percent.transform(v * 100) });\n\nexport { degrees, percent, progressPercentage, px, vh, vw };\n","import { isString, singleColorRegex, floatRegex } from '../utils.mjs';\n\nconst isColorString = (type, testProp) => (v) => {\n    return Boolean((isString(v) && singleColorRegex.test(v) && v.startsWith(type)) ||\n        (testProp && Object.prototype.hasOwnProperty.call(v, testProp)));\n};\nconst splitColor = (aName, bName, cName) => (v) => {\n    if (!isString(v))\n        return v;\n    const [a, b, c, alpha] = v.match(floatRegex);\n    return {\n        [aName]: parseFloat(a),\n        [bName]: parseFloat(b),\n        [cName]: parseFloat(c),\n        alpha: alpha !== undefined ? parseFloat(alpha) : 1,\n    };\n};\n\nexport { isColorString, splitColor };\n","import { alpha } from '../numbers/index.mjs';\nimport { percent } from '../numbers/units.mjs';\nimport { sanitize } from '../utils.mjs';\nimport { isColorString, splitColor } from './utils.mjs';\n\nconst hsla = {\n    test: isColorString('hsl', 'hue'),\n    parse: splitColor('hue', 'saturation', 'lightness'),\n    transform: ({ hue, saturation, lightness, alpha: alpha$1 = 1 }) => {\n        return ('hsla(' +\n            Math.round(hue) +\n            ', ' +\n            percent.transform(sanitize(saturation)) +\n            ', ' +\n            percent.transform(sanitize(lightness)) +\n            ', ' +\n            sanitize(alpha.transform(alpha$1)) +\n            ')');\n    },\n};\n\nexport { hsla };\n","import { number, alpha } from '../numbers/index.mjs';\nimport { sanitize, clamp } from '../utils.mjs';\nimport { isColorString, splitColor } from './utils.mjs';\n\nconst clampRgbUnit = clamp(0, 255);\nconst rgbUnit = Object.assign(Object.assign({}, number), { transform: (v) => Math.round(clampRgbUnit(v)) });\nconst rgba = {\n    test: isColorString('rgb', 'red'),\n    parse: splitColor('red', 'green', 'blue'),\n    transform: ({ red, green, blue, alpha: alpha$1 = 1 }) => 'rgba(' +\n        rgbUnit.transform(red) +\n        ', ' +\n        rgbUnit.transform(green) +\n        ', ' +\n        rgbUnit.transform(blue) +\n        ', ' +\n        sanitize(alpha.transform(alpha$1)) +\n        ')',\n};\n\nexport { rgbUnit, rgba };\n","import { rgba } from './rgba.mjs';\nimport { isColorString } from './utils.mjs';\n\nfunction parseHex(v) {\n    let r = '';\n    let g = '';\n    let b = '';\n    let a = '';\n    if (v.length > 5) {\n        r = v.substr(1, 2);\n        g = v.substr(3, 2);\n        b = v.substr(5, 2);\n        a = v.substr(7, 2);\n    }\n    else {\n        r = v.substr(1, 1);\n        g = v.substr(2, 1);\n        b = v.substr(3, 1);\n        a = v.substr(4, 1);\n        r += r;\n        g += g;\n        b += b;\n        a += a;\n    }\n    return {\n        red: parseInt(r, 16),\n        green: parseInt(g, 16),\n        blue: parseInt(b, 16),\n        alpha: a ? parseInt(a, 16) / 255 : 1,\n    };\n}\nconst hex = {\n    test: isColorString('#'),\n    parse: parseHex,\n    transform: rgba.transform,\n};\n\nexport { hex };\n","import { isString } from '../utils.mjs';\nimport { hex } from './hex.mjs';\nimport { hsla } from './hsla.mjs';\nimport { rgba } from './rgba.mjs';\n\nconst color = {\n    test: (v) => rgba.test(v) || hex.test(v) || hsla.test(v),\n    parse: (v) => {\n        if (rgba.test(v)) {\n            return rgba.parse(v);\n        }\n        else if (hsla.test(v)) {\n            return hsla.parse(v);\n        }\n        else {\n            return hex.parse(v);\n        }\n    },\n    transform: (v) => {\n        return isString(v)\n            ? v\n            : v.hasOwnProperty('red')\n                ? rgba.transform(v)\n                : hsla.transform(v);\n    },\n};\n\nexport { color };\n","import { color } from '../color/index.mjs';\nimport { number } from '../numbers/index.mjs';\nimport { isString, floatRegex, colorRegex, sanitize } from '../utils.mjs';\n\nconst colorToken = '${c}';\nconst numberToken = '${n}';\nfunction test(v) {\n    var _a, _b, _c, _d;\n    return (isNaN(v) &&\n        isString(v) &&\n        ((_b = (_a = v.match(floatRegex)) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) + ((_d = (_c = v.match(colorRegex)) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0) > 0);\n}\nfunction analyse(v) {\n    if (typeof v === 'number')\n        v = `${v}`;\n    const values = [];\n    let numColors = 0;\n    const colors = v.match(colorRegex);\n    if (colors) {\n        numColors = colors.length;\n        v = v.replace(colorRegex, colorToken);\n        values.push(...colors.map(color.parse));\n    }\n    const numbers = v.match(floatRegex);\n    if (numbers) {\n        v = v.replace(floatRegex, numberToken);\n        values.push(...numbers.map(number.parse));\n    }\n    return { values, numColors, tokenised: v };\n}\nfunction parse(v) {\n    return analyse(v).values;\n}\nfunction createTransformer(v) {\n    const { values, numColors, tokenised } = analyse(v);\n    const numValues = values.length;\n    return (v) => {\n        let output = tokenised;\n        for (let i = 0; i < numValues; i++) {\n            output = output.replace(i < numColors ? colorToken : numberToken, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\n        }\n        return output;\n    };\n}\nconst convertNumbersToZero = (v) => typeof v === 'number' ? 0 : v;\nfunction getAnimatableNone(v) {\n    const parsed = parse(v);\n    const transformer = createTransformer(v);\n    return transformer(parsed.map(convertNumbersToZero));\n}\nconst complex = { test, parse, createTransformer, getAnimatableNone };\n\nexport { complex };\n","import { complex } from './index.mjs';\nimport { floatRegex } from '../utils.mjs';\n\nconst maxDefaults = new Set(['brightness', 'contrast', 'saturate', 'opacity']);\nfunction applyDefaultFilter(v) {\n    let [name, value] = v.slice(0, -1).split('(');\n    if (name === 'drop-shadow')\n        return v;\n    const [number] = value.match(floatRegex) || [];\n    if (!number)\n        return v;\n    const unit = value.replace(number, '');\n    let defaultValue = maxDefaults.has(name) ? 1 : 0;\n    if (number !== value)\n        defaultValue *= 100;\n    return name + '(' + defaultValue + unit + ')';\n}\nconst functionRegex = /([a-z-]*)\\(.*?\\)/g;\nconst filter = Object.assign(Object.assign({}, complex), { getAnimatableNone: (v) => {\n        const functions = v.match(functionRegex);\n        return functions ? functions.map(applyDefaultFilter).join(' ') : v;\n    } });\n\nexport { filter };\n","import { number } from 'style-value-types';\n\nconst int = {\n    ...number,\n    transform: Math.round,\n};\n\nexport { int };\n","import { px, degrees, scale, alpha, progressPercentage } from 'style-value-types';\nimport { int } from './type-int.mjs';\n\nconst numberValueTypes = {\n    // Border props\n    borderWidth: px,\n    borderTopWidth: px,\n    borderRightWidth: px,\n    borderBottomWidth: px,\n    borderLeftWidth: px,\n    borderRadius: px,\n    radius: px,\n    borderTopLeftRadius: px,\n    borderTopRightRadius: px,\n    borderBottomRightRadius: px,\n    borderBottomLeftRadius: px,\n    // Positioning props\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    size: px,\n    top: px,\n    right: px,\n    bottom: px,\n    left: px,\n    // Spacing props\n    padding: px,\n    paddingTop: px,\n    paddingRight: px,\n    paddingBottom: px,\n    paddingLeft: px,\n    margin: px,\n    marginTop: px,\n    marginRight: px,\n    marginBottom: px,\n    marginLeft: px,\n    // Transform props\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale,\n    scaleX: scale,\n    scaleY: scale,\n    scaleZ: scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    translateX: px,\n    translateY: px,\n    translateZ: px,\n    x: px,\n    y: px,\n    z: px,\n    perspective: px,\n    transformPerspective: px,\n    opacity: alpha,\n    originX: progressPercentage,\n    originY: progressPercentage,\n    originZ: px,\n    // Misc\n    zIndex: int,\n    // SVG\n    fillOpacity: alpha,\n    strokeOpacity: alpha,\n    numOctaves: int,\n};\n\nexport { numberValueTypes };\n","const isKeyframesTarget = (v) => {\n    return Array.isArray(v);\n};\n\nexport { isKeyframesTarget };\n","import { isKeyframesTarget } from '../animation/utils/is-keyframes-target.mjs';\n\nconst isCustomValue = (v) => {\n    return Boolean(v && typeof v === \"object\" && v.mix && v.toValue);\n};\nconst resolveFinalValueInKeyframes = (v) => {\n    // TODO maybe throw if v.length - 1 is placeholder token?\n    return isKeyframesTarget(v) ? v[v.length - 1] || 0 : v;\n};\n\nexport { isCustomValue, resolveFinalValueInKeyframes };\n","/**\n * Pipe\n * Compose other transformers to run linearily\n * pipe(min(20), max(40))\n * @param  {...functions} transformers\n * @return {function}\n */\nconst combineFunctions = (a, b) => (v) => b(a(v));\nconst pipe = (...transformers) => transformers.reduce(combineFunctions);\n\nexport { pipe };\n","/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\nconst secondsToMilliseconds = (seconds) => seconds * 1000;\n\nexport { secondsToMilliseconds };\n","var warning = function () { };\r\nvar invariant = function () { };\r\nif (process.env.NODE_ENV !== 'production') {\r\n    warning = function (check, message) {\r\n        if (!check && typeof console !== 'undefined') {\r\n            console.warn(message);\r\n        }\r\n    };\r\n    invariant = function (check, message) {\r\n        if (!check) {\r\n            throw new Error(message);\r\n        }\r\n    };\r\n}\n\nexport { invariant, warning };\n","const noop = (any) => any;\n\nexport { noop };\n","import { noop } from '../utils/noop.mjs';\n\n/*\n  Bezier function generator\n  This has been modified from Gaëtan Renaudeau's BezierEasing\n  https://github.com/gre/bezier-easing/blob/master/src/index.js\n  https://github.com/gre/bezier-easing/blob/master/LICENSE\n  \n  I've removed the newtonRaphsonIterate algo because in benchmarking it\n  wasn't noticiably faster than binarySubdivision, indeed removing it\n  usually improved times, depending on the curve.\n  I also removed the lookup table, as for the added bundle size and loop we're\n  only cutting ~4 or so subdivision iterations. I bumped the max iterations up\n  to 12 to compensate and this still tended to be faster for no perceivable\n  loss in accuracy.\n  Usage\n    const easeOut = cubicBezier(.17,.67,.83,.67);\n    const x = easeOut(0.5); // returns 0.627...\n*/\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nconst calcBezier = (t, a1, a2) => (((1.0 - 3.0 * a2 + 3.0 * a1) * t + (3.0 * a2 - 6.0 * a1)) * t + 3.0 * a1) *\n    t;\nconst subdivisionPrecision = 0.0000001;\nconst subdivisionMaxIterations = 12;\nfunction binarySubdivide(x, lowerBound, upperBound, mX1, mX2) {\n    let currentX;\n    let currentT;\n    let i = 0;\n    do {\n        currentT = lowerBound + (upperBound - lowerBound) / 2.0;\n        currentX = calcBezier(currentT, mX1, mX2) - x;\n        if (currentX > 0.0) {\n            upperBound = currentT;\n        }\n        else {\n            lowerBound = currentT;\n        }\n    } while (Math.abs(currentX) > subdivisionPrecision &&\n        ++i < subdivisionMaxIterations);\n    return currentT;\n}\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n    // If this is a linear gradient, return linear easing\n    if (mX1 === mY1 && mX2 === mY2)\n        return noop;\n    const getTForX = (aX) => binarySubdivide(aX, 0, 1, mX1, mX2);\n    // If animation is at start/end, return t without easing\n    return (t) => t === 0 || t === 1 ? t : calcBezier(getTForX(t), mY1, mY2);\n}\n\nexport { cubicBezier };\n","// Accepts an easing function and returns a new one that outputs mirrored values for\n// the second half of the animation. Turns easeIn into easeInOut.\nconst mirrorEasing = (easing) => (p) => p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n\nexport { mirrorEasing };\n","// Accepts an easing function and returns a new one that outputs reversed values.\n// Turns easeIn into easeOut.\nconst reverseEasing = (easing) => (p) => 1 - easing(1 - p);\n\nexport { reverseEasing };\n","import { mirrorEasing } from './modifiers/mirror.mjs';\nimport { reverseEasing } from './modifiers/reverse.mjs';\n\nconst easeIn = (p) => p * p;\nconst easeOut = reverseEasing(easeIn);\nconst easeInOut = mirrorEasing(easeIn);\n\nexport { easeIn, easeInOut, easeOut };\n","import { mirrorEasing } from './modifiers/mirror.mjs';\nimport { reverseEasing } from './modifiers/reverse.mjs';\n\nconst circIn = (p) => 1 - Math.sin(Math.acos(p));\nconst circOut = reverseEasing(circIn);\nconst circInOut = mirrorEasing(circOut);\n\nexport { circIn, circInOut, circOut };\n","import { mirrorEasing } from './modifiers/mirror.mjs';\nimport { reverseEasing } from './modifiers/reverse.mjs';\n\nconst createBackIn = (power = 1.525) => (p) => p * p * ((power + 1) * p - power);\nconst backIn = createBackIn();\nconst backOut = reverseEasing(backIn);\nconst backInOut = mirrorEasing(backIn);\n\nexport { backIn, backInOut, backOut, createBackIn };\n","import { createBackIn } from './back.mjs';\n\nconst createAnticipate = (power) => {\n    const backEasing = createBackIn(power);\n    return (p) => (p *= 2) < 1\n        ? 0.5 * backEasing(p)\n        : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n};\nconst anticipate = createAnticipate();\n\nexport { anticipate };\n","import { invariant } from 'hey-listen';\nimport { cubicBezier } from '../../easing/cubic-bezier.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { easeIn, easeInOut, easeOut } from '../../easing/ease.mjs';\nimport { circIn, circInOut, circOut } from '../../easing/circ.mjs';\nimport { backIn, backInOut, backOut } from '../../easing/back.mjs';\nimport { anticipate } from '../../easing/anticipate.mjs';\n\nconst easingLookup = {\n    linear: noop,\n    easeIn,\n    easeInOut,\n    easeOut,\n    circIn,\n    circInOut,\n    circOut,\n    backIn,\n    backInOut,\n    backOut,\n    anticipate,\n};\nconst easingDefinitionToFunction = (definition) => {\n    if (Array.isArray(definition)) {\n        // If cubic bezier definition, create bezier curve\n        invariant(definition.length === 4, `Cubic bezier arrays must contain four numerical values.`);\n        const [x1, y1, x2, y2] = definition;\n        return cubicBezier(x1, y1, x2, y2);\n    }\n    else if (typeof definition === \"string\") {\n        // Else lookup from table\n        invariant(easingLookup[definition] !== undefined, `Invalid easing type '${definition}'`);\n        return easingLookup[definition];\n    }\n    return definition;\n};\nconst isEasingArray = (ease) => {\n    return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\nexport { easingDefinitionToFunction, isEasingArray };\n","import { complex } from 'style-value-types';\n\n/**\n * Check if a value is animatable. Examples:\n *\n * ✅: 100, \"100px\", \"#fff\"\n * ❌: \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\nconst isAnimatable = (key, value) => {\n    // If the list of keys tat might be non-animatable grows, replace with Set\n    if (key === \"zIndex\")\n        return false;\n    // If it's a number or a keyframes array, we can animate it. We might at some point\n    // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n    // but for now lets leave it like this for performance reasons\n    if (typeof value === \"number\" || Array.isArray(value))\n        return true;\n    if (typeof value === \"string\" && // It's animatable if we have a string\n        complex.test(value) && // And it contains numbers and/or colors\n        !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n    ) {\n        return true;\n    }\n    return false;\n};\n\nexport { isAnimatable };\n","import { isKeyframesTarget } from './is-keyframes-target.mjs';\n\nconst underDampedSpring = () => ({\n    type: \"spring\",\n    stiffness: 500,\n    damping: 25,\n    restSpeed: 10,\n});\nconst criticallyDampedSpring = (to) => ({\n    type: \"spring\",\n    stiffness: 550,\n    damping: to === 0 ? 2 * Math.sqrt(550) : 30,\n    restSpeed: 10,\n});\nconst linearTween = () => ({\n    type: \"keyframes\",\n    ease: \"linear\",\n    duration: 0.3,\n});\nconst keyframes = (values) => ({\n    type: \"keyframes\",\n    duration: 0.8,\n    values,\n});\nconst defaultTransitions = {\n    x: underDampedSpring,\n    y: underDampedSpring,\n    z: underDampedSpring,\n    rotate: underDampedSpring,\n    rotateX: underDampedSpring,\n    rotateY: underDampedSpring,\n    rotateZ: underDampedSpring,\n    scaleX: criticallyDampedSpring,\n    scaleY: criticallyDampedSpring,\n    scale: criticallyDampedSpring,\n    opacity: linearTween,\n    backgroundColor: linearTween,\n    color: linearTween,\n    default: criticallyDampedSpring,\n};\nconst getDefaultTransition = (valueKey, to) => {\n    let transitionFactory;\n    if (isKeyframesTarget(to)) {\n        transitionFactory = keyframes;\n    }\n    else {\n        transitionFactory =\n            defaultTransitions[valueKey] || defaultTransitions.default;\n    }\n    return { to, ...transitionFactory(to) };\n};\n\nexport { criticallyDampedSpring, getDefaultTransition, linearTween, underDampedSpring };\n","import { color, filter } from 'style-value-types';\nimport { numberValueTypes } from './number.mjs';\n\n/**\n * A map of default value types for common values\n */\nconst defaultValueTypes = {\n    ...numberValueTypes,\n    // Color props\n    color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    // Border props\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    filter,\n    WebkitFilter: filter,\n};\n/**\n * Gets the default ValueType for the provided value key\n */\nconst getDefaultValueType = (key) => defaultValueTypes[key];\n\nexport { defaultValueTypes, getDefaultValueType };\n","import { filter, complex } from 'style-value-types';\nimport { getDefaultValueType } from './defaults.mjs';\n\nfunction getAnimatableNone(key, value) {\n    var _a;\n    let defaultValueType = getDefaultValueType(key);\n    if (defaultValueType !== filter)\n        defaultValueType = complex;\n    // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n    return (_a = defaultValueType.getAnimatableNone) === null || _a === void 0 ? void 0 : _a.call(defaultValueType, value);\n}\n\nexport { getAnimatableNone };\n","const instantAnimationState = {\n    current: false,\n};\n\nexport { instantAnimationState };\n","const defaultTimestep = (1 / 60) * 1000;\nconst getCurrentTime = typeof performance !== \"undefined\"\n    ? () => performance.now()\n    : () => Date.now();\nconst onNextFrame = typeof window !== \"undefined\"\n    ? (callback) => window.requestAnimationFrame(callback)\n    : (callback) => setTimeout(() => callback(getCurrentTime()), defaultTimestep);\n\nexport { defaultTimestep, onNextFrame };\n","function createRenderStep(runNextFrame) {\n    let toRun = [];\n    let toRunNextFrame = [];\n    let numToRun = 0;\n    let isProcessing = false;\n    let flushNextFrame = false;\n    const toKeepAlive = new WeakSet();\n    const step = {\n        schedule: (callback, keepAlive = false, immediate = false) => {\n            const addToCurrentFrame = immediate && isProcessing;\n            const buffer = addToCurrentFrame ? toRun : toRunNextFrame;\n            if (keepAlive)\n                toKeepAlive.add(callback);\n            if (buffer.indexOf(callback) === -1) {\n                buffer.push(callback);\n                if (addToCurrentFrame && isProcessing)\n                    numToRun = toRun.length;\n            }\n            return callback;\n        },\n        cancel: (callback) => {\n            const index = toRunNextFrame.indexOf(callback);\n            if (index !== -1)\n                toRunNextFrame.splice(index, 1);\n            toKeepAlive.delete(callback);\n        },\n        process: (frameData) => {\n            if (isProcessing) {\n                flushNextFrame = true;\n                return;\n            }\n            isProcessing = true;\n            [toRun, toRunNextFrame] = [toRunNextFrame, toRun];\n            toRunNextFrame.length = 0;\n            numToRun = toRun.length;\n            if (numToRun) {\n                for (let i = 0; i < numToRun; i++) {\n                    const callback = toRun[i];\n                    callback(frameData);\n                    if (toKeepAlive.has(callback)) {\n                        step.schedule(callback);\n                        runNextFrame();\n                    }\n                }\n            }\n            isProcessing = false;\n            if (flushNextFrame) {\n                flushNextFrame = false;\n                step.process(frameData);\n            }\n        },\n    };\n    return step;\n}\n\nexport { createRenderStep };\n","import { onNextFrame, defaultTimestep } from './on-next-frame.mjs';\nimport { createRenderStep } from './create-render-step.mjs';\n\nconst maxElapsed = 40;\nlet useDefaultElapsed = true;\nlet runNextFrame = false;\nlet isProcessing = false;\nconst frame = {\n    delta: 0,\n    timestamp: 0,\n};\nconst stepsOrder = [\n    \"read\",\n    \"update\",\n    \"preRender\",\n    \"render\",\n    \"postRender\",\n];\nconst steps = stepsOrder.reduce((acc, key) => {\n    acc[key] = createRenderStep(() => (runNextFrame = true));\n    return acc;\n}, {});\nconst sync = stepsOrder.reduce((acc, key) => {\n    const step = steps[key];\n    acc[key] = (process, keepAlive = false, immediate = false) => {\n        if (!runNextFrame)\n            startLoop();\n        return step.schedule(process, keepAlive, immediate);\n    };\n    return acc;\n}, {});\nconst cancelSync = stepsOrder.reduce((acc, key) => {\n    acc[key] = steps[key].cancel;\n    return acc;\n}, {});\nconst flushSync = stepsOrder.reduce((acc, key) => {\n    acc[key] = () => steps[key].process(frame);\n    return acc;\n}, {});\nconst processStep = (stepId) => steps[stepId].process(frame);\nconst processFrame = (timestamp) => {\n    runNextFrame = false;\n    frame.delta = useDefaultElapsed\n        ? defaultTimestep\n        : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n    frame.timestamp = timestamp;\n    isProcessing = true;\n    stepsOrder.forEach(processStep);\n    isProcessing = false;\n    if (runNextFrame) {\n        useDefaultElapsed = false;\n        onNextFrame(processFrame);\n    }\n};\nconst startLoop = () => {\n    runNextFrame = true;\n    useDefaultElapsed = true;\n    if (!isProcessing)\n        onNextFrame(processFrame);\n};\nconst getFrameData = () => frame;\n\nexport default sync;\nexport { cancelSync, flushSync, getFrameData };\n","import sync, { cancelSync } from 'framesync';\n\nfunction delay(callback, timeout) {\n    const start = performance.now();\n    const checkElapsed = ({ timestamp }) => {\n        const elapsed = timestamp - start;\n        if (elapsed >= timeout) {\n            cancelSync.read(checkElapsed);\n            callback(elapsed - timeout);\n        }\n    };\n    sync.read(checkElapsed, true);\n    return () => cancelSync.read(checkElapsed);\n}\n\nexport { delay };\n","const clamp = (min, max, v) => Math.min(Math.max(v, min), max);\n\nexport { clamp };\n","/*\n  Value in range from progress\n\n  Given a lower limit and an upper limit, we return the value within\n  that range as expressed by progress (usually a number from 0 to 1)\n\n  So progress = 0.5 would change\n\n  from -------- to\n\n  to\n\n  from ---- to\n\n  E.g. from = 10, to = 20, progress = 0.5 => 15\n\n  @param [number]: Lower limit of range\n  @param [number]: Upper limit of range\n  @param [number]: The progress between lower and upper limits expressed 0-1\n  @return [number]: Value as calculated from progress within range (not limited within range)\n*/\nconst mix = (from, to, progress) => -progress * from + progress * to + from;\n\nexport { mix };\n","// Adapted from https://gist.github.com/mjackson/5311256\nfunction hueToRgb(p, q, t) {\n    if (t < 0)\n        t += 1;\n    if (t > 1)\n        t -= 1;\n    if (t < 1 / 6)\n        return p + (q - p) * 6 * t;\n    if (t < 1 / 2)\n        return q;\n    if (t < 2 / 3)\n        return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n}\nfunction hslaToRgba({ hue, saturation, lightness, alpha }) {\n    hue /= 360;\n    saturation /= 100;\n    lightness /= 100;\n    let red = 0;\n    let green = 0;\n    let blue = 0;\n    if (!saturation) {\n        red = green = blue = lightness;\n    }\n    else {\n        const q = lightness < 0.5\n            ? lightness * (1 + saturation)\n            : lightness + saturation - lightness * saturation;\n        const p = 2 * lightness - q;\n        red = hueToRgb(p, q, hue + 1 / 3);\n        green = hueToRgb(p, q, hue);\n        blue = hueToRgb(p, q, hue - 1 / 3);\n    }\n    return {\n        red: Math.round(red * 255),\n        green: Math.round(green * 255),\n        blue: Math.round(blue * 255),\n        alpha,\n    };\n}\n\nexport { hslaToRgba };\n","import { mix } from './mix.mjs';\nimport { rgba, hsla, hex } from 'style-value-types';\nimport { invariant } from 'hey-listen';\nimport { hslaToRgba } from './hsla-to-rgba.mjs';\n\n// Linear color space blending\n// Explained https://www.youtube.com/watch?v=LKnqECcg6Gw\n// Demonstrated http://codepen.io/osublake/pen/xGVVaN\nconst mixLinearColor = (from, to, v) => {\n    const fromExpo = from * from;\n    return Math.sqrt(Math.max(0, v * (to * to - fromExpo) + fromExpo));\n};\nconst colorTypes = [hex, rgba, hsla];\nconst getColorType = (v) => colorTypes.find((type) => type.test(v));\nfunction asRGBA(color) {\n    const type = getColorType(color);\n    invariant(Boolean(type), `'${color}' is not an animatable color. Use the equivalent color code instead.`);\n    let model = type.parse(color);\n    if (type === hsla) {\n        model = hslaToRgba(model);\n    }\n    return model;\n}\nconst mixColor = (from, to) => {\n    const fromRGBA = asRGBA(from);\n    const toRGBA = asRGBA(to);\n    const blended = { ...fromRGBA };\n    return (v) => {\n        blended.red = mixLinearColor(fromRGBA.red, toRGBA.red, v);\n        blended.green = mixLinearColor(fromRGBA.green, toRGBA.green, v);\n        blended.blue = mixLinearColor(fromRGBA.blue, toRGBA.blue, v);\n        blended.alpha = mix(fromRGBA.alpha, toRGBA.alpha, v);\n        return rgba.transform(blended);\n    };\n};\n\nexport { mixColor, mixLinearColor };\n","import { complex, color } from 'style-value-types';\nimport { mix } from './mix.mjs';\nimport { mixColor } from './mix-color.mjs';\nimport { pipe } from './pipe.mjs';\nimport { warning } from 'hey-listen';\n\nfunction getMixer(origin, target) {\n    if (typeof origin === \"number\") {\n        return (v) => mix(origin, target, v);\n    }\n    else if (color.test(origin)) {\n        return mixColor(origin, target);\n    }\n    else {\n        return mixComplex(origin, target);\n    }\n}\nconst mixArray = (from, to) => {\n    const output = [...from];\n    const numValues = output.length;\n    const blendValue = from.map((fromThis, i) => getMixer(fromThis, to[i]));\n    return (v) => {\n        for (let i = 0; i < numValues; i++) {\n            output[i] = blendValue[i](v);\n        }\n        return output;\n    };\n};\nconst mixObject = (origin, target) => {\n    const output = { ...origin, ...target };\n    const blendValue = {};\n    for (const key in output) {\n        if (origin[key] !== undefined && target[key] !== undefined) {\n            blendValue[key] = getMixer(origin[key], target[key]);\n        }\n    }\n    return (v) => {\n        for (const key in blendValue) {\n            output[key] = blendValue[key](v);\n        }\n        return output;\n    };\n};\n/**\n * TODO: Combine with function within complex when style-value-types moved inside Framer Motion\n */\nfunction analyse(value) {\n    const parsed = complex.parse(value);\n    const numValues = parsed.length;\n    let numNumbers = 0;\n    let numColors = 0;\n    for (let i = 0; i < numValues; i++) {\n        // Parsed complex values return with colors first, so if we've seen any number\n        // we're already past that part of the array and don't need to continue running typeof\n        if (numNumbers || typeof parsed[i] === \"number\") {\n            numNumbers++;\n        }\n        else {\n            numColors++;\n        }\n    }\n    return { parsed, numNumbers, numColors };\n}\nconst mixComplex = (origin, target) => {\n    const template = complex.createTransformer(target);\n    const originStats = analyse(origin);\n    const targetStats = analyse(target);\n    const canInterpolate = originStats.numColors === targetStats.numColors &&\n        originStats.numNumbers >= targetStats.numNumbers;\n    if (canInterpolate) {\n        return pipe(mixArray(originStats.parsed, targetStats.parsed), template);\n    }\n    else {\n        warning(true, `Complex values '${origin}' and '${target}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`);\n        return (p) => `${p > 0 ? target : origin}`;\n    }\n};\n\nexport { mixArray, mixComplex, mixObject };\n","/*\n  Progress within given range\n\n  Given a lower limit and an upper limit, we return the progress\n  (expressed as a number 0-1) represented by the given value, and\n  limit that progress to within 0-1.\n\n  @param [number]: Lower limit\n  @param [number]: Upper limit\n  @param [number]: Value to find progress within given range\n  @return [number]: Progress of value within range as expressed 0-1\n*/\nconst progress = (from, to, value) => {\n    const toFromDifference = to - from;\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\n};\n\nexport { progress };\n","import { invariant } from 'hey-listen';\nimport { color } from 'style-value-types';\nimport { clamp } from './clamp.mjs';\nimport { mix } from './mix.mjs';\nimport { mixColor } from './mix-color.mjs';\nimport { mixComplex, mixArray, mixObject } from './mix-complex.mjs';\nimport { pipe } from './pipe.mjs';\nimport { progress } from './progress.mjs';\n\nconst mixNumber = (from, to) => (p) => mix(from, to, p);\nfunction detectMixerFactory(v) {\n    if (typeof v === \"number\") {\n        return mixNumber;\n    }\n    else if (typeof v === \"string\") {\n        if (color.test(v)) {\n            return mixColor;\n        }\n        else {\n            return mixComplex;\n        }\n    }\n    else if (Array.isArray(v)) {\n        return mixArray;\n    }\n    else if (typeof v === \"object\") {\n        return mixObject;\n    }\n    return mixNumber;\n}\nfunction createMixers(output, ease, customMixer) {\n    const mixers = [];\n    const mixerFactory = customMixer || detectMixerFactory(output[0]);\n    const numMixers = output.length - 1;\n    for (let i = 0; i < numMixers; i++) {\n        let mixer = mixerFactory(output[i], output[i + 1]);\n        if (ease) {\n            const easingFunction = Array.isArray(ease) ? ease[i] : ease;\n            mixer = pipe(easingFunction, mixer);\n        }\n        mixers.push(mixer);\n    }\n    return mixers;\n}\n/**\n * Create a function that maps from a numerical input array to a generic output array.\n *\n * Accepts:\n *   - Numbers\n *   - Colors (hex, hsl, hsla, rgb, rgba)\n *   - Complex (combinations of one or more numbers or strings)\n *\n * ```jsx\n * const mixColor = interpolate([0, 1], ['#fff', '#000'])\n *\n * mixColor(0.5) // 'rgba(128, 128, 128, 1)'\n * ```\n *\n * TODO Revist this approach once we've moved to data models for values,\n * probably not needed to pregenerate mixer functions.\n *\n * @public\n */\nfunction interpolate(input, output, { clamp: isClamp = true, ease, mixer } = {}) {\n    const inputLength = input.length;\n    invariant(inputLength === output.length, \"Both input and output ranges must be the same length\");\n    invariant(!ease || !Array.isArray(ease) || ease.length === inputLength - 1, \"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values.\");\n    // If input runs highest -> lowest, reverse both arrays\n    if (input[0] > input[inputLength - 1]) {\n        input = [...input].reverse();\n        output = [...output].reverse();\n    }\n    const mixers = createMixers(output, ease, mixer);\n    const numMixers = mixers.length;\n    const interpolator = (v) => {\n        let i = 0;\n        if (numMixers > 1) {\n            for (; i < input.length - 2; i++) {\n                if (v < input[i + 1])\n                    break;\n            }\n        }\n        const progressInRange = progress(input[i], input[i + 1], v);\n        return mixers[i](progressInRange);\n    };\n    return isClamp\n        ? (v) => interpolator(clamp(input[0], input[inputLength - 1], v))\n        : interpolator;\n}\n\nexport { interpolate };\n","import { easeInOut } from '../../easing/ease.mjs';\nimport { interpolate } from '../../utils/interpolate.mjs';\n\nfunction defaultEasing(values, easing) {\n    return values.map(() => easing || easeInOut).splice(0, values.length - 1);\n}\nfunction defaultOffset(values) {\n    const numValues = values.length;\n    return values.map((_value, i) => i !== 0 ? i / (numValues - 1) : 0);\n}\nfunction convertOffsetToTimes(offset, duration) {\n    return offset.map((o) => o * duration);\n}\nfunction keyframes({ from = 0, to = 1, ease, offset, duration = 300, }) {\n    /**\n     * This is the Iterator-spec return value. We ensure it's mutable rather than using a generator\n     * to reduce GC during animation.\n     */\n    const state = { done: false, value: from };\n    /**\n     * Convert values to an array if they've been given as from/to options\n     */\n    const values = Array.isArray(to) ? to : [from, to];\n    /**\n     * Create a times array based on the provided 0-1 offsets\n     */\n    const times = convertOffsetToTimes(\n    // Only use the provided offsets if they're the correct length\n    // TODO Maybe we should warn here if there's a length mismatch\n    offset && offset.length === values.length\n        ? offset\n        : defaultOffset(values), duration);\n    function createInterpolator() {\n        return interpolate(times, values, {\n            ease: Array.isArray(ease) ? ease : defaultEasing(values, ease),\n        });\n    }\n    let interpolator = createInterpolator();\n    return {\n        next: (t) => {\n            state.value = interpolator(t);\n            state.done = t >= duration;\n            return state;\n        },\n        flipTarget: () => {\n            values.reverse();\n            interpolator = createInterpolator();\n        },\n    };\n}\n\nexport { convertOffsetToTimes, defaultEasing, defaultOffset, keyframes };\n","import { warning } from 'hey-listen';\nimport { clamp } from '../../utils/clamp.mjs';\n\nconst safeMin = 0.001;\nconst minDuration = 0.01;\nconst maxDuration = 10.0;\nconst minDamping = 0.05;\nconst maxDamping = 1;\nfunction findSpring({ duration = 800, bounce = 0.25, velocity = 0, mass = 1, }) {\n    let envelope;\n    let derivative;\n    warning(duration <= maxDuration * 1000, \"Spring duration must be 10 seconds or less\");\n    let dampingRatio = 1 - bounce;\n    /**\n     * Restrict dampingRatio and duration to within acceptable ranges.\n     */\n    dampingRatio = clamp(minDamping, maxDamping, dampingRatio);\n    duration = clamp(minDuration, maxDuration, duration / 1000);\n    if (dampingRatio < 1) {\n        /**\n         * Underdamped spring\n         */\n        envelope = (undampedFreq) => {\n            const exponentialDecay = undampedFreq * dampingRatio;\n            const delta = exponentialDecay * duration;\n            const a = exponentialDecay - velocity;\n            const b = calcAngularFreq(undampedFreq, dampingRatio);\n            const c = Math.exp(-delta);\n            return safeMin - (a / b) * c;\n        };\n        derivative = (undampedFreq) => {\n            const exponentialDecay = undampedFreq * dampingRatio;\n            const delta = exponentialDecay * duration;\n            const d = delta * velocity + velocity;\n            const e = Math.pow(dampingRatio, 2) * Math.pow(undampedFreq, 2) * duration;\n            const f = Math.exp(-delta);\n            const g = calcAngularFreq(Math.pow(undampedFreq, 2), dampingRatio);\n            const factor = -envelope(undampedFreq) + safeMin > 0 ? -1 : 1;\n            return (factor * ((d - e) * f)) / g;\n        };\n    }\n    else {\n        /**\n         * Critically-damped spring\n         */\n        envelope = (undampedFreq) => {\n            const a = Math.exp(-undampedFreq * duration);\n            const b = (undampedFreq - velocity) * duration + 1;\n            return -safeMin + a * b;\n        };\n        derivative = (undampedFreq) => {\n            const a = Math.exp(-undampedFreq * duration);\n            const b = (velocity - undampedFreq) * (duration * duration);\n            return a * b;\n        };\n    }\n    const initialGuess = 5 / duration;\n    const undampedFreq = approximateRoot(envelope, derivative, initialGuess);\n    duration = duration * 1000;\n    if (isNaN(undampedFreq)) {\n        return {\n            stiffness: 100,\n            damping: 10,\n            duration,\n        };\n    }\n    else {\n        const stiffness = Math.pow(undampedFreq, 2) * mass;\n        return {\n            stiffness,\n            damping: dampingRatio * 2 * Math.sqrt(mass * stiffness),\n            duration,\n        };\n    }\n}\nconst rootIterations = 12;\nfunction approximateRoot(envelope, derivative, initialGuess) {\n    let result = initialGuess;\n    for (let i = 1; i < rootIterations; i++) {\n        result = result - envelope(result) / derivative(result);\n    }\n    return result;\n}\nfunction calcAngularFreq(undampedFreq, dampingRatio) {\n    return undampedFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\n}\n\nexport { calcAngularFreq, findSpring, maxDamping, maxDuration, minDamping, minDuration };\n","import { findSpring, calcAngularFreq } from './find-spring.mjs';\n\nconst durationKeys = [\"duration\", \"bounce\"];\nconst physicsKeys = [\"stiffness\", \"damping\", \"mass\"];\nfunction isSpringType(options, keys) {\n    return keys.some((key) => options[key] !== undefined);\n}\nfunction getSpringOptions(options) {\n    let springOptions = {\n        velocity: 0.0,\n        stiffness: 100,\n        damping: 10,\n        mass: 1.0,\n        isResolvedFromDuration: false,\n        ...options,\n    };\n    // stiffness/damping/mass overrides duration/bounce\n    if (!isSpringType(options, physicsKeys) &&\n        isSpringType(options, durationKeys)) {\n        const derived = findSpring(options);\n        springOptions = {\n            ...springOptions,\n            ...derived,\n            velocity: 0.0,\n            mass: 1.0,\n        };\n        springOptions.isResolvedFromDuration = true;\n    }\n    return springOptions;\n}\n/**\n * This is based on the spring implementation of Wobble https://github.com/skevy/wobble\n */\nfunction spring({ from = 0.0, to = 1.0, restSpeed = 2, restDelta = 0.01, ...options }) {\n    /**\n     * This is the Iterator-spec return value. We ensure it's mutable rather than using a generator\n     * to reduce GC during animation.\n     */\n    const state = { done: false, value: from };\n    let { stiffness, damping, mass, velocity, duration, isResolvedFromDuration, } = getSpringOptions(options);\n    let resolveSpring = zero;\n    let resolveVelocity = zero;\n    function createSpring() {\n        const initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n        const initialDelta = to - from;\n        const dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n        const undampedAngularFreq = Math.sqrt(stiffness / mass) / 1000;\n        /**\n         * If we're working within what looks like a 0-1 range, change the default restDelta\n         * to 0.01\n         */\n        if (restDelta === undefined) {\n            restDelta = Math.min(Math.abs(to - from) / 100, 0.4);\n        }\n        if (dampingRatio < 1) {\n            const angularFreq = calcAngularFreq(undampedAngularFreq, dampingRatio);\n            // Underdamped spring\n            resolveSpring = (t) => {\n                const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n                return (to -\n                    envelope *\n                        (((initialVelocity +\n                            dampingRatio * undampedAngularFreq * initialDelta) /\n                            angularFreq) *\n                            Math.sin(angularFreq * t) +\n                            initialDelta * Math.cos(angularFreq * t)));\n            };\n            resolveVelocity = (t) => {\n                // TODO Resolve these calculations with the above\n                const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n                return (dampingRatio *\n                    undampedAngularFreq *\n                    envelope *\n                    ((Math.sin(angularFreq * t) *\n                        (initialVelocity +\n                            dampingRatio *\n                                undampedAngularFreq *\n                                initialDelta)) /\n                        angularFreq +\n                        initialDelta * Math.cos(angularFreq * t)) -\n                    envelope *\n                        (Math.cos(angularFreq * t) *\n                            (initialVelocity +\n                                dampingRatio *\n                                    undampedAngularFreq *\n                                    initialDelta) -\n                            angularFreq *\n                                initialDelta *\n                                Math.sin(angularFreq * t)));\n            };\n        }\n        else if (dampingRatio === 1) {\n            // Critically damped spring\n            resolveSpring = (t) => to -\n                Math.exp(-undampedAngularFreq * t) *\n                    (initialDelta +\n                        (initialVelocity + undampedAngularFreq * initialDelta) *\n                            t);\n        }\n        else {\n            // Overdamped spring\n            const dampedAngularFreq = undampedAngularFreq * Math.sqrt(dampingRatio * dampingRatio - 1);\n            resolveSpring = (t) => {\n                const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n                // When performing sinh or cosh values can hit Infinity so we cap them here\n                const freqForT = Math.min(dampedAngularFreq * t, 300);\n                return (to -\n                    (envelope *\n                        ((initialVelocity +\n                            dampingRatio * undampedAngularFreq * initialDelta) *\n                            Math.sinh(freqForT) +\n                            dampedAngularFreq *\n                                initialDelta *\n                                Math.cosh(freqForT))) /\n                        dampedAngularFreq);\n            };\n        }\n    }\n    createSpring();\n    return {\n        next: (t) => {\n            const current = resolveSpring(t);\n            if (!isResolvedFromDuration) {\n                const currentVelocity = resolveVelocity(t) * 1000;\n                const isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\n                const isBelowDisplacementThreshold = Math.abs(to - current) <= restDelta;\n                state.done =\n                    isBelowVelocityThreshold && isBelowDisplacementThreshold;\n            }\n            else {\n                state.done = t >= duration;\n            }\n            state.value = state.done ? to : current;\n            return state;\n        },\n        flipTarget: () => {\n            velocity = -velocity;\n            [from, to] = [to, from];\n            createSpring();\n        },\n    };\n}\nspring.needsInterpolation = (a, b) => typeof a === \"string\" || typeof b === \"string\";\nconst zero = (_t) => 0;\n\nexport { spring };\n","function decay({ velocity = 0, from = 0, power = 0.8, timeConstant = 350, restDelta = 0.5, modifyTarget, }) {\n    /**\n     * This is the Iterator-spec return value. We ensure it's mutable rather than using a generator\n     * to reduce GC during animation.\n     */\n    const state = { done: false, value: from };\n    let amplitude = power * velocity;\n    const ideal = from + amplitude;\n    const target = modifyTarget === undefined ? ideal : modifyTarget(ideal);\n    /**\n     * If the target has changed we need to re-calculate the amplitude, otherwise\n     * the animation will start from the wrong position.\n     */\n    if (target !== ideal)\n        amplitude = target - from;\n    return {\n        next: (t) => {\n            const delta = -amplitude * Math.exp(-t / timeConstant);\n            state.done = !(delta > restDelta || delta < -restDelta);\n            state.value = state.done ? target : target + delta;\n            return state;\n        },\n        flipTarget: () => { },\n    };\n}\n\nexport { decay };\n","import { keyframes } from './keyframes.mjs';\nimport { spring } from './spring.mjs';\nimport { decay } from './decay.mjs';\nimport sync, { cancelSync } from 'framesync';\nimport { interpolate } from '../../utils/interpolate.mjs';\n\nconst types = { decay, keyframes, spring };\nfunction loopElapsed(elapsed, duration, delay = 0) {\n    return elapsed - duration - delay;\n}\nfunction reverseElapsed(elapsed, duration = 0, delay = 0, isForwardPlayback = true) {\n    return isForwardPlayback\n        ? loopElapsed(duration + -elapsed, duration, delay)\n        : duration - (elapsed - duration) + delay;\n}\nfunction hasRepeatDelayElapsed(elapsed, duration, delay, isForwardPlayback) {\n    return isForwardPlayback ? elapsed >= duration + delay : elapsed <= -delay;\n}\nconst framesync = (update) => {\n    const passTimestamp = ({ delta }) => update(delta);\n    return {\n        start: () => sync.update(passTimestamp, true),\n        stop: () => cancelSync.update(passTimestamp),\n    };\n};\nfunction animate({ from, autoplay = true, driver = framesync, elapsed = 0, repeat: repeatMax = 0, repeatType = \"loop\", repeatDelay = 0, onPlay, onStop, onComplete, onRepeat, onUpdate, type = \"keyframes\", ...options }) {\n    var _a, _b;\n    let { to } = options;\n    let driverControls;\n    let repeatCount = 0;\n    let computedDuration = options\n        .duration;\n    let latest;\n    let isComplete = false;\n    let isForwardPlayback = true;\n    let interpolateFromNumber;\n    const animator = types[Array.isArray(to) ? \"keyframes\" : type];\n    if ((_b = (_a = animator).needsInterpolation) === null || _b === void 0 ? void 0 : _b.call(_a, from, to)) {\n        interpolateFromNumber = interpolate([0, 100], [from, to], {\n            clamp: false,\n        });\n        from = 0;\n        to = 100;\n    }\n    const animation = animator({ ...options, from, to });\n    function repeat() {\n        repeatCount++;\n        if (repeatType === \"reverse\") {\n            isForwardPlayback = repeatCount % 2 === 0;\n            elapsed = reverseElapsed(elapsed, computedDuration, repeatDelay, isForwardPlayback);\n        }\n        else {\n            elapsed = loopElapsed(elapsed, computedDuration, repeatDelay);\n            if (repeatType === \"mirror\")\n                animation.flipTarget();\n        }\n        isComplete = false;\n        onRepeat && onRepeat();\n    }\n    function complete() {\n        driverControls.stop();\n        onComplete && onComplete();\n    }\n    function update(delta) {\n        if (!isForwardPlayback)\n            delta = -delta;\n        elapsed += delta;\n        if (!isComplete) {\n            const state = animation.next(Math.max(0, elapsed));\n            latest = state.value;\n            if (interpolateFromNumber)\n                latest = interpolateFromNumber(latest);\n            isComplete = isForwardPlayback ? state.done : elapsed <= 0;\n        }\n        onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(latest);\n        if (isComplete) {\n            if (repeatCount === 0)\n                computedDuration !== null && computedDuration !== void 0 ? computedDuration : (computedDuration = elapsed);\n            if (repeatCount < repeatMax) {\n                hasRepeatDelayElapsed(elapsed, computedDuration, repeatDelay, isForwardPlayback) && repeat();\n            }\n            else {\n                complete();\n            }\n        }\n    }\n    function play() {\n        onPlay === null || onPlay === void 0 ? void 0 : onPlay();\n        driverControls = driver(update);\n        driverControls.start();\n    }\n    autoplay && play();\n    return {\n        stop: () => {\n            onStop === null || onStop === void 0 ? void 0 : onStop();\n            driverControls.stop();\n        },\n    };\n}\n\nexport { animate, hasRepeatDelayElapsed, loopElapsed, reverseElapsed };\n","/*\n  Convert velocity into velocity per second\n\n  @param [number]: Unit per frame\n  @param [number]: Frame duration in ms\n*/\nfunction velocityPerSecond(velocity, frameDuration) {\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\n}\n\nexport { velocityPerSecond };\n","import { animate } from './index.mjs';\nimport { getFrameData } from 'framesync';\nimport { velocityPerSecond } from '../../utils/velocity-per-second.mjs';\n\nfunction inertia({ from = 0, velocity = 0, min, max, power = 0.8, timeConstant = 750, bounceStiffness = 500, bounceDamping = 10, restDelta = 1, modifyTarget, driver, onUpdate, onComplete, onStop, }) {\n    let currentAnimation;\n    function isOutOfBounds(v) {\n        return (min !== undefined && v < min) || (max !== undefined && v > max);\n    }\n    function boundaryNearest(v) {\n        if (min === undefined)\n            return max;\n        if (max === undefined)\n            return min;\n        return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n    }\n    function startAnimation(options) {\n        currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n        currentAnimation = animate({\n            ...options,\n            driver,\n            onUpdate: (v) => {\n                var _a;\n                onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(v);\n                (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, v);\n            },\n            onComplete,\n            onStop,\n        });\n    }\n    function startSpring(options) {\n        startAnimation({\n            type: \"spring\",\n            stiffness: bounceStiffness,\n            damping: bounceDamping,\n            restDelta,\n            ...options,\n        });\n    }\n    if (isOutOfBounds(from)) {\n        // Start the animation with spring if outside the defined boundaries\n        startSpring({ from, velocity, to: boundaryNearest(from) });\n    }\n    else {\n        /**\n         * Or if the value is out of bounds, simulate the inertia movement\n         * with the decay animation.\n         *\n         * Pre-calculate the target so we can detect if it's out-of-bounds.\n         * If it is, we want to check per frame when to switch to a spring\n         * animation\n         */\n        let target = power * velocity + from;\n        if (typeof modifyTarget !== \"undefined\")\n            target = modifyTarget(target);\n        const boundary = boundaryNearest(target);\n        const heading = boundary === min ? -1 : 1;\n        let prev;\n        let current;\n        const checkBoundary = (v) => {\n            prev = current;\n            current = v;\n            velocity = velocityPerSecond(v - prev, getFrameData().delta);\n            if ((heading === 1 && v > boundary) ||\n                (heading === -1 && v < boundary)) {\n                startSpring({ from: v, to: boundary, velocity });\n            }\n        };\n        startAnimation({\n            type: \"decay\",\n            from,\n            velocity,\n            timeConstant,\n            power,\n            restDelta,\n            modifyTarget,\n            onUpdate: isOutOfBounds(target) ? checkBoundary : undefined,\n        });\n    }\n    return {\n        stop: () => currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop(),\n    };\n}\n\nexport { inertia };\n","import { secondsToMilliseconds } from '../../utils/time-conversion.mjs';\nimport { isEasingArray, easingDefinitionToFunction } from './easing.mjs';\nimport { isAnimatable } from './is-animatable.mjs';\nimport { getDefaultTransition } from './default-transitions.mjs';\nimport { warning } from 'hey-listen';\nimport { getAnimatableNone } from '../../render/dom/value-types/animatable-none.mjs';\nimport { instantAnimationState } from '../../utils/use-instant-transition-state.mjs';\nimport { resolveFinalValueInKeyframes } from '../../utils/resolve-value.mjs';\nimport { delay } from '../../utils/delay.mjs';\nimport { inertia } from '../legacy-popmotion/inertia.mjs';\nimport { animate } from '../legacy-popmotion/index.mjs';\n\n/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\nfunction isTransitionDefined({ when, delay: _delay, delayChildren, staggerChildren, staggerDirection, repeat, repeatType, repeatDelay, from, ...transition }) {\n    return !!Object.keys(transition).length;\n}\nlet legacyRepeatWarning = false;\n/**\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\n */\nfunction convertTransitionToAnimationOptions({ ease, times, yoyo, flip, loop, ...transition }) {\n    const options = { ...transition };\n    if (times)\n        options[\"offset\"] = times;\n    /**\n     * Convert any existing durations from seconds to milliseconds\n     */\n    if (transition.duration)\n        options[\"duration\"] = secondsToMilliseconds(transition.duration);\n    if (transition.repeatDelay)\n        options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\n    /**\n     * Map easing names to Popmotion's easing functions\n     */\n    if (ease) {\n        options[\"ease\"] = isEasingArray(ease)\n            ? ease.map(easingDefinitionToFunction)\n            : easingDefinitionToFunction(ease);\n    }\n    /**\n     * Support legacy transition API\n     */\n    if (transition.type === \"tween\")\n        options.type = \"keyframes\";\n    /**\n     * TODO: These options are officially removed from the API.\n     */\n    if (yoyo || loop || flip) {\n        warning(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\n        legacyRepeatWarning = true;\n        if (yoyo) {\n            options.repeatType = \"reverse\";\n        }\n        else if (loop) {\n            options.repeatType = \"loop\";\n        }\n        else if (flip) {\n            options.repeatType = \"mirror\";\n        }\n        options.repeat = loop || yoyo || flip || transition.repeat;\n    }\n    /**\n     * TODO: Popmotion 9 has the ability to automatically detect whether to use\n     * a keyframes or spring animation, but does so by detecting velocity and other spring options.\n     * It'd be good to introduce a similar thing here.\n     */\n    if (transition.type !== \"spring\")\n        options.type = \"keyframes\";\n    return options;\n}\n/**\n * Get the delay for a value by checking Transition with decreasing specificity.\n */\nfunction getDelayFromTransition(transition, key) {\n    var _a, _b;\n    const valueTransition = getValueTransition(transition, key) || {};\n    return (_b = (_a = valueTransition.delay) !== null && _a !== void 0 ? _a : transition.delay) !== null && _b !== void 0 ? _b : 0;\n}\nfunction hydrateKeyframes(options) {\n    if (Array.isArray(options.to) && options.to[0] === null) {\n        options.to = [...options.to];\n        options.to[0] = options.from;\n    }\n    return options;\n}\nfunction getPopmotionAnimationOptions(transition, options, key) {\n    if (Array.isArray(options.to) && transition.duration === undefined) {\n        transition.duration = 0.8;\n    }\n    hydrateKeyframes(options);\n    /**\n     * Get a default transition if none is determined to be defined.\n     */\n    if (!isTransitionDefined(transition)) {\n        transition = {\n            ...transition,\n            ...getDefaultTransition(key, options.to),\n        };\n    }\n    return {\n        ...options,\n        ...convertTransitionToAnimationOptions(transition),\n    };\n}\n/**\n *\n */\nfunction getAnimation(key, value, target, transition, onComplete) {\n    const valueTransition = getValueTransition(transition, key) || {};\n    let origin = valueTransition.from !== undefined ? valueTransition.from : value.get();\n    const isTargetAnimatable = isAnimatable(key, target);\n    if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\n        /**\n         * If we're trying to animate from \"none\", try and get an animatable version\n         * of the target. This could be improved to work both ways.\n         */\n        origin = getAnimatableNone(key, target);\n    }\n    else if (isZero(origin) && typeof target === \"string\") {\n        origin = getZeroUnit(target);\n    }\n    else if (!Array.isArray(target) &&\n        isZero(target) &&\n        typeof origin === \"string\") {\n        target = getZeroUnit(origin);\n    }\n    const isOriginAnimatable = isAnimatable(key, origin);\n    warning(isOriginAnimatable === isTargetAnimatable, `You are trying to animate ${key} from \"${origin}\" to \"${target}\". ${origin} is not an animatable value - to enable this animation set ${origin} to a value animatable to ${target} via the \\`style\\` property.`);\n    function start() {\n        const options = {\n            from: origin,\n            to: target,\n            velocity: value.getVelocity(),\n            onComplete,\n            onUpdate: (v) => value.set(v),\n        };\n        return valueTransition.type === \"inertia\" ||\n            valueTransition.type === \"decay\"\n            ? inertia({ ...options, ...valueTransition })\n            : animate({\n                ...getPopmotionAnimationOptions(valueTransition, options, key),\n                onUpdate: (v) => {\n                    options.onUpdate(v);\n                    valueTransition.onUpdate && valueTransition.onUpdate(v);\n                },\n                onComplete: () => {\n                    options.onComplete();\n                    valueTransition.onComplete && valueTransition.onComplete();\n                },\n            });\n    }\n    function set() {\n        const finalTarget = resolveFinalValueInKeyframes(target);\n        value.set(finalTarget);\n        onComplete();\n        valueTransition.onUpdate && valueTransition.onUpdate(finalTarget);\n        valueTransition.onComplete && valueTransition.onComplete();\n        return { stop: () => { } };\n    }\n    return !isOriginAnimatable ||\n        !isTargetAnimatable ||\n        valueTransition.type === false\n        ? set\n        : start;\n}\nfunction isZero(value) {\n    return (value === 0 ||\n        (typeof value === \"string\" &&\n            parseFloat(value) === 0 &&\n            value.indexOf(\" \") === -1));\n}\nfunction getZeroUnit(potentialUnitType) {\n    return typeof potentialUnitType === \"number\"\n        ? 0\n        : getAnimatableNone(\"\", potentialUnitType);\n}\nfunction getValueTransition(transition, key) {\n    return transition[key] || transition[\"default\"] || transition;\n}\n/**\n * Start animation on a MotionValue. This function is an interface between\n * Framer Motion and Popmotion\n */\nfunction startAnimation(key, value, target, transition = {}) {\n    if (instantAnimationState.current) {\n        transition = { type: false };\n    }\n    return value.start((onComplete) => {\n        let controls;\n        const animation = getAnimation(key, value, target, transition, onComplete);\n        const delayBy = getDelayFromTransition(transition, key);\n        const start = () => (controls = animation());\n        let cancelDelay;\n        if (delayBy) {\n            cancelDelay = delay(start, secondsToMilliseconds(delayBy));\n        }\n        else {\n            start();\n        }\n        return () => {\n            cancelDelay && cancelDelay();\n            controls && controls.stop();\n        };\n    });\n}\n\nexport { convertTransitionToAnimationOptions, getDelayFromTransition, getPopmotionAnimationOptions, getValueTransition, getZeroUnit, hydrateKeyframes, isTransitionDefined, isZero, startAnimation };\n","function addUniqueItem(arr, item) {\n    if (arr.indexOf(item) === -1)\n        arr.push(item);\n}\nfunction removeItem(arr, item) {\n    const index = arr.indexOf(item);\n    if (index > -1)\n        arr.splice(index, 1);\n}\n// Adapted from array-move\nfunction moveItem([...arr], fromIndex, toIndex) {\n    const startIndex = fromIndex < 0 ? arr.length + fromIndex : fromIndex;\n    if (startIndex >= 0 && startIndex < arr.length) {\n        const endIndex = toIndex < 0 ? arr.length + toIndex : toIndex;\n        const [item] = arr.splice(fromIndex, 1);\n        arr.splice(endIndex, 0, item);\n    }\n    return arr;\n}\n\nexport { addUniqueItem, moveItem, removeItem };\n","import { addUniqueItem, removeItem } from './array.mjs';\n\nclass SubscriptionManager {\n    constructor() {\n        this.subscriptions = [];\n    }\n    add(handler) {\n        addUniqueItem(this.subscriptions, handler);\n        return () => removeItem(this.subscriptions, handler);\n    }\n    notify(a, b, c) {\n        const numSubscriptions = this.subscriptions.length;\n        if (!numSubscriptions)\n            return;\n        if (numSubscriptions === 1) {\n            /**\n             * If there's only a single handler we can just call it without invoking a loop.\n             */\n            this.subscriptions[0](a, b, c);\n        }\n        else {\n            for (let i = 0; i < numSubscriptions; i++) {\n                /**\n                 * Check whether the handler exists before firing as it's possible\n                 * the subscriptions were modified during this loop running.\n                 */\n                const handler = this.subscriptions[i];\n                handler && handler(a, b, c);\n            }\n        }\n    }\n    getSize() {\n        return this.subscriptions.length;\n    }\n    clear() {\n        this.subscriptions.length = 0;\n    }\n}\n\nexport { SubscriptionManager };\n","import sync, { getFrameData } from 'framesync';\nimport { SubscriptionManager } from '../utils/subscription-manager.mjs';\nimport { velocityPerSecond } from '../utils/velocity-per-second.mjs';\n\nconst isFloat = (value) => {\n    return !isNaN(parseFloat(value));\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\nclass MotionValue {\n    /**\n     * @param init - The initiating value\n     * @param config - Optional configuration options\n     *\n     * -  `transformer`: A function to transform incoming values with.\n     *\n     * @internal\n     */\n    constructor(init) {\n        /**\n         * This will be replaced by the build step with the latest version number.\n         * When MotionValues are provided to motion components, warn if versions are mixed.\n         */\n        this.version = \"7.6.19\";\n        /**\n         * Duration, in milliseconds, since last updating frame.\n         *\n         * @internal\n         */\n        this.timeDelta = 0;\n        /**\n         * Timestamp of the last time this `MotionValue` was updated.\n         *\n         * @internal\n         */\n        this.lastUpdated = 0;\n        /**\n         * Functions to notify when the `MotionValue` updates.\n         *\n         * @internal\n         */\n        this.updateSubscribers = new SubscriptionManager();\n        /**\n         * Functions to notify when the velocity updates.\n         *\n         * @internal\n         */\n        this.velocityUpdateSubscribers = new SubscriptionManager();\n        /**\n         * Functions to notify when the `MotionValue` updates and `render` is set to `true`.\n         *\n         * @internal\n         */\n        this.renderSubscribers = new SubscriptionManager();\n        /**\n         * Tracks whether this value can output a velocity. Currently this is only true\n         * if the value is numerical, but we might be able to widen the scope here and support\n         * other value types.\n         *\n         * @internal\n         */\n        this.canTrackVelocity = false;\n        this.updateAndNotify = (v, render = true) => {\n            this.prev = this.current;\n            this.current = v;\n            // Update timestamp\n            const { delta, timestamp } = getFrameData();\n            if (this.lastUpdated !== timestamp) {\n                this.timeDelta = delta;\n                this.lastUpdated = timestamp;\n                sync.postRender(this.scheduleVelocityCheck);\n            }\n            // Update update subscribers\n            if (this.prev !== this.current) {\n                this.updateSubscribers.notify(this.current);\n            }\n            // Update velocity subscribers\n            if (this.velocityUpdateSubscribers.getSize()) {\n                this.velocityUpdateSubscribers.notify(this.getVelocity());\n            }\n            // Update render subscribers\n            if (render) {\n                this.renderSubscribers.notify(this.current);\n            }\n        };\n        /**\n         * Schedule a velocity check for the next frame.\n         *\n         * This is an instanced and bound function to prevent generating a new\n         * function once per frame.\n         *\n         * @internal\n         */\n        this.scheduleVelocityCheck = () => sync.postRender(this.velocityCheck);\n        /**\n         * Updates `prev` with `current` if the value hasn't been updated this frame.\n         * This ensures velocity calculations return `0`.\n         *\n         * This is an instanced and bound function to prevent generating a new\n         * function once per frame.\n         *\n         * @internal\n         */\n        this.velocityCheck = ({ timestamp }) => {\n            if (timestamp !== this.lastUpdated) {\n                this.prev = this.current;\n                this.velocityUpdateSubscribers.notify(this.getVelocity());\n            }\n        };\n        this.hasAnimated = false;\n        this.prev = this.current = init;\n        this.canTrackVelocity = isFloat(this.current);\n    }\n    /**\n     * Adds a function that will be notified when the `MotionValue` is updated.\n     *\n     * It returns a function that, when called, will cancel the subscription.\n     *\n     * When calling `onChange` inside a React component, it should be wrapped with the\n     * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n     * from the `useEffect` function to ensure you don't add duplicate subscribers..\n     *\n     * ```jsx\n     * export const MyComponent = () => {\n     *   const x = useMotionValue(0)\n     *   const y = useMotionValue(0)\n     *   const opacity = useMotionValue(1)\n     *\n     *   useEffect(() => {\n     *     function updateOpacity() {\n     *       const maxXY = Math.max(x.get(), y.get())\n     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n     *       opacity.set(newOpacity)\n     *     }\n     *\n     *     const unsubscribeX = x.onChange(updateOpacity)\n     *     const unsubscribeY = y.onChange(updateOpacity)\n     *\n     *     return () => {\n     *       unsubscribeX()\n     *       unsubscribeY()\n     *     }\n     *   }, [])\n     *\n     *   return <motion.div style={{ x }} />\n     * }\n     * ```\n     *\n     * @privateRemarks\n     *\n     * We could look into a `useOnChange` hook if the above lifecycle management proves confusing.\n     *\n     * ```jsx\n     * useOnChange(x, () => {})\n     * ```\n     *\n     * @param subscriber - A function that receives the latest value.\n     * @returns A function that, when called, will cancel this subscription.\n     *\n     * @public\n     */\n    onChange(subscription) {\n        return this.updateSubscribers.add(subscription);\n    }\n    clearListeners() {\n        this.updateSubscribers.clear();\n    }\n    /**\n     * Adds a function that will be notified when the `MotionValue` requests a render.\n     *\n     * @param subscriber - A function that's provided the latest value.\n     * @returns A function that, when called, will cancel this subscription.\n     *\n     * @internal\n     */\n    onRenderRequest(subscription) {\n        // Render immediately\n        subscription(this.get());\n        return this.renderSubscribers.add(subscription);\n    }\n    /**\n     * Attaches a passive effect to the `MotionValue`.\n     *\n     * @internal\n     */\n    attach(passiveEffect) {\n        this.passiveEffect = passiveEffect;\n    }\n    /**\n     * Sets the state of the `MotionValue`.\n     *\n     * @remarks\n     *\n     * ```jsx\n     * const x = useMotionValue(0)\n     * x.set(10)\n     * ```\n     *\n     * @param latest - Latest value to set.\n     * @param render - Whether to notify render subscribers. Defaults to `true`\n     *\n     * @public\n     */\n    set(v, render = true) {\n        if (!render || !this.passiveEffect) {\n            this.updateAndNotify(v, render);\n        }\n        else {\n            this.passiveEffect(v, this.updateAndNotify);\n        }\n    }\n    /**\n     * Returns the latest state of `MotionValue`\n     *\n     * @returns - The latest state of `MotionValue`\n     *\n     * @public\n     */\n    get() {\n        return this.current;\n    }\n    /**\n     * @public\n     */\n    getPrevious() {\n        return this.prev;\n    }\n    /**\n     * Returns the latest velocity of `MotionValue`\n     *\n     * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n     *\n     * @public\n     */\n    getVelocity() {\n        // This could be isFloat(this.prev) && isFloat(this.current), but that would be wasteful\n        return this.canTrackVelocity\n            ? // These casts could be avoided if parseFloat would be typed better\n                velocityPerSecond(parseFloat(this.current) -\n                    parseFloat(this.prev), this.timeDelta)\n            : 0;\n    }\n    /**\n     * Registers a new animation to control this `MotionValue`. Only one\n     * animation can drive a `MotionValue` at one time.\n     *\n     * ```jsx\n     * value.start()\n     * ```\n     *\n     * @param animation - A function that starts the provided animation\n     *\n     * @internal\n     */\n    start(animation) {\n        this.stop();\n        return new Promise((resolve) => {\n            this.hasAnimated = true;\n            this.stopAnimation = animation(resolve);\n        }).then(() => this.clearAnimation());\n    }\n    /**\n     * Stop the currently active animation.\n     *\n     * @public\n     */\n    stop() {\n        if (this.stopAnimation)\n            this.stopAnimation();\n        this.clearAnimation();\n    }\n    /**\n     * Returns `true` if this value is currently animating.\n     *\n     * @public\n     */\n    isAnimating() {\n        return !!this.stopAnimation;\n    }\n    clearAnimation() {\n        this.stopAnimation = null;\n    }\n    /**\n     * Destroy and clean up subscribers to this `MotionValue`.\n     *\n     * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n     * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n     * created a `MotionValue` via the `motionValue` function.\n     *\n     * @public\n     */\n    destroy() {\n        this.updateSubscribers.clear();\n        this.renderSubscribers.clear();\n        this.stop();\n    }\n}\nfunction motionValue(init) {\n    return new MotionValue(init);\n}\n\nexport { MotionValue, motionValue };\n","import { motionValue } from '../value/index.mjs';\nimport { isMotionValue } from '../value/utils/is-motion-value.mjs';\nimport { startAnimation } from './utils/transitions.mjs';\n\n/**\n * Animate a single value or a `MotionValue`.\n *\n * The first argument is either a `MotionValue` to animate, or an initial animation value.\n *\n * The second is either a value to animate to, or an array of keyframes to animate through.\n *\n * The third argument can be either tween or spring options, and optional lifecycle methods: `onUpdate`, `onPlay`, `onComplete`, `onRepeat` and `onStop`.\n *\n * Returns `AnimationPlaybackControls`, currently just a `stop` method.\n *\n * ```javascript\n * const x = useMotionValue(0)\n *\n * useEffect(() => {\n *   const controls = animate(x, 100, {\n *     type: \"spring\",\n *     stiffness: 2000,\n *     onComplete: v => {}\n *   })\n *\n *   return controls.stop\n * })\n * ```\n *\n * @public\n */\nfunction animate(from, to, transition = {}) {\n    const value = isMotionValue(from) ? from : motionValue(from);\n    startAnimation(\"\", value, to, transition);\n    return {\n        stop: () => value.stop(),\n        isAnimating: () => value.isAnimating(),\n    };\n}\n\nexport { animate };\n"],"names":["MotionConfigContext","createContext","p","isBrowser","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","useConstant","init","ref","useRef","isMotionValue","value","clamp","min","max","v","sanitize","floatRegex","colorRegex","singleColorRegex","isString","number","alpha","scale","createUnitType","unit","degrees","percent","px","vh","vw","progressPercentage","isColorString","type","testProp","splitColor","aName","bName","cName","a","b","c","hsla","hue","saturation","lightness","alpha$1","clampRgbUnit","rgbUnit","rgba","red","green","blue","parseHex","r","g","hex","color","colorToken","numberToken","test","_a","_b","_c","_d","analyse","values","numColors","colors","numbers","parse","createTransformer","tokenised","numValues","output","i","convertNumbersToZero","getAnimatableNone","parsed","complex","maxDefaults","applyDefaultFilter","name","defaultValue","functionRegex","filter","functions","int","numberValueTypes","isKeyframesTarget","isCustomValue","resolveFinalValueInKeyframes","combineFunctions","pipe","transformers","secondsToMilliseconds","seconds","warning","invariant","noop","any","calcBezier","t","a1","a2","subdivisionPrecision","subdivisionMaxIterations","binarySubdivide","x","lowerBound","upperBound","mX1","mX2","currentX","currentT","cubicBezier","mY1","mY2","getTForX","aX","mirrorEasing","easing","reverseEasing","easeIn","easeOut","easeInOut","circIn","circOut","circInOut","createBackIn","power","backIn","backOut","backInOut","createAnticipate","backEasing","anticipate","easingLookup","easingDefinitionToFunction","definition","x1","y1","x2","y2","isEasingArray","ease","isAnimatable","key","underDampedSpring","criticallyDampedSpring","to","linearTween","keyframes","defaultTransitions","getDefaultTransition","valueKey","transitionFactory","defaultValueTypes","getDefaultValueType","defaultValueType","instantAnimationState","defaultTimestep","getCurrentTime","onNextFrame","callback","createRenderStep","runNextFrame","toRun","toRunNextFrame","numToRun","isProcessing","flushNextFrame","toKeepAlive","step","keepAlive","immediate","addToCurrentFrame","buffer","index","frameData","maxElapsed","useDefaultElapsed","frame","stepsOrder","steps","acc","sync","process","startLoop","cancelSync","flushSync","processStep","stepId","processFrame","timestamp","getFrameData","delay","timeout","start","checkElapsed","elapsed","mix","from","progress","hueToRgb","q","hslaToRgba","mixLinearColor","fromExpo","colorTypes","getColorType","asRGBA","model","mixColor","fromRGBA","toRGBA","blended","getMixer","origin","target","mixComplex","mixArray","blendValue","fromThis","mixObject","numNumbers","template","originStats","targetStats","toFromDifference","mixNumber","detectMixerFactory","createMixers","customMixer","mixers","mixerFactory","numMixers","mixer","easingFunction","interpolate","input","isClamp","inputLength","interpolator","progressInRange","defaultEasing","defaultOffset","_value","convertOffsetToTimes","offset","duration","o","state","times","createInterpolator","safeMin","minDuration","maxDuration","minDamping","maxDamping","findSpring","bounce","velocity","mass","envelope","derivative","dampingRatio","undampedFreq","exponentialDecay","delta","calcAngularFreq","d","e","f","initialGuess","approximateRoot","stiffness","rootIterations","result","durationKeys","physicsKeys","isSpringType","options","keys","getSpringOptions","springOptions","derived","spring","restSpeed","restDelta","damping","isResolvedFromDuration","resolveSpring","zero","resolveVelocity","createSpring","initialVelocity","initialDelta","undampedAngularFreq","angularFreq","dampedAngularFreq","freqForT","current","currentVelocity","isBelowVelocityThreshold","isBelowDisplacementThreshold","_t","decay","timeConstant","modifyTarget","amplitude","ideal","types","loopElapsed","reverseElapsed","isForwardPlayback","hasRepeatDelayElapsed","framesync","update","passTimestamp","animate","autoplay","driver","repeatMax","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate","driverControls","repeatCount","computedDuration","latest","isComplete","interpolateFromNumber","animator","animation","repeat","complete","play","velocityPerSecond","frameDuration","inertia","bounceStiffness","bounceDamping","currentAnimation","isOutOfBounds","boundaryNearest","startAnimation","startSpring","boundary","heading","prev","checkBoundary","isTransitionDefined","when","_delay","delayChildren","staggerChildren","staggerDirection","transition","convertTransitionToAnimationOptions","yoyo","flip","loop","getDelayFromTransition","getValueTransition","hydrateKeyframes","getPopmotionAnimationOptions","getAnimation","valueTransition","isTargetAnimatable","isZero","getZeroUnit","isOriginAnimatable","set","finalTarget","potentialUnitType","controls","delayBy","cancelDelay","addUniqueItem","arr","item","removeItem","SubscriptionManager","handler","numSubscriptions","isFloat","MotionValue","render","subscription","passiveEffect","resolve","motionValue"],"mappings":"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"}