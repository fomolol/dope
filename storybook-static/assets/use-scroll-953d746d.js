import{N as R,u as P,b as _,m as v}from"./animate-2454e827.js";import{c as j}from"./use-motion-template-472ea312.js";import{r as F}from"./index-10e52e8a.js";const N=e=>typeof e=="object"&&e.mix,X=e=>N(e)?e.mix:void 0;function Y(...e){const t=!Array.isArray(e[0]),n=t?0:-1,o=e[0+n],r=e[1+n],s=e[2+n],i=e[3+n],c=R(r,s,{mixer:X(s[0]),...i});return t?c(o):c}function ze(e,t,n,o){const r=typeof t=="function"?t:Y(t,n,o);return Array.isArray(e)?z(e,r):z([e],([s])=>r(s))}function z(e,t){const n=P(()=>[]);return j(e,()=>{n.length=0;const o=e.length;for(let r=0;r<o;r++)n[r]=e[r].get();return t(n)})}const q=(e,t,n)=>Math.min(Math.max(n,e),t),x=e=>typeof e=="number",D=e=>Array.isArray(e)&&!x(e[0]),G=(e,t,n)=>{const o=t-e;return((n-e)%o+o)%o+e};function C(e,t){return D(e)?e[G(0,e.length,t)]:e}const M=(e,t,n)=>-n*e+n*t+e,T=e=>e,L=(e,t,n)=>t-e===0?1:(n-e)/(t-e);function I(e,t){const n=e[e.length-1];for(let o=1;o<=t;o++){const r=L(0,t,o);e.push(M(n,1,r))}}function V(e){const t=[0];return I(t,e-1),t}function $(e,t=V(e.length),n=T){const o=e.length,r=o-t.length;return r>0&&I(t,r),s=>{let i=0;for(;i<o-2&&!(s<t[i+1]);i++);let c=q(0,1,L(t[i],t[i+1],s));return c=C(n,i)(c),M(e[i],e[i+1],c)}}const k=e=>typeof e=="function",B=e=>typeof e=="string";function J(e,t){return t?e*(1e3/t):0}function K(e,t){var n;return typeof e=="string"?t?((n=t[e])!==null&&n!==void 0||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}function Q(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}const y=new WeakMap;let d;function U(e,t){if(t){const{inlineSize:n,blockSize:o}=t[0];return{width:n,height:o}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function Z({target:e,contentRect:t,borderBoxSize:n}){var o;(o=y.get(e))===null||o===void 0||o.forEach(r=>{r({target:e,contentSize:t,get size(){return U(e,n)}})})}function ee(e){e.forEach(Z)}function te(){typeof ResizeObserver>"u"||(d=new ResizeObserver(ee))}function ne(e,t){d||te();const n=K(e);return n.forEach(o=>{let r=y.get(o);r||(r=new Set,y.set(o,r)),r.add(t),d==null||d.observe(o)}),()=>{n.forEach(o=>{const r=y.get(o);r==null||r.delete(t),r!=null&&r.size||d==null||d.unobserve(o)})}}const m=new Set;let p;function re(){p=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};m.forEach(n=>n(t))},window.addEventListener("resize",p)}function oe(e){return m.add(e),p||re(),()=>{m.delete(e),!m.size&&p&&(p=void 0)}}function se(e,t){return k(e)?oe(e):ne(e,t)}const ie=50,b=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),ce=()=>({time:0,x:b(),y:b()}),le={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function S(e,t,n,o){const r=n[t],{length:s,position:i}=le[t],c=r.current,h=n.time;r.current=e["scroll"+i],r.scrollLength=e["scroll"+s]-e["client"+s],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=L(0,r.scrollLength,r.current);const l=o-h;r.velocity=l>ie?0:J(r.current-c,l)}function fe(e,t,n){S(e,"x",t,n),S(e,"y",t,n),t.time=n}function ue(e,t){let n={x:0,y:0},o=e;for(;o&&o!==t;)if(o instanceof HTMLElement)n.x+=o.offsetLeft,n.y+=o.offsetTop,o=o.offsetParent;else if(o instanceof SVGGraphicsElement&&"getBBox"in o){const{top:r,left:s}=o.getBBox();for(n.x+=s,n.y+=r;o&&o.tagName!=="svg";)o=o.parentNode}return n}const ae={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},E={start:0,center:.5,end:1};function H(e,t,n=0){let o=0;if(E[e]!==void 0&&(e=E[e]),B(e)){const r=parseFloat(e);e.endsWith("px")?o=r:e.endsWith("%")?e=r/100:e.endsWith("vw")?o=r/100*document.documentElement.clientWidth:e.endsWith("vh")?o=r/100*document.documentElement.clientHeight:e=r}return x(e)&&(o=t*e),n+o}const de=[0,0];function he(e,t,n,o){let r=Array.isArray(e)?e:de,s=0,i=0;return x(e)?r=[e,e]:B(e)&&(e=e.trim(),e.includes(" ")?r=e.split(" "):r=[e,E[e]?e:"0"]),s=H(r[0],n,o),i=H(r[1],t),s-i}const ge={x:0,y:0};function pe(e,t,n){let{offset:o=ae.All}=n;const{target:r=e,axis:s="y"}=n,i=s==="y"?"height":"width",c=r!==e?ue(r,e):ge,h=r===e?{width:e.scrollWidth,height:e.scrollHeight}:{width:r.clientWidth,height:r.clientHeight},l={width:e.clientWidth,height:e.clientHeight};t[s].offset.length=0;let u=!t[s].interpolate;const a=o.length;for(let f=0;f<a;f++){const O=he(o[f],l[i],h[i],c[s]);!u&&O!==t[s].interpolatorOffsets[f]&&(u=!0),t[s].offset[f]=O}u&&(t[s].interpolate=$(V(a),t[s].offset),t[s].interpolatorOffsets=[...t[s].offset]),t[s].progress=t[s].interpolate(t[s].current)}function ve(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let o=t;for(;o&&o!=e;)n.x.targetOffset+=o.offsetLeft,n.y.targetOffset+=o.offsetTop,o=o.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function ye(e,t,n,o={}){const r=o.axis||"y";return{measure:()=>ve(e,o.target,n),update:s=>{fe(e,n,s),(o.offset||o.target)&&pe(e,n,o)},notify:k(t)?()=>t(n):me(t,n[r])}}function me(e,t){return e.pause(),e.forEachNative((n,{easing:o})=>{var r,s;if(n.updateDuration)o||(n.easing=T),n.updateDuration(1);else{const i={duration:1e3};o||(i.easing="linear"),(s=(r=n.effect)===null||r===void 0?void 0:r.updateTiming)===null||s===void 0||s.call(r,i)}}),()=>{e.currentTime=t.progress}}const g=new WeakMap,A=new WeakMap,w=new WeakMap,W=e=>e===document.documentElement?window:e;function we(e,t={}){var{container:n=document.documentElement}=t,o=Q(t,["container"]);let r=w.get(n);r||(r=new Set,w.set(n,r));const s=ce(),i=ye(n,e,s,o);if(r.add(i),!g.has(n)){const l=()=>{const a=performance.now();for(const f of r)f.measure();for(const f of r)f.update(a);for(const f of r)f.notify()};g.set(n,l);const u=W(n);window.addEventListener("resize",l,{passive:!0}),n!==document.documentElement&&A.set(n,se(n,l)),u.addEventListener("scroll",l,{passive:!0})}const c=g.get(n),h=requestAnimationFrame(c);return()=>{var l;typeof e!="function"&&e.stop(),cancelAnimationFrame(h);const u=w.get(n);if(!u||(u.delete(i),u.size))return;const a=g.get(n);g.delete(n),a&&(W(n).removeEventListener("scroll",a),(l=A.get(n))===null||l===void 0||l(),window.removeEventListener("resize",a))}}const Ee=()=>({scrollX:v(0),scrollY:v(0),scrollXProgress:v(0),scrollYProgress:v(0)});function be({container:e,target:t,layoutEffect:n=!0,...o}={}){const r=P(Ee);return(n?_:F.exports.useEffect)(()=>we(({x:i,y:c})=>{r.scrollX.set(i.current),r.scrollXProgress.set(i.progress),r.scrollY.set(c.current),r.scrollYProgress.set(c.progress)},{...o,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0}),[]),r}export{ze as a,be as u};
//# sourceMappingURL=use-scroll-953d746d.js.map
